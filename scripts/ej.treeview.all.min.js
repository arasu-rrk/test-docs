/**
* @fileOverview Plugin to style the Html div elements
* @copyright Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
* @version 12.1 
* @author <a href="mailto:licensing@syncfusion.com">Syncfusion Inc</a>
*/

//ejcore
window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,n){"use strict";t.consts={NamespaceJoin:"-"},t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},t.Orientation={Horizontal:"horizontal",Vertical:"vertical"},t.serverTimezoneOffset=0,Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return e[t]!==n}),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e=e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t.defineClass=function(e,i,r,o){if(!e||!r)return n;for(var s=e.split("."),a=window,l=0;l<s.length-1;l++)t.isNullOrUndefined(a[s[l]])&&(a[s[l]]={}),a=a[s[l]];return(o||t.isNullOrUndefined(a[s[l]]))&&(i="function"==typeof i?i:function(){},a[s[l]]=i,a[s[l]].prototype=r),a[s[l]]},t.util={getNameSpace:function(e){var n=e.toLowerCase().split(".");return"ej"===n[0]&&(n[0]="e"),n.join(t.consts.NamespaceJoin)},getObject:function(e,i){if(!i)return n;for(var r=i,o=e.split("."),s=0;s<o.length&&!t.util.isNullOrUndefined(r);s++)r=r[o[s]];return r},createObject:function(e,i,r){var o,s,a=e.split("."),l=r||window,u=l,c=a.length;for(o=0;c>o;o++)s=a[o],o+1==c?u[s]=i===n?{}:i:t.isNullOrUndefined(u[s])&&(u[s]={}),u=u[s];return l},isNullOrUndefined:function(e){return e===n||null===e},print:function(n){var i=t.buildTag("div"),r=n.clone();i.append(r);var o=window.open("","pint","'height=452,width=1024,tabbar=no");o.document.write("<!DOCTYPE html>");var s=e("head").find("link").add("style");if("msie"===t.browserInfo().name){var a="";s.each(function(t,n){"LINK"==n.tagName&&e(n).attr("href",n.href),a+=n.outerHTML}),o.document.write("<html><head></head><body>"+a+i[0].innerHTML+"</body></html>")}else{var a="";o.document.write("<html><head>"),s.each(function(t,n){"LINK"==n.tagName&&e(n).attr("href",n.href),a+=n.outerHTML}),o.document.writeln(a+"</head><body>"),o.document.writeln(i[0].innerHTML+"</body></html>")}o.focus(),setTimeout(function(){t.isNullOrUndefined(o.window)||(o.print(),o.location.reload(),setTimeout(function(){o.close()},1e3))},1e3)},ieClearRemover:function(t){var n=e(t).height();t.style.paddingTop=parseFloat(n/2)+"px",t.style.paddingBottom=parseFloat(n/2)+"px",t.style.height="1px",t.style.lineHeight="1px"},sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,i,r,o){var s=/^[a-z]*[0-9a-z]+/gi.exec(t)[0],a=/#([a-z]+[-_0-9a-z]+)/gi.exec(t);a=a?a[a.length-1]:n;var l=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(t);return l=l?l[l.length-1]:n,e(document.createElement(s)).attr(a?{id:a}:{}).addClass(l||"").css(r||{}).attr(o||{}).html(i||"")},_preventDefaultException:function(e,t){if(e)for(var n in t)if(t[n].test(e[n]))return!0;return!1},getMaxZindex:function(){var t=1;return t=Math.max.apply(null,e.map(e("body *"),function(t,n){return"absolute"==e(t).css("position")||"fixed"==e(t).css("position")?parseInt(e(t).css("z-index"))||1:void 0})),(t==n||null==t)&&(t=1),t},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(t,n){var i,r=e(t).parents().andSelf().filter(":hidden");if(r){var o={visibility:"hidden",display:"block"},s=[];r.each(function(){var e,t={};for(e in o)t[e]=this.style[e],this.style[e]=o[e];s.push(t)}),i=/(outer)/g.test(n)?e(t)[n](!0):e(t)[n](),r.each(function(e){var t,n=s[e];for(t in o)this.style[t]=n[t]})}return i},transitionEndEvent:function(){var e={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return e[t.userAgent()]},animationEndEvent:function(){var e={"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"};return e[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||e.support.hasPointer?e.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(e("head"),"data-ej-forceset",!1)?t.getBooleanVal(e("head"),"data-ej-device",this._device()):this._device()},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/mobile|tablet|android|kindle/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||t.getBooleanVal(e("head"),"data-ej-mobile",!1)===!0},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||t.getBooleanVal(e("head"),"data-ej-tablet",!1)===!0||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return e.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n	 ]+<","g"),"><"))},getBooleanVal:function(t,n,i){var r=e(t).attr(n);return null!=r?"true"==r.toLowerCase():i},_getSkewClass:function(e,t,n){var i=e.width(),r=e.height(),o=e.offset().left,s=e.offset().left+i,a=e.offset().top,l=e.offset().top+r,u=.3*i,c=.3*r;return o+u>t&&a+c>n?"e-m-skew-topleft":t>s-u&&a+c>n?"e-m-skew-topright":t>s-u&&n>l-c?"e-m-skew-bottomright":o+u>t&&n>l-c?"e-m-skew-bottomleft":t>o+u&&a+c>n&&s-u>t?"e-m-skew-top":o+u>t?"e-m-skew-left":t>s-u?"e-m-skew-right":n>l-c?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){e(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_touchStartPoints:function(e,t){if(e){var n=e.touches?e.touches[0]:e;t._distX=0,t._distY=0,t._moved=!1,t._pointX=n.pageX,t._pointY=n.pageY}},_isTouchMoved:function(e,t){if(e){var n,i,r=e.touches?e.touches[0]:e,o=r.pageX-t._pointX,s=r.pageY-t._pointY;Date.now();return t._pointX=r.pageX,t._pointY=r.pageY,t._distX+=o,t._distY+=s,n=Math.abs(t._distX),i=Math.abs(t._distY),!(5>n&&5>i)}},listenEvents:function(e,n,i,r,o,s){for(var a=0;a<e.length;a++)t.listenTouchEvent(e[a],n[a],i[a],r,o,s)},listenTouchEvent:function(n,i,r,o,s,a){for(var l=o?"removeEventListener":"addEventListener",u=o?"off":"on",c=e(n),d=0;d<c.length;d++){var f=c[d];switch(i){case"touchstart":t._bindEvent(f,l,i,r,"mousedown","MSPointerDown","pointerdown",a);break;case"touchmove":t._bindEvent(f,l,i,r,"mousemove","MSPointerMove","pointermove",a);break;case"touchend":t._bindEvent(f,l,i,r,"mouseup","MSPointerUp","pointerup",a);break;case"touchcancel":t._bindEvent(f,l,i,r,"mousecancel","MSPointerCancel","pointercancel",a);break;case"tap":case"taphold":case"ejtouchmove":case"click":e(f)[u](i,r);break;default:"msie"==t.browserInfo().name&&t.browserInfo().version<9?s._on(e(f),i,r):f[l](i,r,!0)}}},_bindEvent:function(t,n,i,r,o,s,a,l){e.support.hasPointer?t[n](window.navigator.pointerEnabled?a:s,r,!0):t[n](i,r,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e,n="webkitT,t,MozT,msT,OT".split(","),i=0,r=n.length;r>i;i++)if(e=n[i]+"ransform",e in t.styles)return n[i].substr(0,n[i].length-1);return!1},addPrefix:function(e){return""===t.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),t.userAgent()+e)},destroyWidgets:function(t){var n=e(t).find("[data-role *= ejm]");n.each(function(t,n){var i=e(n),r=i.data("ejWidgets");r&&i[r]("destroy")})},getAttrVal:function(t,n,i){var r=e(t).attr(n);return null!=r?r:i},getOffset:function(t){var n=t.offset();if("static"!=e("body").css("position")){var i=e("body").offset();n.left-=i.left,n.top-=i.top}return n},getZindexPartial:function(n,i){if(!t.isNullOrUndefined(n)&&n.length>0){var r,o=n.parents();r=e("body").children(),!t.isNullOrUndefined(n)&&n.length>0&&r.splice(r.index(i),1),e(r).each(function(e,t){o.push(t)});var s=Math.max.apply(s,e.map(o,function(t,n){return"static"!=e(t).css("position")?parseInt(e(t).css("z-index"))||1:void 0}));return!s||1e4>s?s=1e4:s+=1,s}}},e.extend(t,t.util),t.widgetBase={droppables:{"default":[]},resizables:{"default":[]},_renderEjTemplate:function(n,i,r,o){var s=null;return("object"==typeof n||n.startsWith("#")||n.startsWith("."))&&(s=e(n).attr("type")),s&&(s=s.toLowerCase(),t.template[s])?t.template[s](this,n,i,r,o):t.template.render(this,n,i,r,o)},destroy:function(){if(!this._trigger("destroy")){this.model.enablePersistence&&this.persistState();try{this._destroy()}catch(n){}for(var i=this.element.data("ejWidgets")||[],r=0;r<i.length;r++)i[r]==this.pluginName&&i.splice(r,1);for(i.length||this.element.removeData("ejWidgets");this._events;){var o=this._events.pop(),s=[];if(!o)break;for(var r=0;r<o[1].length;r++)e.isPlainObject(o[1][r])||s.push(o[1][r]);e.fn.off.apply(o[0],s)}this._events=null,this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(n){this._events||(this._events=[]);for(var i=[].splice.call(arguments,1,arguments.length-1),r={},o=i.length;r&&"function"!=typeof r;)r=i[--o];return i[o]=t.proxy(i[o],this),this._events.push([n,i,r,i[o]]),e.fn.on.apply(n,i),this},_off:function(t,n,i,r){var o,s=this._events;if(!s||!s.length)return this;"function"==typeof i&&(o=r,r=i,i=o);for(var a=0;a<s.length;a++){var l=s[a],u=l[0].length&&(!r||l[2]===r)&&l[1][0]===n&&(!i||l[1][1]===i)&&e.inArray(t[0],l[0])>-1;if(u){e.fn.off.apply(t,r?[n,i,l[3]]:[n,i]),s.splice(a,1);break}}return this},_trigger:function(n,i){var r,o,s=null,a={};if(e.extend(a,i),n in this.model&&(s=this.model[n]),s&&("string"==typeof s&&(s=t.util.getObject(s,window)),e.isFunction(s)&&(o=t.event(n,this.model,i),r=s.call(this,o),i&&e.extend(i,o),o.cancel||!t.isNullOrUndefined(r))))return r===!1||o.cancel;var l=Boolean(i);return i=i||{},i.originalEventType=n,i.type=this.pluginName+n,o=e.Event(i.type,t.event(i.type,this.model,i)),this.element.trigger(o),l&&e.extend(i,o),t.isOnWebForms&&0==o.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(n,i,a),o.cancel},setModel:function(t,n){if(!this._trigger("modelChange",{changes:t})){for(var r in t){if(!n){if(this.model[r]===t[r]){delete t[r];continue}if(e.isPlainObject(t[r])&&(i(this.model[r],t[r]),e.isEmptyObject(t[r]))){delete t[r];continue}}if(this.dataTypes){var o=this._isValidModelValue(r,this.dataTypes,t);if(o!==!0)throw"setModel - Invalid input for property :"+r+" - "+o}if(this.model.notifyOnEachPropertyChanges&&this.model[r]!==t[r]){var s={oldValue:this.model[r],newValue:t[r]};t[r]=this._trigger(r+"Change",s)?this.model[r]:s.newValue}}if(!e.isEmptyObject(t)){if(this._setFirst){var a=t.dataSource;a&&delete t.dataSource,e.extend(!0,this.model,t),a&&(this.model.dataSource=a instanceof Array?a.slice():a,t.dataSource=this.model.dataSource),!this._setModel||this._setModel(t)}else this._setModel&&this._setModel(t)===!1||e.extend(!0,this.model,t);"enablePersistence"in t&&this._setState(t.enablePersistence)}}},option:function(i,r,o){if(!i)return this.model;if(e.isPlainObject(i))return this.setModel(i);if("string"==typeof i){i=i.replace(/^model\./,"");var s=t.getObject(i,this.model);if(r===n)return s;if("enablePersistence"===i)return this._setState(r);if(o&&r===t.extensions.modelGUID)return this._setModel(t.createObject(i,t.getObject(i,this.model),{}));if(o||t.getObject(i,this.model)!==r)return this.setModel(t.createObject(i,r,{}),o)}return n},_isValidModelValue:function(e,t,n){var i,r=t[e],o=n[e];if(!r)return!0;if("string"==typeof r){if("enum"==r&&(n[e]=o?o.toString().toLowerCase():o,r="string"),"array"===r){if("[object Array]"===Object.prototype.toString.call(o))return!0}else{if("data"===r)return!0;if("parent"===r)return!0;if(typeof o===r)return!0}return"Expected type - "+r}if(o instanceof Array){for(var s=0;s<o.length;s++)if(i=this._isValidModelValue(e,t,o[s]),i!==!0)return" ["+s+"] - "+i;return!0}for(var a in o)if(i=this._isValidModelValue(a,r,o),i!==!0)return a+" : "+i;return!0},_setState:function(n){n===!0?(this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler)):(this.deleteState(),e(window).off("unload",this._persistHandler))},persistState:function(){var e=o({},this.model);if(this._ignoreOnPersist)for(var n=0;n<this._ignoreOnPersist.length;n++)delete e[this._ignoreOnPersist[n]];this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?window.localStorage.setItem(this.pluginName+this._id,JSON.stringify(e)):document.cookie&&t.cookie.set(this.pluginName+this._id,e)},deleteState:function(){window.localStorage?window.localStorage.removeItem(this.pluginName+this._id):document.cookie&&t.cookie.set(this.pluginName+this._id,model,new Date)},restoreState:function(n){var i=null;if(window.localStorage?i=window.localStorage.getItem(this.pluginName+this._id):document.cookie&&(i=t.cookie.get(this.pluginName+this._id)),i){var r=t.parseJSON(i);this._restoreState&&(this._restoreState(r.customPersists),delete r.customPersists),this.model=e.extend(!0,this.model,r)}!n&&i&&this._setModel&&this._setModel(this.model)},formatting:function(t,n,i){t=t.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),i=Globalize.cultures[i]?i:"en-US";var r,o,s,a,l=t;if(r=t.split("{0:"),a=t.split("}"),o=r[0],s=a[1],"string"==typeof n&&e.isNumeric(n)&&(n=Number(n)),-1!=t.indexOf("{0:")){var u=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),c=u.exec(t);return n=null!=c&&null!=n?null!=o&&null!=s?o+Globalize.format(n,c[2],i)+s:Globalize.format(n,c[2],i):null!=n?n:""}if(l.startsWith("{")&&!l.startsWith("{0:")){for(var d,f=l.split(""),n=(n||"")+"",h=n.split(""),p=/[0aA\*CN<>\?]/gm,d=0,g=0;d<f.length;d++)f[d]=p.test(f[d])?"{"+g++ +"}":f[d];return String.format.apply(String,[f.join("")].concat(h)).replace("{","").replace("}","")}return null!=this.data&&null==this.data.Value?(e.each(this.data,function(e,t){l=l.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),l):this.data.Value}};var i=function(t,n){for(var r in t)t[r]===n[r]&&delete n[r],e.isPlainObject(n[r])&&e.isPlainObject(t[r])&&i(t[r],n[r])};t.widget=function(i,a,u){if("object"!=typeof i){var c=u._rootCSS||t.getNameSpace(a);u=t.defineClass(a,function(n,l){if(this.sfType=a,this.pluginName=i,this.instance=s,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},e.extend(this,t.widgetBase),this.dataTypes)for(var d in l){var f=this._isValidModelValue(d,this.dataTypes,l);if(f!==!0)throw"setModel - Invalid input for property :"+d+" - "+f}var h=n.data("ejWidgets")||[];h.push(i),n.data("ejWidgets",h);for(var p=0;t.widget.observables&&this.observables&&p<this.observables.length;p++){var g=t.getObject(this.observables[p],l);g&&t.createObject(this.observables[p],t.widget.observables.register(g,this.observables[p],this,n),l)}if(this.element=n.jquery?n:e(n),this.model=o(!0,{},u.prototype.defaults,l),this.model.keyConfigs=o(this.keyConfigs),this.element.addClass(c+" e-js").data(i,this),this._id=n[0].id,this.element.attr("tabIndex")||this.element.attr("tabIndex",""),this.model.enablePersistence&&(this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler),this.restoreState(!0)),this._init(l),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){var m=!1;this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus);for(var v in this.model.keyConfigs)if("focus"!==v){m=!0;break}if(m&&this._keyPressed){var b=n,w="keydown";this.keySettings&&(b=this.keySettings.getElement?this.keySettings.getElement()||b:b,w=this.keySettings.event||w),this._on(b,w,function(e){if(this.model.keyConfigs){var t=r.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),n={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};t&&this._keyPressed(t,e.target,n,e)===!1&&e.preventDefault()}})}}"ejGrid"==this.pluginName&&this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&this._startAdd(),this._trigger("create")},u),e.fn[i]=function(r){for(var o,s=r,d=0;d<this.length;d++){var f=e(this[d]),h=f.data(i),p=h&&f.hasClass(c),g=null;if(this.length>0&&e.isPlainObject(s)&&(r=t.copyObject({},s)),p){if(r)if(o=[].slice.call(arguments,1),this.length>0&&o[0]&&"option"===s&&e.isPlainObject(o[0])&&(o[0]=t.copyObject({},o[0])),e.isPlainObject(r))h.setModel(r);else if(0!==r.indexOf("_")&&!t.isNullOrUndefined(g=t.getObject(r,h))||0===r.indexOf("model.")){if(!g||!e.isFunction(g)){if(1==arguments.length)return g;h.option(r,arguments[1]);continue}var m=g.apply(h,o);if(m!==n)return m}else l(a+": function/property - "+r+" does not exist")}else r&&"object"!=typeof r?l(i+": methods/properties can be accessed only after plugin creation"):new u(f,r)}return-1!=i.indexOf("ejm")&&t.widget.registerInstance(f,i,a,u.prototype),this},t.widget.register(i,a,u.prototype)}else{u=a;for(var d in i){var f=i[d];f instanceof Array&&(u._rootCSS=f[1],f=f[0]),t.widget(d,f,u),i[d]instanceof Array&&(u._rootCSS="")}}},e.extend(t.widget,function(){var e={},n=[],i=function(n,i,r){t.isNullOrUndefined(e[n])||l("ej.widget : The widget named "+n+" is trying to register twice."),e[n]={name:n,className:i,proto:r}},r=function(e,t,i,r){n.push({element:e,pluginName:t,className:i,proto:r})};return{register:i,registerInstance:r,registeredWidgets:e,registeredInstances:n}}()),t.widget.destroyAll=function(e){if(e&&e.length)for(var t=0;t<e.length;t++){var n=e.eq(t).data(),i=n.ejWidgets;if(i&&i.length)for(var r=0;r<i.length;r++)n[i[r]]&&n[i[r]].destroy&&n[i[r]].destroy()}},t.cookie={get:function(e){var t=RegExp(e+"=([^;]+)").exec(document.cookie);return t&&t.length>1?t[1]:n},set:function(e,t,n){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==n?"":"; expires="+n.toUTCString()),document.cookie=e+"="+t}};var r={getActionFromCode:function(e,t,n,i,o){n=n||!1,i=i||!1,o=o||!1;for(var s in e)if("focus"!==s)for(var a=r.getKeyObject(e[s]),l=0;l<a.length;l++)if(t===a[l].code&&n==a[l].isCtrl&&i==a[l].isShift&&o==a[l].isAlt)return s;return null},getKeyObject:function(t){for(var n={isCtrl:!1,isShift:!1,isAlt:!1},i=e.extend(!0,{},n),o=t.split(","),s=[],a=0;a<o.length;a++){var l=null;if(-1!=o[a].indexOf("+"))for(var u=o[a].split("+"),c=0;c<u.length;c++)l=r.getResult(e.trim(u[c]),n);else l=r.getResult(e.trim(o[a]),e.extend(!0,{},i));s.push(l)}return s},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}};t.getScrollableParents=function(t){return e(t).parentsUntil("body").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},t.browserInfo=function(){var t={},n=[],i={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie) ([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var r in i)if(i.hasOwnProperty(r)&&(n=navigator.userAgent.match(i[r]))){if(t.name=n[1].toLowerCase(),t.version=n[2],t.culture={},t.culture.name=t.culture.language=navigator.language||navigator.userLanguage,"undefined"!=typeof Globalize){for(var o=Globalize.culture(),s=navigator.language||navigator.userLanguage?Globalize.culture(navigator.language||navigator.userLanguage):Globalize.culture("en-US"),a=0;navigator.languages&&a<navigator.languages.length&&(s=Globalize.culture(navigator.languages[a]),s.language!=navigator.languages[a]);a++);Globalize.culture(o),e.extend(!0,t.culture,s)}navigator.userAgent.match(/Trident\/7\./)&&(t.name="msie");break}return t.isMSPointerEnabled="msie"==t.name&&t.version>9&&window.navigator.msPointerEnabled,t},t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},t.event=function(t,n,i){var r=e.extend(i||{},{type:t,model:n,cancel:!1});return r},t.proxy=function(e,t,n){return e&&"function"==typeof e?"bind"in e&&t?n?e.bind(t,n):e.bind(t):function(){var i=n?[n]:[];return i.push.apply(i,arguments),e.apply(t||this,i)}:null},t.hasStyle=function(e){var t=document.documentElement.style;if(e in t)return!0;var n=["ms","Moz","Webkit","O","Khtml"];e=e[0].toUpperCase()+e.slice(1);for(var i=0;i<n.length;i++)if(n[i]+e in t)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var n=0;t>n;n++)if(n in this&&this[n]===e)return n;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var o=t.copyObject=function(e,i){var r,s,a=2;"boolean"!=typeof e&&(a=1);var l=[].slice.call(arguments,a);1===a&&(i=e,e=n);for(var u=0;u<l.length;u++)for(var c in l[u])r=i[c],s=l[u][c],s!==n&&r!==s&&l[u]!==s&&i!==s&&(s instanceof Array?0===u&&e?i[c]=s.slice():i[c]=s.slice():t.isPlainObject(s)?(i[c]=r||{},e?o(e,i[c],s):o(i[c],s)):i[c]=s);return i},s=function(){return this};t.template={},t.template.render=t.template["text/x-jsrender"]=function(t,n,i,r,o){"#"!==n.slice(0,1)&&(n=["<div>",n,"</div>"].join(""));var s={prop:o,index:r};return e(n).render(i,s)},t.isPlainObject=function(e){if(!e)return!1;if("object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(i){return!1}var r,o=t.support.isOwnLast;for(r in e)if(o)break;return r===n||e.hasOwnProperty(r)};var a=!1;t.util.valueFunction=function(e){return function(i,r){var o=t.getObject(e,this.model);return a===!1&&(a=t.getObject("observables.getValue",t.widget)),i===n?t.isNullOrUndefined(a)?"function"==typeof o?o():o:a(o,r):void("function"==typeof o?(this["ob.values"][e]=i,o.call(this,i)):t.createObject(e,i,this.model))}},t.util.getVal=function(e){return"function"==typeof e?e():e},t.support={isOwnLast:function(){var e=function(){this.a=1};e.prototype.b=1;for(var t in new e)return"b"===t}(),outerHTML:function(){return document.createElement("div").outerHTML!==n}()};var l=t.throwError=function(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}};t.extensions={},t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(e){var t=$(this);$.each(e,function(e,n){n&&n.specified&&t.attr(n.name,n.value)})},$.fn.removeEleAttrs=function(e){return this.each(function(){var t=$(this),n=$(this.attributes).clone();$.each(n,function(n,i){i&&i.specified&&e.test(i.name)&&t.removeAttr(i.name)})})},$.fn.attrNotStartsWith=function(e){var t,n=[];for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++)t[i]&&t[i].specified&&e.test(t[i].name)||n.push(t[i]);return n},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var e=$(this),t=$(this.attributes).clone();$.each(t,function(t,n){n&&n.specified&&""===n.value&&e.removeAttr(n.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:ej.userAgent()!==!1,pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,n){var i,r=e.attributes;for(i=0;i<r.length;i++)if(0===r[i].nodeName.indexOf(n[3]))return!1;return!0}})}();

//ejdata
window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,r,n){"use strict";t.DataManager=function(r,a,s){if(!(this instanceof t.DataManager))return new t.DataManager(r,a,s);r||(r=[]),s=s||r.adaptor,"string"==typeof s&&(s=new t[s]);var o=[],i=this;return r instanceof Array?o={json:r,offline:!0}:"object"==typeof r?e.isPlainObject(r)?(r.json||(r.json=[]),r.table&&(r.json=this._getJsonFromElement(r.table,r.headerOption)),o={url:r.url,insertUrl:r.insertUrl,removeUrl:r.removeUrl,updateUrl:r.updateUrl,crudUrl:r.crudUrl,batchUrl:r.batchUrl,json:r.json,headers:r.headers,accept:r.accept,data:r.data,timeTillExpiration:r.timeTillExpiration,cachingPageSize:r.cachingPageSize,enableCaching:r.enableCaching,requestType:r.requestType,key:r.key,crossDomain:r.crossDomain,jsonp:r.jsonp,dataType:r.dataType,offline:r.offline!==n?r.offline:"remoteSaveAdaptor"==r.adaptor?!1:r.url?!1:!0,requiresFormat:r.requiresFormat}):(r.jquery||T(r))&&(o={json:this._getJsonFromElement(r),offline:!0,table:r}):"string"==typeof r&&(o={url:r,offline:!1,dataType:"json"}),o.requiresFormat!==n||t.support.cors||(o.requiresFormat=R(o.crossDomain)?!0:o.crossDomain),o.dataType===n&&(o.dataType="json"),this.dataSource=o,this.defaultQuery=a,o.url&&o.offline&&!o.json.length?(this.isDataAvailable=!1,this.adaptor=s||new t.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(a||t.Query()).done(function(e){i.dataSource.offline=!0,i.isDataAvailable=!0,o.json=e.result,i.adaptor=new t.JsonAdaptor})):this.adaptor=o.offline?new t.JsonAdaptor:new t.ODataAdaptor,!o.jsonp&&this.adaptor instanceof t.ODataAdaptor&&(o.jsonp="callback"),this.adaptor=s||this.adaptor,o.enableCaching&&(this.adaptor=new t.CacheAdaptor(this.adaptor,o.timeTillExpiration,o.cachingPageSize)),this},t.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(r,a,s,o){"function"==typeof r&&(o=s,s=a,a=r,r=null),r||(r=this.defaultQuery),r instanceof t.Query||Q("DataManager - executeQuery() : A query is required to execute");var i=e.Deferred();i.then(a,s,o);var u={query:r};if(this.dataSource.offline||this.dataSource.url==n)_(function(){var e=this.executeLocal(r);u=this._getDeferedArgs(r,e,u),i.resolveWith(this,[u])},this);else{var c=this.adaptor.processQuery(this,r);t.isNullOrUndefined(c.url)?_(function(){u=this._getDeferedArgs(r,c,u),i.resolveWith(this,[u])},this):this._makeRequest(c,i,u,r)}return i.promise()},_getDeferedArgs:function(e,t,r){return e._requiresCount?(r.result=t.result,r.count=t.count):r.result=t,r.getTableModel=A(e._fromTable,r.result,this),r.getKnockoutModel=D(r.result),r},executeLocal:function(r){this.defaultQuery||r instanceof t.Query||Q("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||Q("DataManager - executeLocal() : Json data is required to execute"),r=r||this.defaultQuery;var n=this.adaptor.processQuery(this,r);if(r._subQuery){var s=r._subQuery._fromTable,o=r._subQuery._lookup,i=r._requiresCount?n.result:n;o&&o instanceof Array&&a(r._subQuery._fKey,s,i,o);for(var u=0;u<i.length;u++)i[u][s]instanceof Array&&(i[u]=e.extend({},i[u]),i[u][s]=this.adaptor.processResponse(r._subQuery.using(t.DataManager(i[u][s].slice(0))).executeLocal(),this,r))}return this.adaptor.processResponse(n,this,r)},_makeRequest:function(r,n,s,o){var i=!!o._subQuerySelector,u=N(function(e){s.error=e,n.rejectWith(this,[s])},this),c=N(function(e,t,r,a,u,c){i||(s.xhr=r,s.count=parseInt(t,10),s.result=e,s.request=a,s.aggregates=c,s.getTableModel=A(o._fromTable,e,this),s.getKnockoutModel=D(e),s.actual=u,n.resolveWith(this,[s]))},this),l=N(function(t,r){var n=e.Deferred(),l={parent:s};o._subQuery._isChild=!0;var p=this.adaptor.processQuery(this,o._subQuery,t?this.adaptor.processResponse(t):r),h=this._makeRequest(p,n,l,o._subQuery);return i||n.then(function(e){t&&(a(o._subQuery._fKey,o._subQuery._fromTable,t,e),c(t))},u),h},this),p=P(function(e,r,n,a){-1==n.getResponseHeader("Content-Type").indexOf("xml")&&t.dateParse&&(e=t.parseJSON(e));var s=this.adaptor.processResponse(e,this,o,n,a),u=0,p=null;return o._requiresCount&&(u=s.count,p=s.aggregates,s=s.result),o._subQuery?void(i||l(s)):void c(s,u,n,a,e,p)},this),h=e.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,beforeSend:N(this._beforeSend,this),processData:!1,success:p,error:u},r);if(h=e.ajax(h),i){var d=o._subQuerySelector.call(this,{query:o._subQuery,parent:o});d&&d.length?(h=e.when(h,l(null,d)),h.then(P(function(e,t,r){var n=this.adaptor.processResponse(e[0],this,o,e[2],r[0]),s=0;o._requiresCount&&(s=n.count,n=n.result);var u=this.adaptor.processResponse(t[0],this,o._subQuery,t[2],r[1]),s=0;o._subQuery._requiresCount&&(s=u.count,u=u.result),a(o._subQuery._fKey,o._subQuery._fromTable,n,u),i=!1,c(n,s,e[2])},this),u)):i=!1}return h},_beforeSend:function(e,t){this.adaptor.beforeSend(this,e,t);for(var r,n=this.dataSource.headers,a=0;n&&a<n.length;a++){r=[];for(var s in n[a])r.push(s),e.setRequestHeader(s,n[a][s])}},saveChanges:function(t,r,n){var a={url:n,key:r||this.dataSource.key},s=this.adaptor.batchRequest(this,t,a);if(this.dataSource.offline)return s;var o=e.Deferred();return e.ajax(e.extend({beforeSend:N(this._beforeSend,this),success:P(function(e,r,n,a){o.resolveWith(this,[this.adaptor.processResponse(e,this,null,n,a,t)])},this),error:function(e){o.rejectWith(this,[{error:e}])}},s)),o.promise()},insert:function(r,n){var a=this.adaptor.insert(this,r,n);if(this.dataSource.offline)return a;var s=e.Deferred();return e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:N(this._beforeSend,this),success:P(function(e,r,n,a){try{t.isNullOrUndefined(e)?e=[]:o.parseJson(e)}catch(i){e=[]}e=this.adaptor.processResponse(o.parseJson(e),this,null,n,a),s.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){s.rejectWith(this,[{error:e,dataManager:this}])}},a)),s.promise()},remove:function(t,r,n){"object"==typeof r&&(r=r[t]);var a=this.adaptor.remove(this,t,r,n);return this.dataSource.offline?a:e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:N(this._beforeSend,this)},a))},update:function(r,n,a){var s=this.adaptor.update(this,r,n,a);if(this.dataSource.offline)return s;var i=e.Deferred();return e.ajax(e.extend({contentType:"application/json; charset=utf-8",beforeSend:N(this._beforeSend,this),success:P(function(e,r,n,a){try{t.isNullOrUndefined(e)?e=[]:o.parseJson(e)}catch(s){e=[]}e=o.parseJson(e),i.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){i.rejectWith(this,[{error:e,dataManager:this}])}},s)),i.promise()},_getJsonFromElement:function(r){"string"==typeof r&&(r=e(e(r).html())),r=r.jquery?r[0]:r;var n=r.tagName.toLowerCase();return"table"!==n&&Q("ej.DataManager : Unsupported htmlElement : "+n),t.parseTable(r)}};var a=function(e,t,r,n){var a,s,o={};for(n.result&&(n=n.result),n.GROUPGUID&&Q("ej.DataManager: Do not have support Grouping in hierarchy"),a=0;a<n.length;a++)s=o[n[a][e]]||(o[n[a][e]]=[]),s.push(n[a]);for(a=0;a<r.length;a++)r[a][t]=o[r[a][e]]},s={accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},o={parseJson:function(e){var t=typeof e;return"string"===t?e=JSON.parse(e,o.jsonReviver):e instanceof Array?o.iterateAndReviveArray(e):"object"===t&&o.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?o.iterateAndReviveJson(e[t]):"string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?e[t]=o.parseJson(e[t]):e[t]=o.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t;for(var r in e)r.startsWith("__")||(t=e[r],"object"==typeof t?t instanceof Array?o.iterateAndReviveArray(t):o.iterateAndReviveJson(t):e[r]=o.jsonReviver(r,t))},jsonReviver:function(e,t){var r=t;if("string"==typeof t){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t);if(n)return new Date(parseInt(n[1]));if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)&&(t=new Date(t),isNaN(t))){var a=r.split(/[^0-9]/);t=new Date(a[0],a[1]-1,a[2],a[3],a[4],a[5])}}return t},isJson:function(e){return"string"==typeof e[0]?e:t.parseJSON(e)},isGuid:function(e){var t=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i,r=t.exec(e);return null!=r},replacer:function(e,r){return t.isPlainObject(r)?o.jsonReplacer(e,r):r instanceof Array?o.arrayReplacer(e,r):r instanceof Date?o.jsonReplacer("",{val:r}).val:r},jsonReplacer:function(e,r){var n;for(var a in r)if(n=r[a],n instanceof Date){var s=n,o=+s-6e4*s.getTimezoneOffset();r[a]=new Date(o-36e5*t.serverTimezoneOffset).toJSON()}return r},arrayReplacer:function(e,r){for(var n=0;n<r.length;n++)t.isPlainObject(r[n])?r[n]=o.jsonReplacer("",r[n]):r[n]instanceof Date&&(r[n]=o.jsonReplacer("",{date:r[n]}).date);return r}};t.isJSON=o.isJson,t.parseJSON=o.parseJson,t.dateParse=!0,t.isGUID=o.isGuid,t.Query=function(e){return this instanceof t.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new t.Query(e)},t.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof t.DataManager?(this.dataManagar=e,this):Q("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,r,n,a){return e=e||this.dataManagar,e&&e instanceof t.DataManager?e.executeQuery(this,r,n,a):Q("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return e=e||this.dataManagar,e&&e instanceof t.DataManager?e.executeLocal(this):Q("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var e=new t.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,r){return"function"==typeof r||t.isPlainObject(r)?"function"==typeof r&&this._params.push({key:e,fn:r}):this._params.push({key:e,value:r}),this},expand:function(e){return"string"==typeof e?this._expands=[].slice.call(arguments,0):this._expands=e.slice(0),this},where:function(e,r,n,a){r=(r||t.FilterOperators.equal).toLowerCase();var s=null;return"string"==typeof e?s=new t.Predicate(e,r,n,a):e instanceof t.Predicate?s=e:Q("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:s}),this},search:function(e,r,n,a){r&&"boolean"!=typeof r?"string"==typeof r&&(r=[r]):(r=[],a=r),"boolean"==typeof n&&(a=n,n=null),n=n||t.FilterOperators.contains,n.length<3&&(n=t.data.operatorSymbols[n]);var s=t.data.fnOperators[n]||t.data.fnOperators.processSymbols(n);return this.queries.push({fn:"onSearch",e:{fieldNames:r,operator:n,searchKey:e,ignoreCase:a,comparer:s}}),this},sortBy:function(e,r,n){var a,s,o=t.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),r=t.sortOrder.Descending),e instanceof Array){for(var u=0;u<e.length;u++)this.sortBy(e[u],r,n);return this}if("boolean"==typeof r?r=r?t.sortOrder.Descending:t.sortOrder.Ascending:"function"==typeof r&&(o="custom"),r&&"string"!=typeof r||(o=r?r.toLowerCase():t.sortOrder.Ascending,r=t.pvt.fnSort(r)),n){a=i(this.queries,"onSortBy");for(var u=0;u<a.length;u++)if(s=a[u].e.fieldName,"string"==typeof s){if(s===e)return this}else if(s instanceof Array)for(var c=0;c<s.length;c++)if(s[c]===e||e.toLowerCase()===s[c]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:r,direction:o}}),this},sortByDesc:function(e){return this.sortBy(e,t.sortOrder.Descending)},group:function(e){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return("number"!=typeof e||"number"!=typeof t)&&Q("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&Q("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&Q("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||Q("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,r){return e&&e instanceof t.Query||Q("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof r&&(this._subQuerySelector=r),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},t.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},t.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates"},init:function(){},extend:function(t){var r=function(t){this.dataSource=t,this.options&&(this.options=e.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}};r.prototype=new this.type,r.prototype.type=r;var n=r.prototype.base={};for(var a in t)r.prototype[a]&&(n[a]=r.prototype[a]);return e.extend(!0,r.prototype,t),r},processQuery:function(e,t){},processResponse:function(e,t,r,n){return e},convertToQueryString:function(t,r,n){return e.param(t)},type:t.Adaptor},t.UrlAdaptor=(new t.Adaptor).extend({processQuery:function(e,r,n){var a,s,o=i(r.queries,"onSortBy"),p=i(r.queries,"onGroup"),h=i(r.queries,"onWhere"),d=i(r.queries,"onSearch"),f=i(r.queries,"onAggregates"),g=u(r.queries,["onSelect","onPage","onSkip","onTake","onRange"]),y=r._params,v=e.dataSource.url,m=null,b=this.options,S={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};g.onPage?(a=g.onPage,s=l(a.pageIndex,r),m=l(a.pageSize,r),s=(s-1)*m):g.onRange&&(a=g.onRange,s=a.start,m=a.end-a.start);for(var _=0;_<o.length;_++)a=l(o[_].e.fieldName,r),S.sorted.push(c(this,"onEachSort",{name:a,direction:o[_].e.direction},r));n&&(a=this.getFiltersFrom(n,r),a&&S.filters.push(c(this,"onEachWhere",a.toJSON(),r)));for(var _=0;_<h.length;_++){S.filters.push(c(this,"onEachWhere",h[_].e.toJSON(),r));for(var j in S.filters[_])R(S[j])&&delete S[j]}for(var _=0;_<d.length;_++)a=d[_].e,S.searches.push(c(this,"onEachSearch",{fields:a.fieldNames,operator:a.operator,key:a.searchKey,ignoreCase:a.ignoreCase},r));for(var _=0;_<p.length;_++)S.grouped.push(l(p[_].e.fieldName,r));for(var _=0;_<f.length;_++)a=f[_].e,S.aggregates.push({type:a.type,field:l(a.field,r)});var x={};x[b.from]=r._fromTable,b.expand&&(x[b.expand]=r._expands),x[b.select]=g.onSelect?c(this,"onSelect",l(g.onSelect.fieldNames,r),r):"",x[b.count]=r._requiresCount?c(this,"onCount",r._requiresCount,r):"",x[b.search]=S.searches.length?c(this,"onSearch",S.searches,r):"",x[b.skip]=g.onSkip?c(this,"onSkip",l(g.onSkip.nos,r),r):"",x[b.take]=g.onTake?c(this,"onTake",l(g.onTake.nos,r),r):"",x[b.where]=S.filters.length||S.searches.length?c(this,"onWhere",S.filters,r):"",x[b.sortBy]=S.sorted.length?c(this,"onSortBy",S.sorted,r):"",x[b.group]=S.grouped.length?c(this,"onGroup",S.grouped,r):"",x[b.aggregates]=S.aggregates.length?c(this,"onAggregates",S.aggregates,r):"",x.param=[];for(var _=0;a=y[_];_++)if(x[a.key]&&Q("ej.Query: Custom Param is conflicting other request arguments"),e.adaptor instanceof t.WebMethodAdaptor){var C=a.key,O=a.value,T={};a.fn&&(O=a.fn.call(r,a.key,r,e)),T[C]=O,x.param.push(T)}else x[a.key]=a.value,a.fn&&(x[a.key]=a.fn.call(r,a.key,r,e));for(var j in x)(R(x[j])||""===x[j]||0===x[j].length)&&delete x[j];b.skip in x&&b.take in x||null===m||(x[b.skip]=c(this,"onSkip",s,r),x[b.take]=c(this,"onTake",m,r));var w=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(x),url:v,ejPvtData:w,type:"POST",contentType:"application/json; charset=utf-8"}:(a=this.convertToQueryString(x,r,e),a=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+a,{type:"GET",url:a.length?v.replace(/\/*$/,a):v,ejPvtData:w})},convertToQueryString:function(t,r,n){return n.dataSource.url&&-1!==n.dataSource.url.indexOf("?")?e.param(t):"?"+e.param(t)},processResponse:function(e,r,a,s,o,i){var u=o.ejPvtData||{},c=e.groupDs;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return a._requiresCount?{result:[],count:0}:[];var l=JSON.parse(o.data);if(l&&"batch"===l.action&&e.added)return i.added=e.added,i;if(e.d&&(e=e.d),u&&u.aggregates&&u.aggregates.length){var p,h=u.aggregates,d={},f={};e.count&&(d.count=e.count),e.result&&(d.result=e.result),e.aggregate&&(e=e.aggregate);for(var g=0;g<h.length;g++)p=t.aggregates[h[g].type],p&&(f[h[g].field+" - "+h[g].type]=p(e,h[g].field));d.aggregates=f,e=d}if(u&&u.groups&&u.groups.length){var y=u.groups,d={};e.count!=n&&(d.count=e.count),e.aggregates&&(d.aggregates=e.aggregates),e.result&&(e=e.result);for(var g=0;g<y.length;g++){var v=null;t.isNullOrUndefined(c)||(c=t.group(c,y[g])),e=t.group(e,y[g],u.aggregates,v,c)}return d.count!=n?d.result=e:d=e,d}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,r){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:r.url,key:r.key})}},beforeSend:function(e,t){},insert:function(e,t,r){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:r,action:"insert"})}},remove:function(e,t,r,n){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({key:r,keyColumn:t,table:n,action:"remove"})}},update:function(e,t,r,n){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:r,action:"update",keyColumn:t,key:r[t],table:n})}},getFiltersFrom:function(e,r){e instanceof Array&&e.length||Q("ej.SubQuery: Array of key values required");var n,a=r._fKey,s=a,o=[],i="object"!=typeof e[0];"object"!=typeof e[0]&&(s=null);for(var u=0;u<e.length;u++)n=i?e[u]:t.pvt.getObject(s,e[u]),o.push(new t.Predicate(a,"==",n));return t.Predicate.or(o)}}),t.WebMethodAdaptor=(new t.UrlAdaptor).extend({processQuery:function(e,r,n){var a=t.UrlAdaptor.prototype.processQuery(e,r,n),s=t.parseJSON(a.data),o={};if(s.param)for(var i=0;i<s.param.length;i++){var u=s.param[i],c=Object.keys(u)[0];o[c]=u[c]}return o.value=s,{data:JSON.stringify(o),url:a.url,ejPvtData:a.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}}}),t.CacheAdaptor=(new t.UrlAdaptor).extend({init:function(e,r,n){t.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=n,this.guidId=t.getGuid("cacheAdaptor");var a={keys:[],results:[]};window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify(a));var s=this.guidId;t.isNullOrUndefined(r)||setInterval(function(){for(var e=t.parseJSON(window.localStorage.getItem(s)),n=[],a=0;a<e.results.length;a++)e.results[a].timeStamp=new Date-new Date(e.results[a].timeStamp),new Date-new Date(e.results[a].timeStamp)>r&&n.push(a);for(var a=0;a<n.length;a++)e.results.splice(n[a],1),e.keys.splice(n[a],1);window.localStorage.removeItem(s),window.localStorage.setItem(s,JSON.stringify(e))},r)},generateKey:function(e,t){var r=i(t.queries,"onSortBy"),n=i(t.queries,"onGroup"),a=i(t.queries,"onWhere"),s=i(t.queries,"onSearch"),o=(i(t.queries,"onPage"),u(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),c=(t._params,e);c+=o.onPage.pageIndex,r.forEach(function(e){c+=e.e.direction+e.e.fieldName}),n.forEach(function(e){c+=e.e.fieldName}),s.forEach(function(e){c+=e.e.searchKey});for(var l=0;l<a.length;l++){var p=a[l];if(p.e.isComplex){var h=t.clone();h.queries=[];for(var d=0;d<p.e.predicates.length;d++)h.queries.push({fn:"onWhere",e:p.e.predicates[d],filter:t.queries.filter});c+=p.e.condition+this.generateKey(e,h)}else c+=p.e.field+p.e.operator+p.e.value}return c},processQuery:function(e,r,n){var a,s=this.generateKey(e.dataSource.url,r);window.localStorage&&(a=t.parseJSON(window.localStorage.getItem(this.guidId)));var o=a?a.results[a.keys.indexOf(s)]:null;return null!=o?o:this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))},processResponse:function(e,r,n,a,s,o){var e=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0)),i=this.generateKey(r.dataSource.url,n),u={};for(window.localStorage&&(u=t.parseJSON(window.localStorage.getItem(this.guidId))),u.results[u.keys.push(i)-1]={keys:i,result:e.result,timeStamp:new Date,count:e.count};u.results.length>this.pageSize;)u.results.splice(0,1),u.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(u)),e}});var i=function(e,t){return e.filter(function(e){return e.fn===t})||[]},u=function(e,t){for(var r=e.filter(function(e){return-1!==t.indexOf(e.fn)}),n={},a=0;a<r.length;a++)n[r[a].fn]||(n[r[a].fn]=r[a].e);return n},c=function(e,t,r,n){if(e[t]){var a=e[t](r,n);R(a)||(r=a)}return r};t.ODataAdaptor=(new t.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},onPredicate:function(e,r,n){var a,s,o="",i=e.value,u=typeof i,c=this._p(e.field);if(i instanceof Date&&(i="datetime'"+M(i)+"'"),"string"===u&&(i="'"+i+"'",n&&(c="cast("+c+", 'Edm.String')"),t.isGUID(i)&&(s="guid"),e.ignoreCase&&(s?c:c="tolower("+c+")",i=i.toLowerCase())),a=t.data.odBiOperator[e.operator])return o+=c,o+=a,s&&(o+=s),o+i;if(a=t.data.odUniOperator[e.operator],!a||"string"!==u)return"";if("substringof"===a){var l=i;i=c,c=l}return o+=a+"(",o+=c+",",s&&(o+=s),o+=i+")"},onComplexPredicate:function(e,t){for(var r=[],n=0;n<e.predicates.length;n++)r.push("("+this.onEachWhere(e.predicates[n],t)+")");return r.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){0===e.fields.length&&Q("Query() - Search : oData search requires list of field names to search");for(var r=this.pvt.searches||[],n=0;n<e.fields.length;n++)r.push(new t.Predicate(e.fields[n],e.operator,e.key,e.ignoreCase));this.pvt.searches=r},onSearch:function(e){return this.pvt.searches=t.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t=[];if(e.name instanceof Array)for(var r=0;r<e.name.length;r++)t.push(this._p(e.name[r]));else t.push(this._p(e.name)+("descending"===e.direction?" desc":""));return t.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return e===!0?"allpages":""},beforeSend:function(e,t,r){r.url.endsWith(this.options.batch)&&"post"===r.type.toLowerCase()&&(t.setRequestHeader("Accept",s.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(r,n,a,s,i,u){if(!t.isNullOrUndefined(r.d)){var c=a._requiresCount?r.d.results:r.d;if(!t.isNullOrUndefined(c))for(var l=0;l<c.length;l++)!t.isNullOrUndefined(c[l].__metadata)&&delete c[l].__metadata}var p=i&&i.ejPvtData;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==r.nodeType)return a._requiresCount?{result:[],count:0}:[];if(i&&this.options.batch&&i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()){var h,d,f=s.getResponseHeader("Content-Type");if(f=f.substring(f.indexOf("=batchresponse")+1),r=r.split(f),r.length<2)return;r=r[1];var g=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(r);r.replace(g[0],"");var y=g[1];r=r.split(y);for(var l=r.length;l>-1;l--)/\bContent-ID:/i.test(r[l])&&/\bHTTP.+201/.test(r[l])&&(h=parseInt(/\bContent-ID: (\d+)/i.exec(r[l])[1]),u.added[h]&&(d=o.parseJson(/^\{.+\}/m.exec(r[l])[0]),e.extend(u.added[h],this.processResponse(d))));return u}var v=s&&s.getResponseHeader("DataServiceVersion"),m=null,b={};if(v=v&&parseInt(v,10)||2,a&&a._requiresCount&&((r.__count||r["odata.count"])&&(m=r.__count||r["odata.count"]),r.d&&(r=r.d),(r.__count||r["odata.count"])&&(m=r.__count||r["odata.count"])),3===v&&r.value&&(r=r.value),r.d&&(r=r.d),3>v&&r.results&&(r=r.results),p&&p.aggregates&&p.aggregates.length){for(var S,_=p.aggregates,j={},l=0;l<_.length;l++)S=t.aggregates[_[l].type],S&&(j[_[l].field+" - "+_[l].type]=S(r,_[l].field));b=j}if(p&&p.groups&&p.groups.length)for(var x=p.groups,l=0;l<x.length;l++)r=t.group(r,x[l],p.aggregates);return R(m)?r:{result:r,count:m,aggregates:b}},convertToQueryString:function(e,t,r){var n=[],a=e.table||"";delete e.table,r.dataSource.requiresFormat&&(e.$format="json");for(var s in e)n.push(s+"="+e[s]);return n=n.join("&"),r.dataSource.url&&-1!==r.dataSource.url.indexOf("?")&&!a?n:n.length?a+"?"+n:a||""},insert:function(e,t,r){return{url:e.dataSource.url.replace(/\/*$/,r?"/"+r:""),data:JSON.stringify(t)}},remove:function(e,t,r,n){return{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,n?"/"+n:"")+"("+r+")"}},update:function(e,t,r,n){return{type:"PUT",url:e.dataSource.url.replace(/\/*$/,n?"/"+n:"")+"("+r[t]+")",data:JSON.stringify(r),accept:this.options.accept}},batchRequest:function(e,r,n){var a=n.guid=t.getGuid(s.batchPre),o=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),i={url:n.url,key:n.key,cid:1,cSet:t.getGuid(s.changeSet)},u="--"+a+"\n";return u+="Content-Type: multipart/mixed; boundary="+i.cSet.replace("--","")+"\n",this.pvt.changeSet=0,u+=this.generateInsertRequest(r.added,i),u+=this.generateUpdateRequest(r.changed,i),u+=this.generateDeleteRequest(r.deleted,i),u+=i.cSet+"--\n",u+="--"+a+"--",{type:"POST",url:o,contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:u}},generateDeleteRequest:function(e,t){if(!e)return"";for(var r="",n=0;n<e.length;n++)r+="\n"+t.cSet+"\n",r+=s.changeSetContent+"\n\n",r+="DELETE ",r+=t.url+"("+e[n][t.key]+") HTTP/1.1\n",r+="Accept: "+s.accept+"\n",r+="Content-Id: "+this.pvt.changeSet++ +"\n",r+=s.batchChangeSetContentType+"\n";return r+"\n"},generateInsertRequest:function(e,t){if(!e)return"";for(var r="",n=0;n<e.length;n++)r+="\n"+t.cSet+"\n",r+=s.changeSetContent+"\n\n",r+="POST ",r+=t.url+" HTTP/1.1\n",r+="Accept: "+s.accept+"\n",r+="Content-Id: "+this.pvt.changeSet++ +"\n",r+=s.batchChangeSetContentType+"\n\n",r+=JSON.stringify(e[n])+"\n";return r},generateUpdateRequest:function(e,t){if(!e)return"";for(var r="",n=0;n<e.length;n++)r+="\n"+t.cSet+"\n",r+=s.changeSetContent+"\n\n",r+="PUT ",r+=t.url+"("+e[n][t.key]+") HTTP/1.1\n",r+="Accept: "+s.accept+"\n",r+="Content-Id: "+this.pvt.changeSet++ +"\n",r+=s.batchChangeSetContentType+"\n\n",r+=JSON.stringify(e[n])+"\n\n";return r},_p:function(e){return e.replace(/\./g,"/")}}),t.ODataV4Adaptor=(new t.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return e===!0?"true":""},onPredicate:function(e,t,r){var n="",a=e.value,s=a instanceof Date;return n=this.base.onPredicate.call(this,e,t,r),s&&(n=n.replace(/datetime'(.*)'$/,"$1")),n},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(e){return this.pvt.search.join(" OR ")},beforeSend:function(e,t,r){},processResponse:function(r,n,a,s,i,u){var c=i&&i.ejPvtData;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==r.nodeType)return a._requiresCount?{result:[],count:0}:[];if(i&&this.options.batch&&i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()){var l,p,h=s.getResponseHeader("Content-Type");if(h=h.substring(h.indexOf("=batchresponse")+1),r=r.split(h),r.length<2)return;r=r[1];var d=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(r);r.replace(d[0],"");var f=d[1];r=r.split(f);for(var g=r.length;g>-1;g--)/\bContent-ID:/i.test(r[g])&&/\bHTTP.+201/.test(r[g])&&(l=parseInt(/\bContent-ID: (\d+)/i.exec(r[g])[1]),u.added[l]&&(p=o.parseJson(/^\{.+\}/m.exec(r[g])[0]),e.extend(u.added[l],this.processResponse(p))));return u}var y=null,v={};if(a&&a._requiresCount&&r["@odata.count"]&&(y=r["@odata.count"]),r=r.value,c&&c.aggregates&&c.aggregates.length){for(var m,b=c.aggregates,S={},g=0;g<b.length;g++)m=t.aggregates[b[g].type],m&&(S[b[g].field+" - "+b[g].type]=m(r,b[g].field));v=S}if(c&&c.groups&&c.groups.length)for(var _=c.groups,g=0;g<_.length;g++)r=t.group(r,_[g],c.aggregates);return R(y)?r:{result:r,count:y,aggregates:v}}}),t.JsonAdaptor=(new t.Adaptor).extend({processQuery:function(e,t){for(var r,a,s=e.dataSource.json.slice(0),o=s.length,i=!0,u={},c=0;c<t.queries.length;c++)a=t.queries[c],r=this[a.fn].call(this,s,a.e,t),"onAggregates"==a.fn?u[a.e.field+" - "+a.e.type]=r:s=r!==n?r:s,("onPage"===a.fn||"onSkip"===a.fn||"onTake"===a.fn||"onRange"===a.fn)&&(i=!1),i&&(o=s.length);return t._requiresCount&&(s={result:s,count:o,aggregates:u}),s},batchRequest:function(e,t,r){var n;for(n=0;n<t.added.length;n++)this.insert(e,t.added[n]);for(n=0;n<t.changed.length;n++)this.update(e,r.key,t.changed[n]);for(n=0;n<t.deleted.length;n++)this.remove(e,r.key,t.deleted[n]);return t},onWhere:function(e,t){return e?e.filter(function(e){return t.validate(e)}):e},onAggregates:function(e,r){var n=t.aggregates[r.type];return e&&n&&0!=e.length?n(e,r.field):null},onSearch:function(e,r){return e&&e.length?(0===r.fieldNames.length&&t.pvt.getFieldList(e[0],r.fieldNames),e.filter(function(e){for(var n=0;n<r.fieldNames.length;n++)if(r.comparer.call(e,t.pvt.getObject(r.fieldNames[n],e),r.searchKey,r.ignoreCase))return!0;
return!1})):e},onSortBy:function(e,r,n){if(!e)return e;var a,s=l(r.fieldName,n);if(!s)return e.sort(r.comparer);if(s instanceof Array){s=s.slice(0);for(var o=s.length-1;o>=0;o--)s[o]&&(a=r.comparer,s[o].endsWith(" desc")&&(a=t.pvt.fnSort(t.sortOrder.Descending),s[o]=s[o].replace(" desc","")),e=j(e,s[o],a,[]));return e}return j(e,s,r.comparer,n?n.queries:[])},onGroup:function(e,r,n){if(!e)return e;var a=i(n.queries,"onAggregates"),s=[];if(a.length)for(var o,u=0;u<a.length;u++)o=a[u].e,s.push({type:o.type,field:l(o.field,n)});return t.group(e,l(r.fieldName,n),s)},onPage:function(e,t,r){var n=l(t.pageSize,r),a=(l(t.pageIndex,r)-1)*n,s=a+n;return e?e.slice(a,s):e},onRange:function(e,t){return e?e.slice(l(t.start),l(t.end)):e},onTake:function(e,t){return e?e.slice(0,l(t.nos)):e},onSkip:function(e,t){return e?e.slice(l(t.nos)):e},onSelect:function(e,r){return e?t.select(e,l(r.fieldNames)):e},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,t,r,n){var a,s=e.dataSource.json;for("object"==typeof r&&(r=r[t]),a=0;a<s.length&&s[a][t]!==r;a++);return a!==s.length?s.splice(a,1):null},update:function(t,r,n,a){var s,o=t.dataSource.json,i=n[r];for(s=0;s<o.length&&o[s][r]!==i;s++);return s<o.length?e.extend(o[s],n):null}}),t.remoteSaveAdaptor=(new t.JsonAdaptor).extend({beforeSend:t.UrlAdaptor.prototype.beforeSend,insert:t.UrlAdaptor.prototype.insert,update:t.UrlAdaptor.prototype.update,remove:t.UrlAdaptor.prototype.remove,batchRequest:function(e,r,n){var a;for(a=0;a<r.added.length;a++)t.JsonAdaptor.prototype.insert(e,r.added[a]);for(a=0;a<r.changed.length;a++)t.JsonAdaptor.prototype.update(e,n.key,r.changed[a]);for(a=0;a<r.deleted.length;a++)t.JsonAdaptor.prototype.remove(e,n.key,r.deleted[a]);return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({changed:r.changed,added:r.added,deleted:r.deleted,action:"batch",table:n.url,key:n.key})}}}),t.WebApiAdaptor=(new t.ODataAdaptor).extend({insert:function(e,t,r){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,r,n){return{type:"DELETE",url:e.dataSource.url+"/"+r,data:JSON.stringify(r)}},update:function(e,t,r,n){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(r)}},processResponse:function(e,r,n,a,s,o){var i=s&&s.ejPvtData;if(s&&"post"!=s.type.toLowerCase()){var u=a&&a.getResponseHeader("DataServiceVersion"),c=null,l={};if(u=u&&parseInt(u,10)||2,n&&n._requiresCount&&(R(e.Count)||(c=e.Count)),3>u&&e.Items&&(e=e.Items),i&&i.aggregates&&i.aggregates.length){for(var p,h=i.aggregates,d={},f=0;f<h.length;f++)p=t.aggregates[h[f].type],p&&(d[h[f].field+" - "+h[f].type]=p(e,h[f].field));l=d}if(i&&i.groups&&i.groups.length)for(var g=i.groups,f=0;f<g.length;f++)e=t.group(e,g[f],i.aggregates);return R(c)?e:{result:e,count:c,aggregates:l}}}});var l=function(e,t){return"function"==typeof e?e.call(t||{}):e};t.TableModel=function(r,n,a,s){if(!w(this,t.TableModel))return new t.TableModel(n);w(n,Array)||Q("ej.TableModel - Json Array is required");for(var o,i=[],u=N(g,this),c=0;c<n.length;c++)o=new t.Model(n[c],this),o.state="unchanged",o.on("stateChange",u),s&&o.computes(s),i.push(o);return this.name=r||"table1",this.rows=t.NotifierArray(i),this._deleted=[],this._events=e({}),this.dataManager=a,this._isDirty=!1,this},t.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){if(this.dataManager&&w(this.dataManager,t.DataManager)||Q("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()){var e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name);e.done(N(function(e){for(var t=this.toArray(),r=0;r<t.length;r++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[r].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),e.fail(N(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1}},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){var r=new t.Model(e);r._isDirty=this._isDirty=!0,this.rows.push(r),this._events.triggerHandler({type:"insert",model:r,table:this})},update:function(e){this.key||Q("TableModel - update : Primary key should be assigned to TableModel.key");var t,r=e,n=this.key,a=r[n];t=this.rows.array.filter(function(e){return e.get(n)===a}),t=t[0];for(var s in r)t.set(s,r[s]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:t,table:this})},remove:function(e){this.key||Q("TableModel - update : Primary key should be assigned to TableModel.key");var t,r=this.key,a=-1;e&&"object"==typeof e&&(e=e[r]!==n?e[r]:e.get(r));for(var s=0;s<this.rows.length();s++)if(this.rows.array[s].get(r)===e){a=s;break}a>-1&&(t=this.rows.removeAt(a),t.markDelete(),this._deleted.push({model:t,position:a}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:t,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},r=this.toArray(),n=0;n<r.length;n++)e[r[n].state]&&e[r[n].state].push(r[n].json);return e.deleted=t.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(t){var r,n=p,a=e(t.html()),s=this.toArray();e.inArray(t.prop("tagName").toLowerCase(),["table","tbody"])&&(n=h),n.insertBefore(t),t.detach().empty();for(var o=0;o<s.length;o++)r=a.clone(),s[o].bindTo(r),t.append(r);t.insertAfter(n),n.remove()}};var p=r?e(document.createElement("div")):{},h=r?e(document.createElement("tr")):{};t.Model=function(r,n,a){"string"==typeof n&&(a=n,n=null),this.$id=k("m"),this.json=r,this.table=n instanceof t.TableModel?n:null,this.name=a||this.table&&this.table.name,this.dataManager=n instanceof t.DataManager?n:n.dataManagar,this.actual={},this._events=e({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},t.Model.prototype={computes:function(t){e.extend(this.computed,t)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var r,a=this.json,s=e;e=e.split(".");for(var o=0;o<e.length-1;o++)e=e[0],a=a[e[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),r=a[e],this.actual[e]!==n||e in this.actual||(this.actual[e]=t),a[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:s,current:t,previous:r,model:this})},get:function(e){return t.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(r,n){return r=r||this.dataManagar,n=n||r.dataSource.key,r||Q("ej.Model - DataManager is required to commit the changes"),"added"===this.state?r.insert(this.json,this.name).done(t.proxy(function(t){e.extend(this.json,t.record)},this)):"changed"===this.state?r.update(n,this.json,this.name):"deleted"===this.state?r.remove(n,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(t,r){if(this.state!==t){if("added"===this.state){if("deleted"!==t)return;t="unchanged"}var n=t;r=r||{},this.state=t,this._events.triggerHandler(e.extend({type:"stateChange",current:t,previous:n,model:this},r))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(t){var r,n,a=e(t),s=a.find("[ej-observe], [ej-computed], [ej-prop]"),o=s.length;a.data("ejModel",this);for(var i={fields:[],props:[],computes:[]},u=0;o>u;u++)r=s.eq(u),n=r.attr("ej-prop"),n&&this._processAttrib(n,r,i),n=r.attr("ej-observe"),n&&-1!==this._props.indexOf(n)?this._processField(r,n,i):(n=r.attr("ej-computed"),n&&this._processComputed(n,r,i));a.data("ejModelBinding"+this.$id,i)},unbind:function(t){var r,n={props:this._attrEls,computes:this._computeEls},a=!1;t&&(n=e(t).removeData("ejModel").data("ejModelBinding"+this.$id)||n,a=!0);for(var s in this.computed)r=n.computes[s],s=this.computed[s],r&&s.deps&&(this.off(s.deps.join(" "),r.handle),a&&delete this._computeEls[s]);a||(this._computeEls={});for(var s in n.props)r=n.props[s],r&&(this.off(r.deps.join(" "),r.handle),delete n.props[s],a&&delete this._attrEls[s]);if(a||(this._attrEls={}),n.fields&&n.fields.length)for(var o,i,u,c=n.fields.length,l=0;c>l;l++)o=n.fields[l],e(o).off("change",null,this._changeHandler),u=-1!==this.formElements.indexOf(o.tagName.toLowerCase())?"input":"read",i=this._updates[u].indexOf(o),-1!==i&&this._updates[u].splice(i,1)},_processComputed:function(e,t,r){if(e){var n,a,s=f(e),o=-1!==this.formElements.indexOf(t[0].tagName.toLowerCase())?"val":"html";this.computed[e]&&this.computed[s]||(this.computed[s]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=s),n=this.computed[e],n.get||(n.get=function(){n.value.call(this.json)}),a=n.deps,n=n.value,this._updateDeps(a),this._updateElement(t,o,n),n={el:t,handle:N(this._computeHandle,this,{value:e,type:o})},this._computeEls[e]=n,r.computes[e]=n,this.on(a.join(" "),n.handle)}},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(t,r,n){t[r](n.call(e.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var r=0;r<e.length;r++)!(e[r]in this.json)&&e[r]in this.computed&&t.merge(e,this.computed[e[r]].deps)},_generateDeps:function(e){for(var t,r=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),n=[],a=0;a<r.length;a++)r[a].startsWith("#ej.#")&&(t=r[a].replace("#ej.#","").split(" ")[0],t&&-1!==this._props.indexOf(t)&&n.push(t));return n},_processAttrib:function(e,t,r){var n,a,s={};e=e.replace(/^ +| +$/g,"").split(";");for(var o=0;o<e.length;o++)e[o]=e[o].split(":"),e[o].length<2||(n=e[o][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""),s[n]=e[o][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));e=s;var i=[];for(n in e)i.push(e[n]);this._updateDeps(i),this._updateProps(t,e),s=k("emak"),a={el:t,handle:N(this._attrHandle,this,s),value:e,deps:i},t.prop("ejmodelattrkey",s),r.props[s]=a,this._attrEls[s]=a,this.on(i.join(" "),a.handle)},_attrHandle:function(e){var t=this._attrEls[e];t&&this._updateProps(t.el,t.value)},_updateProps:function(t,r){var n,a=this.json,s=this.computed;for(var o in r)n=r[o],n in a?n=a[n]:n in s&&(n=s[n],n&&(n=n.value.call(e.extend({},this.json,s)))),R(n)||t.prop(o,n)},_updateValues:function(e,t){var r=this._updates[e];r&&(r.read||r.input)&&(this._ensureItems(r.read,"html",t),this._ensureItems(r.input,"val",t))},_ensureItems:function(t,r,n){if(t)for(var a=t.length-1;a>-1;a--)t[a].offsetParent?e(t[a])[r](n):t.splice(a,1)},_changeHandler:function(t){t.data.self.set(t.data.prop,e(this).val())},_processField:function(e,t,r){var n={self:this,prop:t},a=this.get(t);return r.fields.push(e[0]),-1===this.formElements.indexOf(e[0].tagName.toLowerCase())?(e.html(a),this._updates[t].read.push(e[0])):(e.val(a).off("change",null,this._changeHandler).on("change",null,n,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var d=/[^\w]+/g,f=function(e){return e.replace(d,"_")},g=function(e){this.setDirty(!0,e.model)};t.Predicate=function(e,r,n,a){return this instanceof t.Predicate?("string"==typeof e?(this.field=e,this.operator=r,this.value=n,this.ignoreCase=a,this.isComplex=!1,this._comparer=t.data.fnOperators.processOperator(this.operator)):(e instanceof t.Predicate&&n instanceof t.Predicate||n instanceof Array)&&(this.isComplex=!0,this.condition=r.toLowerCase(),this.predicates=[e],n instanceof Array?[].push.apply(this.predicates,n):this.predicates.push(n)),this):new t.Predicate(e,r,n,a)},t.Predicate.and=function(){return y._combinePredicates([].slice.call(arguments,0),"and")},t.Predicate.or=function(){return y._combinePredicates([].slice.call(arguments,0),"or")};var y={_combinePredicates:function(e,r){if(!e.length)return n;if(1===e.length){if(!w(e[0],Array))return e[0];e=e[0]}return new t.Predicate(e[0],r,e.slice(1))},_combine:function(e,r,n,a,s,o){return r instanceof t.Predicate?t.Predicate[s](e,r):"string"==typeof r?t.Predicate[s](e,new t.Predicate(r,n,a,o)):Q("Predicate - "+s+" : invalid arguments")}};if(t.Predicate.prototype={and:function(e,t,r,n){return y._combine(this,e,t,r,"and",n)},or:function(e,t,r,n){return y._combine(this,e,t,r,"or",n)},validate:function(e){var r,n,a=this.predicates;if(!this.isComplex)return this._comparer.call(this,t.pvt.getObject(this.field,e),this.value,this.ignoreCase);r="and"===this.condition;for(var s=0;s<a.length;s++)if(n=a[s].validate(e),r){if(!n)return!1}else if(n)return!0;return r},toJSON:function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var r=0;r<t.length;r++)e.push(t[r].toJSON())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,condition:this.condition,predicates:e}}},t.dataUtil={swap:function(e,t,r){if(t!=r){var n=e[t];e[t]=e[r],e[r]=n}},mergeSort:function(e,r,n){return n&&"string"!=typeof n||(n=t.pvt.fnSort(n,!0)),"function"==typeof r&&(n=r,r=null),t.pvt.mergeSort(e,r,n)},max:function(e,r,n){return"function"==typeof r&&(n=r,r=null),t.pvt.getItemFromComparer(e,r,n||t.pvt.fnDescending)},min:function(e,r,n){return"function"==typeof r&&(n=r,r=null),t.pvt.getItemFromComparer(e,r,n||t.pvt.fnAscending)},distinct:function(e,t,r){for(var n,a=[],s={},o=0;o<e.length;o++)n=O(e,t,o),n in s||(a.push(r?e[o]:n),s[n]=1);return a},sum:function(e,t){for(var r,n=0,a="number"!=typeof O(e,t,0),s=0;s<e.length;s++)r=O(e,t,s),isNaN(r)||null===r||(a&&(r=+r),n+=r);return n},avg:function(e,r){return t.sum(e,r)/e.length},select:function(e,r){for(var n=[],a=0;a<e.length;a++)n.push(t.pvt.extractFields(e[a],r));return n},group:function(r,n,a,s,o){if(s=s||1,r.GROUPGUID==t.pvt.consts.GROUPGUID){for(var i=0;i<r.length;i++)if(t.isNullOrUndefined(o))r[i].items=t.group(r[i].items,n,a,r.level+1),r[i].count=r[i].items.length;else{var u=-1,c=e.grep(o,function(e){return e.key==r[i].key});u=o.indexOf(c[0]),r[i].items=t.group(r[i].items,n,a,r.level+1,o[u].items),r[i].count=o[u].count}return r.childLevels+=1,r}var l={},p=[];p.GROUPGUID=t.pvt.consts.GROUPGUID,p.level=s,p.childLevels=0,p.records=r;for(var h=0;h<r.length;h++){var d=O(r,n,h);if(!l[d]&&(l[d]={key:d,count:0,items:[],aggregates:{},field:n},p.push(l[d]),!t.isNullOrUndefined(o))){var f=e.grep(o,function(e){return e.key==l[d].key});l[d].count=f[0].count}l[d].count=t.isNullOrUndefined(o)?l[d].count+=1:l[d].count,l[d].items.push(r[h])}if(a&&a.length)for(var h=0;h<p.length;h++){for(var g,y={},i=0;i<a.length;i++)if(g=t.aggregates[a[i].type],t.isNullOrUndefined(o))g&&(y[a[i].field+" - "+a[i].type]=g(p[h].items,a[i].field));else{var c=e.grep(o,function(e){return e.key==p[h].key});g&&(y[a[i].field+" - "+a[i].type]=g(c[0].items,a[i].field))}p[h].aggregates=y}return p},parseTable:function(r,n,a){var s,o,i=r.rows,u=[],c=[];if(!i.length)return[];switch(a=a||0,(n||"").toLowerCase()){case t.headerOption.tHead:s=r.tHead.rows[a];break;case t.headerOption.row:default:s=r.rows[a]}var l=s.cells;for(o=0;o<l.length;o++)u.push(e.trim(l[o].innerHTML));for(o=a+1;o<i.length;o++){for(var p={},h=i[o].cells,d=0;d<h.length;d++){var f=h[d].innerHTML;"string"==typeof f&&e.isNumeric(f)?p[u[d]]=Number(f):p[u[d]]=f}c.push(p)}return c}},t.headerOption={tHead:"thead",row:"row"},t.aggregates={sum:function(e,r){return t.sum(e,r)},average:function(e,r){return t.avg(e,r)},minimum:function(e,r){return t.min(e,r)[r]},maximum:function(e,r){return t.max(e,r)[r]},truecount:function(e,r){var n=t.Predicate(r,"equal",!0);return t.DataManager(e).executeLocal(t.Query().where(n)).length},falsecount:function(e,r){var n=t.Predicate(r,"equal",!1);return t.DataManager(e).executeLocal(t.Query().where(n)).length},count:function(e,t){return e.length}},t.pvt={filterQueries:i,mergeSort:function(e,r,n){if(e.length<=1)return e;var a=parseInt(e.length/2,10),s=e.slice(0,a),o=e.slice(a);return s=t.pvt.mergeSort(s,r,n),o=t.pvt.mergeSort(o,r,n),t.pvt.merge(s,o,r,n)},getItemFromComparer:function(e,r,n){var a,s,o,i=0,u="string"==typeof O(e,r,0);if(e.length)for(;t.isNullOrUndefined(a);)a=O(e,r,i),o=e[i++];for(;i<e.length;i++)s=O(e,r,i),t.isNullOrUndefined(s)||(u&&(a=+a,s=+s),n(a,s)>0&&(a=s,o=e[i]));return o},quickSelect:function(e,r,n,a,s,o){if(n==a)return e[n];var i=t.pvt.partition(e,r,n,a,o),u=i-n+1;return u==s?e[i]:u>s?t.pvt.quickSelect(e,r,n,i-1,s,o):t.pvt.quickSelect(e,r,i+1,a,s-u,o)},extractFields:function(e,r){var n={};if(1==r.length)return t.pvt.getObject(r[0],e);for(var a=0;a<r.length;a++)n[r[a].replace(".",t.pvt.consts.complexPropertyMerge)]=t.pvt.getObject(r[a],e);return n},partition:function(e,r,n,a,s){var o=parseInt((n+a)/2,10),i=O(e,r,o);t.swap(e,o,a),o=n;for(var u=n;a>u;u++)s(O(e,r,u),i)&&(t.swap(e,u,o),o++);return t.swap(e,o,a),o},fnSort:function(e){return e=e?e.toLowerCase():t.sortOrder.Ascending,e==t.sortOrder.Ascending?t.pvt.fnAscending:t.pvt.fnDescending},fnGetComparer:function(e,r){return function(n,a){return r(t.pvt.getObject(e,n),t.pvt.getObject(e,a))}},fnAscending:function(e,t){return null===t||t===n?-1:"string"==typeof e?e.localeCompare(t):null===e||e===n?1:e-t},fnDescending:function(e,t){return null===t||t===n?1:"string"==typeof e?-1*e.localeCompare(t):null===e||e===n?-1:t-e},merge:function(e,t,r,n){for(var a,s=[];e.length>0||t.length>0;)a=e.length>0&&t.length>0?n?n(O(e,r,0),O(t,r,0))<=0?e:t:e[0][r]<e[0][r]?e:t:e.length>0?e:t,s.push(a.shift());return s},getObject:function(e,t){if(!t)return n;if(!e)return t;if(-1===e.indexOf("."))return t[e];for(var r=t,a=e.split("."),s=0;s<a.length&&null!=r;s++)r=r[a[s]];return r},createObject:function(e,t,r){var a,s=e.split("."),o=r||window,i=o;for(a=0;a<s.length;a++)a+1==s.length?i[s[a]]=t===n?{}:t:null==i[s[a]]&&(i[s[a]]={}),i=i[s[a]];return o},getFieldList:function(e,r,a){if(a===n&&(a=""),r===n||null===r)return t.pvt.getFieldList(e,[],a);for(var s in e)"object"!=typeof e[s]||e[s]instanceof Array?r.push(a+s):t.pvt.getFieldList(e[s],r,a+s+".");return r}},t.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},t.data={},t.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},t.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},t.data.fnOperators={equal:function(e,t,r){return r?C(e)==C(t):e==t},notequal:function(e,r,n){return!t.data.fnOperators.equal(e,r,n)},lessthan:function(e,t,r){return r?C(e)<C(t):t>e},greaterthan:function(e,t,r){return r?C(e)>C(t):e>t},lessthanorequal:function(e,t,r){return r?C(e)<=C(t):t>=e},greaterthanorequal:function(e,t,r){return r?C(e)>=C(t):e>=t},contains:function(e,t,r){return r?!R(e)&&!R(t)&&-1!=C(e).indexOf(C(t)):!R(e)&&!R(t)&&-1!=e.toString().indexOf(t)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,t,r){return r?e&&t&&C(e).startsWith(C(t)):e&&t&&e.startsWith(t)},endswith:function(e,t,r){return r?e&&t&&C(e).endsWith(C(t)):e&&t&&e.endsWith(t)},processSymbols:function(e){var r=t.data.operatorSymbols[e];if(r){var n=t.data.fnOperators[r];if(n)return n}return Q("Query - Process Operator : Invalid operator")},processOperator:function(e){var r=t.data.fnOperators[e];return r?r:t.data.fnOperators.processSymbols(e)}},t.NotifierArray=function(r){return w(this,t.NotifierArray)?(this.array=r,this._events=e({}),this._isDirty=!1,this):new t.NotifierArray(r)},t.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t;return t=w(e,Array)?[].push.apply(this.array,e):this.array.push(e),this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return t>-1&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(t,r){this._events.triggerHandler(e.extend({type:t},r)),this._events.triggerHandler({type:"all",name:t,args:r})},toArray:function(){return this.array}},e.extend(t,t.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var r=0,n=this.length;n>r;++r)e.call(t,this[r],r,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var r=0;t>r;r++)if(r in this&&this[r]===e)return r;return-1},Array.prototype.filter=Array.prototype.filter||function(e){if("function"!=typeof e)throw new TypeError;for(var t=[],r=arguments[1]||this,n=0;n<this.length;n++){var a=this[n];e.call(r,a,n,this)&&t.push(a)}return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},t.support||(t.support={}),t.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;17>t;t++)if(t!==e[t])return!1;return!0}(),t.support.cors=e.support.cors,!e.support.cors&&window.XDomainRequest){var v=/^https?:\/\//i,m=/^get|post$/i,b=new RegExp("^"+location.protocol,"i"),S=/\/xml/i;e.ajaxTransport("text html xml json",function(e,t,r){if(e.crossDomain&&e.async&&m.test(e.type)&&v.test(t.url)&&b.test(t.url)){var a=null,s=(t.dataType||"").toLowerCase();return{send:function(r,o){a=new XDomainRequest,/^\d+$/.test(t.timeout)&&(a.timeout=t.timeout),a.ontimeout=function(){o(500,"timeout")},a.onload=function(){var e="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,t={code:200,message:"success"},r={text:a.responseText};try{if("json"===s)try{r.json=JSON.parse(a.responseText)}catch(i){t.code=500,t.message="parseerror"}else if("xml"===s||"text"!==s&&S.test(a.contentType)){var u=new ActiveXObject("Microsoft.XMLDOM");u.async=!1;try{u.loadXML(a.responseText)}catch(i){u=n}if(!u||!u.documentElement||u.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+a.responseText;r.xml=u}}catch(c){throw c}finally{o(t.code,t.message,r,e)}},a.onerror=function(){o(500,"error",{text:a.responseText})},-1!=navigator.userAgent.indexOf("MSIE 9.0")&&(a.onprogress=function(){}),a.open(e.type,e.url),a.send()},abort:function(){a&&a.abort()}}}})}e.support.cors=!0,t.sortOrder={Ascending:"ascending",Descending:"descending"},t.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"};var _=function(e,t){t&&(e=N(e,t)),(window.setImmediate||window.setTimeout)(e,0)};t.support.enableLocalizedSort=!1;var j=function(e,r,n,a){return t.support.stableSort?t.support.enableLocalizedSort||"string"!=typeof t.pvt.getObject(r,e[0]||{})||n!==t.pvt.fnAscending&&n!==t.pvt.fnDescending||1!==a.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(t.pvt.fnGetComparer(r,n)):x(e,r,n===t.pvt.fnDescending):t.mergeSort(e,r,n)},x=function(e,r,n){var a=Object.prototype.toString;Object.prototype.toString=-1===r.indexOf(".")?function(){return this[r]}:function(){return t.pvt.getObject(r,this)},e=e.sort(),Object.prototype.toString=a,n&&e.reverse()},C=function(e){return e?e.toLowerCase?e.toLowerCase():e.toString():0===e||e===!1?e.toString():""},O=function(e,r,n){return r?t.pvt.getObject(r,e[n]):e[n]},T=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},w=function(e,t){return e instanceof t},A=function(e,r,n,a){return function(s){return"object"==typeof s&&(a=s,s=null),new t.TableModel(s||e,r,n,a)}},D=function(t){return function(r,n){n=n||window.ko,n||Q("Knockout is undefined");for(var a,s,o,i=[],u=0;u<t.length;u++){a={};for(s in t[u])s.startsWith("_")||(a[s]=n.observable(t[u][s]));for(s in r)o=r[s],e.isPlainObject(o)?(o.owner||(o.owner=a),o=n.computed(o)):o=n.computed(o,a),a[s]=o;i.push(a)}return n.observableArray(i)}},q=0,k=function(e){return q+=1,e+q};t.getGuid=function(e){var t,r="0123456789abcdef";return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,n){return t=16*Math.random()|0,r[19===n?3&t|8:t]})};var P=function(e,t){return function(){var r=[].slice.call(arguments,0);return r.push(this),e.apply(t||this,r)}},N=function(e,t,r){return"bind"in e?r?e.bind(t,r):e.bind(t):function(){var n=r?[r]:[];return n.push.apply(n,arguments),e.apply(t||this,n)}},M=function(e){return e=JSON.parse(JSON.stringify({val:e},o.replacer)).val,e.slice(0)};t.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)};var R=function(e){return e===n||null===e},Q=function(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}}}(window.jQuery,window.Syncfusion,window.document);

//ejdraggable
!function(e,t,i){t.widget("ejDraggable","ej.Draggable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,dragArea:!1,clone:!1,distance:1,cursorAt:{top:-1,left:-2},dragStart:null,drag:null,dragStop:null,destroy:null,helper:function(){return e('<div class="e-drag-helper" />').html("draggable").appendTo(document.body)}},_init:function(){this.handler=function(){},this.resizables={},helpers={},this._wireEvents(),this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version},_setModel:function(e){},_destroy:function(){e(document).unbind(t.eventType.mouseUp,this._destroyHandler).unbind(t.eventType.mouseUp,this._dragStopHandler).unbind(t.eventType.mouseMove,this._dragStartHandler).unbind(t.eventType.mouseMove,this._dragHandler).unbind("mouseleave",this._dragMouseOutHandler).unbind("selectstart",!1),t.widgetBase.droppables[this.scope]=null},_initialize:function(i){var s=i;if(i.preventDefault(),i=this._getCoordinate(i),this.target=e(s.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},e(document).bind(t.eventType.mouseMove,this._dragStartHandler).bind(t.eventType.mouseUp,this._destroyHandler),!this.model.clone){var r=this.element.offset();this._relXposition=i.pageX-r.left,this._relYposition=i.pageY-r.top}e(document.documentElement).trigger(t.eventType.mouseDown,s)},_setDragArea:function(){var t=e(this.model.dragArea)[0];if(t){var i="hidden"!=e(t).css("overflow");this.dragArea=[(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0),(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0),(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helper.outerWidth()-this.margins.left-this.margins.right,(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helper.outerHeight()-this.margins.top-this.margins.bottom],this.relativeArea=e(this.model.dragArea)}},_dragStart:function(i){var s=i;i=this._getCoordinate(i),this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0},this.offset=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.position=this._getMousePosition(s);var r=this._initPosition.x-i.pageX,n=this._initPosition.y-i.pageY,o=Math.sqrt(r*r+n*n);if(o>=this.model.distance){var a=this.model.handle=this.helper=this.model.helper({sender:s,element:this.target});if(this.model.dragStart){var h=null;if("touchmove"==s.type){var l=s.originalEvent.changedTouches[0];h=document.elementFromPoint(l.pageX,l.pageY)}else h=s.originalEvent.target||s.target;if(this._trigger("dragStart",{event:s,element:this.element,target:h}))return this._destroy(),!1}this.model.dragArea&&this._setDragArea();var d=a.offsetParent().offset();e(document).unbind(t.eventType.mouseMove,this._dragStartHandler).unbind(t.eventType.mouseUp,this._destroyHandler).bind(t.eventType.mouseMove,this._dragHandler).bind(t.eventType.mouseUp,this._dragStopHandler).bind("mouseleave",this._dragMouseOutHandler).bind("selectstart",!1),t.widgetBase.droppables[this.model.scope]={draggable:this.element,helper:a.css({position:"absolute",left:this.position.left-d.left,top:this.position.top-d.top}),destroy:this._destroyHandler}}},_drag:function(i){this.position=this._getMousePosition(i),this.position.top<0&&(this.position.top=0),e(document).height()<this.position.top&&(this.position.top=e(document).height()),e(document).width()<this.position.left&&(this.position.left=e(document).width());var s=t.widgetBase.droppables[this.model.scope].helper;if(this.model.drag){var r=null;if("touchmove"==i.type){var n=i.originalEvent.changedTouches[0];r=document.elementFromPoint(n.pageX,n.pageY)}else r=i.originalEvent.target||i.target;this._trigger("drag",{event:i,element:this.target,target:r})}var o=this._checkTargetElement(i);t.isNullOrUndefined(o)?this._hoverTarget&&(i.target=i.toElement=this._hoverTarget,this._hoverTarget.object._out(i),this._hoverTarget=null):(i.target=i.toElement=o,o.object._over(i),this._hoverTarget=o);var s=t.widgetBase.droppables[this.model.scope].helper,a=s.offsetParent().offset();s.css({left:this.position.left-a.left,top:this.position.top-a.top})},_dragStop:function(e){if(("mouseup"==e.type||"touchend"==e.type)&&this._destroy(e),this.model.dragStop){var t=null;if("touchend"==e.type){var i=e.originalEvent.changedTouches[0];t=document.elementFromPoint(i.pageX,i.pageY)}else t=e.originalEvent.target||e.target;this._trigger("dragStop",{event:e,element:this.target,target:t})}this._dragEnd(e)},_dragEnd:function(e){var i=this._checkTargetElement(e);t.isNullOrUndefined(i)||(e.target=e.toElement=i,i.object._drop(e))},_dragMouseEnter:function(t){e(document).unbind("mouseenter",this._dragMouseEnterHandler),this._isIE9?this._dragManualStop(t):this._isIE8?0==t.button&&this._dragManualStop(t):0==t.buttons&&this._dragManualStop(t)},_dragManualStop:function(e){null!=this.model.dragStop&&this._trigger("dragStop",{event:e,element:this.target,target:e.originalEvent.target||e.target}),this._destroy(e)},_dragMouseOut:function(t){e(document).bind("mouseenter",this._dragMouseEnterHandler)},_checkTargetElement:function(e){var t=e.target;return this.helper&&this._contains(this.helper[0],t)?(this.helper.hide(),t=this._elementUnderCursor(e),this.helper.show(),this._withDropElement(t)):this._withDropElement(t)},_withDropElement:function(i){return i&&(dropObj=e(i).data("ejDroppable"),t.isNullOrUndefined(dropObj)&&(dropObj=this._checkParentElement(e(i))),!t.isNullOrUndefined(dropObj))?e.extend(i,{object:dropObj}):void 0},_checkParentElement:function(i){var s=e(i).closest(".e-droppable");return s.length>0&&(dropObj=e(s).data("ejDroppable"),!t.isNullOrUndefined(dropObj))?dropObj:void 0},_elementUnderCursor:function(e){return"touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type?document.elementFromPoint(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY):document.elementFromPoint(e.pageX,e.pageY)},_contains:function(t,i){try{return e.contains(t,i)||t==i}catch(s){return!1}},_wireEvents:function(){this._on(this.element,t.eventType.mouseDown,this._initialize),this._dragStartHandler=e.proxy(this._dragStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._dragStopHandler=e.proxy(this._dragStop,this),this._dragHandler=e.proxy(this._drag,this),this._dragMouseEnterHandler=e.proxy(this._dragMouseEnter,this),this._dragMouseOutHandler=e.proxy(this._dragMouseOut,this)},_getMousePosition:function(e){e=this._getCoordinate(e);var t=this.model.clone?e.pageX:e.pageX-this._relXposition,i=this.model.clone?e.pageY:e.pageY-this._relYposition;if(this.dragArea){if(this.relativeArea){var s=this.relativeArea.offset();_area=[this.dragArea[0]+s.left,this.dragArea[1]+s.top,this.dragArea[2]+s.left,this.dragArea[3]+s.top]}else _area=this.dragArea;e.pageX-this.margins.left<_area[0]&&(t=_area[0]+this.margins.left),e.pageY-this.margins.top<_area[1]&&(i=_area[1]+this.margins.top),e.pageX-this.margins.left>_area[2]&&(t=_area[2]+this.margins.left),e.pageY-this.margins.top>_area[3]&&(i=_area[3]+this.margins.top)}return{left:t-this.margins.left-this.model.cursorAt.left,top:i-this.margins.top-this.model.cursorAt.top}},_getCoordinate:function(e){var t=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type)&&(t=e.originalEvent.changedTouches[0]),t}})}(jQuery,Syncfusion),function(e,t,i){t.widget("ejDroppable","ej.Droppable",{element:null,model:null,validTags:["div","span","a"],defaults:{accept:null,scope:"default",drop:null,over:null,out:null},_init:function(){this.model.accept?e(this.element).delegate(this.accept,"mouseup",e.proxy(this._drop,this)):e(this.element).bind("mouseup",e.proxy(this._drop,this)),this._on(e(document),"touchend",this._drop),this._mouseOver=!1},_setModel:function(e){},_destroy:function(){},_over:function(e){this._mouseOver||(this._trigger("mouseover",e),this._mouseOver=!0)},_out:function(e){this._mouseOver&&(this._trigger("mouseout",e),this._mouseOver=!1)},_drop:function(i){var s=t.widgetBase.droppables[this.model.scope],r=!t.isNullOrUndefined(s.helper)&&s.helper.is(":visible"),n=this._isDropArea(i);s&&!t.isNullOrUndefined(this.model.drop)&&r&&n.canDrop&&this.model.drop(e.extend(i,{dropTarget:n.target},!0),s)},_isDropArea:function(t){var i={canDrop:!0,target:e(t.target)};if("touchend"==t.type){var s,r=t.originalEvent.changedTouches[0];s=document.elementFromPoint(r.pageX,r.pageY),i.canDrop=!1;for(var n=e(s).parents(),o=0;o<this.element.length;o++){if(e(s).is(e(this.element[o])))i={canDrop:!0,target:e(s)};else for(var a=0;a<n.length;a++)if(e(this.element[o]).is(e(n[a]))){i={canDrop:!0,target:e(s)};break}if(i.canDrop)break}}return i}})}(jQuery,Syncfusion),function(e,t,i){t.widget("ejResizable","ej.resizable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,distance:1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,cursorAt:{top:1,left:1},resizeStart:null,resize:null,resizeStop:null,destroy:null,helper:function(){return e('<div class="e-resize-helper" />').html("resizable").appendTo(document.body)}},_init:function(){this.target=this.element,this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,null!=this.handle?e(this.target).delegate(this.handle,t.eventType.mouseDown,e.proxy(this._mousedown,this)).delegate(this.handle,"resizestart",this._blockDefaultActions):e(this.target).bind("mousedown",e.proxy(this._mousedown,this)),this._resizeStartHandler=e.proxy(this._resizeStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._resizeStopHandler=e.proxy(this._resizeStop,this),this._resizeHandler=e.proxy(this._resize,this),this._resizeMouseEnterHandler=e.proxy(this._resizeMouseEnter,this)},_mouseover:function(i){e(i.target).hasClass("e-resizable")?(e(i.target).css({cursor:"se-resize"}),e(this.target).bind(t.eventType.mouseDown,e.proxy(this._mousedown,this))):(e(this.target).unbind(t.eventType.mouseDown),e(this.target).css({cursor:""}))},_blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},_setModel:function(e){},_mousedown:function(i){var s=i;return i=this._getCoordinate(i),this.target=e(s.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},this._pageX=i.pageX,this._pageY=i.pageY,e(document).bind(t.eventType.mouseMove,this._resizeStartHandler).bind(t.eventType.mouseUp,this._destroyHandler),e(document.documentElement).trigger(t.eventType.mouseDown,s),!1},_resizeStart:function(i){if(e(i.target).hasClass("e-resizable")){i=this._getCoordinate(i);var s,r,n=this._initPosition.x-i.pageX,o=this._initPosition.y-i.pageY,a=Math.sqrt(n*n+o*o);if(a>=this.model.distance){if(null!=this.model.resizeStart&&this._trigger("resizeStart",{event:i,element:this.target}))return;var h=this.model.helper({element:this.target});s=i.pageX-this._pageX+h.outerWidth(),r=i.pageY-this._pageY+h.outerHeight(),this._pageX=i.pageX,this._pageY=i.pageY;this.getElementPosition(h);e(document).unbind(t.eventType.mouseMove,this._resizeStartHandler).unbind(t.eventType.mouseUp,this._destroyHandler).bind(t.eventType.mouseMove,this._resizeHandler).bind(t.eventType.mouseUp,this._resizeStopHandler).bind("mouseenter",this._resizeMouseEnterHandler).bind("selectstart",!1),t.widgetBase.resizables[this.scope]={resizable:this.target,helper:h.css({width:s,height:r}),destroy:this._destroyHandler}}}},_resize:function(e){var i,s,r;e=this._getCoordinate(e);var n=(this.getElementPosition(t.widgetBase.resizables[this.scope].helper),this.model.helper({element:this.target}));i=e.pageX-this._pageX+n.outerWidth(),s=e.pageY-this._pageY+n.outerHeight(),this._pageX=e.pageX,this._pageY=e.pageY,i<this.model.minWidth&&(r=this.model.minWidth-i,i=this.model.minWidth,this._pageX=e.pageX+r),s<this.model.minHeight&&(r=this.model.minHeight-s,s=this.model.minHeight,this._pageY=e.pageY+r),null!=this.model.maxHeight&&s>this.model.maxHeight&&(r=s-this.model.maxHeight,s=this.model.maxHeight,this._pageY=e.pageY-r),null!=this.model.maxWidth&&i>this.model.maxWidth&&(r=i-this.model.maxWidth,i=this.model.maxWidth,this._pageX=e.pageX-r),t.widgetBase.resizables[this.scope].helper.css({width:i,height:s}),this._trigger("resize",{element:this.target})},_resizeStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),("mouseup"==e.type||"touchend"==e.type)&&this._destroy(e)},_resizeMouseEnter:function(e){this._isIE9?this._resizeManualStop(e):this._isIE8?0==e.button&&this._resizeManualStop(e):0==e.buttons&&this._resizeManualStop(e)},_resizeManualStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),this._destroy(e)},_destroy:function(i){e(document).unbind(t.eventType.mouseUp,this._destroyHandler).unbind(t.eventType.mouseUp,this._resizeStopHandler).unbind(t.eventType.mouseMove,this._resizeStartHandler).unbind(t.eventType.mouseMove,this._resizeHandler).unbind("mouseenter",this._resizeMouseEnterHandler).unbind("selectstart",!1),t.widgetBase.resizables[this.scope]=null},getElementPosition:function(e){return null!=e&&e.length>0?{left:e[0].offsetLeft,top:e[0].offsetTop}:null},_getCoordinate:function(e){var t=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type)&&(t=e.originalEvent.changedTouches[0]),t}})}(jQuery,Syncfusion);

//ejcheckbox
!function(e,t,i){t.widget("ejCheckBox","ej.CheckBox",{_rootCSS:"e-checkbox",element:null,model:null,validTags:["input"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,htmlAttributes:{},checked:!1,enabled:!0,enableTriState:!1,showRoundedCorner:!1,enablePersistence:!1,cssClass:"",text:"",enableRTL:!1,idPrefix:"ej",size:"small",checkState:null,validationRules:null,validationMessage:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",enableTriState:"boolean",size:"enum",checkState:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},observables:["checked"],checked:t.util.valueFunction("checked"),_init:function(){var e=t.browserInfo();this._isIE8="msie"==e.name&&"8.0"==e.version?!0:!1,this._setValue(),this._renderControl(),this.model.enableRTL&&this._setRTL(),this.model.enabled&&this._wireEvents(),this._setEnabled(this.model.enabled),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._addAttr(this.model.htmlAttributes)},_setRTL:function(){this.maindiv.addClass("e-rtl")},_initValidator:function(){this.wrapper.closest("form").validate({ignore:".e-hidden",errorClass:"e-validation-error",errorElement:"span",errorPlacement:function(t,i){$container=i.closest(".e-widget").next().is("label")?i.closest(".e-widget").next():i.closest(".e-widget"),e(t).insertAfter($container)}})},_setValidation:function(){this.wrapper.find("input").rules("add",this.model.validationRules);var i=this.wrapper.closest("form").validate();name=this.wrapper.find("input").attr("name"),i.settings.messages[name]={};for(var s in this.model.validationRules){var a=null;if(!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s])){i.settings.messages[name][s]=e.validator.messages[s];for(var n in this.model.validationMessage)s==n?a=this.model.validationMessage[s]:""}else a=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=a?a:e.validator.messages[s]}}},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"name"==t?i.element.attr(t,e):"required"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._setEnabled(!1):"checked"==t&&"checked"==e?i.checked()instanceof Array?i._updateCheckedItem():i._checked(!0):i.wrapper.attr(t,e)})},_setModel:function(e){for(var i in e)switch(i){case"checked":if(t.util.getVal(e[i])instanceof Array){var s=t.util.getVal(e[i]),a=s[s.length-1];this.model.value==a&&(this._checked(),this._isChecked=!0)}else this._isChecked=t.util.getVal(e[i]),this._isChecked?this._checked():this._unChecked(),this.checked(t.util.getVal(e[i]));break;case"enableTriState":e[i]&&(this._indeterminateState=e[i],this._setIndeterminate(this._indeterminateState));break;case"checkState":this.model.enableTriState&&(this.model.checkState=e[i],this._changeState(this.model.checkState),this.checked()instanceof Array?this._updateCheckedItem():(e[i]="check")?this._hiddenInput.removeAttr("name"):this._hiddenInput.attr("name",this.model.name));break;case"cssClass":this._changeSkin(e[i]);break;case"enableRTL":e[i]?this._setRTL():this.maindiv.removeClass("e-rtl");break;case"text":this._setText(e[i]);break;case"validationRules":null!=this.model.validationRules&&(this.wrapper.find("input").rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[i],this._setValidation();break;case"validationMessage":this.model.validationMessage=e[i],this._setValidation();break;case"id":this._setIdAttr(e[i]);break;case"name":this.element.attr("name",e[i]),(!this._isChecked||this.spanImg.hasClass("e-chk-indeter"))&&this._hiddenInput.attr("name",e[i]),this.model.name=e[i];break;case"value":this.element.attr("value",e[i]);break;case"size":this._setSize(e[i]);break;case"showRoundedCorner":this._setRoundedCorner(e[i]);break;case"enabled":this._setEnabled(e[i]);break;case"htmlAttributes":this._addAttr(e[i])}},_destroy:function(){this.element.removeClass("e-checkbox e-input"),this.element.insertBefore(this.wrapper),this.wrapper.remove()},_changeSkin:function(t){this.model.cssClass!=t&&(this.wrapper.removeClass(this.model.cssClass).addClass(t),e("#"+this.model.idPrefix+this.model.id+"_wrapper").removeClass(this.model.cssClass).addClass(t))},_setValue:function(){this._indeterminateState=!1,this._isChecked=!1,!t.isNullOrUndefined(this.element.attr("id"))&&(this.model.id=this.element.attr("id")),!t.isNullOrUndefined(this.element.attr("name"))&&(this.model.name=this.element.attr("name")),t.isNullOrUndefined(this.element.attr("value"))||""==this.element.attr("value")||(this.model.value=this.element.attr("value")),this.checked()||t.isNullOrUndefined(this.element.attr("checked"))||(this._isChecked=!0),t.isNullOrUndefined(this.model.name)&&(this.model.name=this.model.id)},_setSize:function(e){e==t.CheckboxSize.Medium?this.innerdiv.removeClass("e-chkbox-small").addClass("e-chkbox-medium"):this.innerdiv.removeClass("e-chkbox-medium").addClass("e-chkbox-small")},_setRoundedCorner:function(e){e?this.span.addClass("e-corner"):this.span.removeClass("e-corner")},_setEnabled:function(e){e?this.enable():this.disable()},_setCheckBoxState:function(){this.model.enableTriState&&("indeterminate"==this.model.checkState?this._indeterminateState=!0:"check"==this.model.checkState?this._isChecked=!0:"uncheck"==this.model.checkState&&(this._isChecked=!1))},_renderControl:function(){this._setCheckBoxState(),this.maindiv=t.buildTag("span.e-chkbox-wrap e-widget "+this.model.cssClass+"#"+this.model.idPrefix+this.model.id,"",{},{role:"checkbox",tabindex:0}),this.innerdiv=e("<div></div>"),this._setSize(this.model.size),this.span=e("<span></span>"),this.spanImg=e('<span class="e-chk-image e-icon"></span>').attr("role","presentation"),this.element.addClass("e-input"),this.model.name=t.isNullOrUndefined(this.model.name)?this.model.id:this.model.name,this.model.value=t.isNullOrUndefined(this.model.value)?!0:this.model.value,this.element.attr({id:this.model.id,name:this.model.name,value:this.model.value}),this._hiddenInput=t.buildTag("input#"+this.model.name+"_hidden","",{},{type:"hidden",value:!1}),this._setRoundedCorner(this.model.showRoundedCorner),this.checked()&&this._setCheckedItem(this.checked()),this._isChecked?(this.spanImg.addClass("e-chk-activeicon"),this.span.addClass("e-chk-act"),this.maindiv.attr({"aria-checked":!0})):(this.span.addClass("e-chk-inact"),this.maindiv.attr({"aria-checked":!1}),this._hiddenInput.attr("name",this.model.name)),this.checked()instanceof Array||this.checked(this._isChecked),this.span.append(this.spanImg),this.innerdiv.append(this.span),this.maindiv.insertBefore(this.element),this.maindiv.append(this.element),this.maindiv.append(this._hiddenInput),this.maindiv.append(this.innerdiv),this.wrapper=this.maindiv,this._setTextWrapper(this.model.text),this.chkbx=this.element,1==this.model.enableTriState&&1==this._indeterminateState&&this._setIndeterminate(this._indeterminateState),this.checked()instanceof Array&&this._updateCheckedItem()},_changeState:function(e){"indeterminate"==e?(this.spanImg.removeClass("e-chk-activeicon").addClass("e-chk-indetericon"),this.span.removeClass("e-chk-act").removeClass("e-chk-inact").addClass("e-chk-indeter"),this.wrapper.attr({"aria-checked":"mixed"}),this.wrapper.find("input").prop("enableTriState",!0),this.checked()instanceof Array||this.checked(null)):"check"==e?(this.spanImg.removeClass("e-chk-indetericon").addClass("e-chk-activeicon"),this.span.removeClass("e-chk-act").removeClass("e-chk-inact").removeClass("e-chk-indeter").addClass("e-chk-act"),this.wrapper.attr({"aria-checked":!0})):"uncheck"==e&&(this.spanImg.removeClass("e-chk-activeicon").removeClass("e-chk-indetericon"),this.span.removeClass("e-chk-act").removeClass("e-chk-indeter").addClass("e-chk-inact"),this.wrapper.attr({"aria-checked":!1}))},_setIndeterminate:function(e){e?(this.spanImg.removeClass("e-chk-activeicon").addClass("e-chk-indetericon"),this.span.removeClass("e-chk-act").removeClass("e-chk-inact").addClass("e-chk-indeter"),this.wrapper.attr({"aria-checked":"mixed"}),this.wrapper.find("input").prop("enableTriState",!0),this.model.checkState="indeterminate",this.checked()instanceof Array||this.checked(null),this._hiddenInput.attr("name",this.model.name)):(this.wrapper.find(".e-chk-indeter").removeClass("e-chk-indeter"),this.wrapper.find(".e-chk-image").removeClass("e-chk-indetericon"),this.wrapper.find("input").removeAttr("enableTriState"),this.wrapper.find("input").prop("enableTriState",!1),this.checked()?this._checked():this._unChecked())},_setTextWrapper:function(e){""!=e&&(this.txtSpan=t.buildTag("div.e-text",e),this.wrapper.append(this.txtSpan),this.model.enableRTL&&this._setRTL())},_setText:function(e){""==this.model.text&&""!=e?this._setTextWrapper(e):this.txtSpan.html(e)},_setIdAttr:function(t){e("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper"),this.element.attr("id",t)},_wireEvents:function(){this._on(this.wrapper,"click",this._checkedHandler),this._isIE8&&this._on(e("label[for="+this.model.id+"]"),"click",function(){this.wrapper.click()}),this._on(this.wrapper,"focus",this._focusIn),this._on(this.wrapper,"focusout",this._focusOut)},_unWireEvents:function(){this._off(this.wrapper,"click"),this._isIE8&&this._off(e("label[for="+this.model.id+"]"),"click"),this._off(this.wrapper,"focus"),this._off(this.wrapper,"focusout")},_focusIn:function(t){e(this.wrapper).addClass("e-focus"),e(this.wrapper).bind("keydown",e.proxy(this._checkUnCheck,this))},_focusOut:function(t){e(this.wrapper).removeClass("e-focus"),e(this.wrapper).unbind("keydown",e.proxy(this._checkUnCheck,this))},_checkUnCheck:function(e){32==e.keyCode&&(e.preventDefault(),this._checkedHandler())},_checkedHandler:function(e){var t={isChecked:this._isChecked,event:e};if(1==this._trigger("beforeChange",t))return!1;this.wrapper.find("span:first").hasClass("e-chk-inact")?(this._checked(),this.checked()instanceof Array||this.checked(!0),this.model.enableTriState&&(this._indeterminateState=!0)):this.wrapper.find("span:first").hasClass("e-chk-act")?1==this.model.enableTriState&&1==this._indeterminateState?(this._setIndeterminate(!0),this.checked()instanceof Array||this.checked(!0)):(this._unChecked(),this.checked()instanceof Array||this.checked(!1)):this.wrapper.find("span:first").hasClass("e-chk-indeter")&&(this.checked()instanceof Array?this._isChecked=!1:this.checked(!1),this._setIndeterminate(!1),this._indeterminateState=!1),this.checked()instanceof Array?this._updateCheckedItem():this._isChecked=this.checked();var t={isChecked:this._isChecked,checkState:this.model.checkState,event:e};return this._trigger("change",t),!0},_checked:function(){this.wrapper.find("span:first").removeClass("e-chk-inact").addClass("e-chk-act"),this.wrapper.find(".e-chk-image").removeClass("e-chk-indetericon").addClass("e-chk-activeicon"),this.wrapper.attr({"aria-checked":!0}),this.wrapper.find("input[type=checkbox]").prop("checked",!0),this.model.checkState="check",this._hiddenInput.removeAttr("name")},_unChecked:function(){this.wrapper.find("span:first").removeClass("e-chk-act").addClass("e-chk-inact"),this.wrapper.attr({"aria-checked":!1}),this.wrapper.find(".e-chk-image").removeClass("e-chk-activeicon").removeClass("e-chk-indetericon"),this.wrapper.find("input[type=checkbox]").removeAttr("checked"),this.model.checkState="uncheck",this._hiddenInput.attr("name",this.model.name)},_setCheckedItem:function(e){if(t.isNullOrUndefined(e)||""==e||e instanceof Array){if(e instanceof Array&&!t.isNullOrUndefined(this.model.value)&&""!=this.model.value)for(var i=0;i<e.length;i++)e[i]==this.model.value&&(this._isChecked=!0)}else this._isChecked=!0},_updateCheckedItem:function(){t.isNullOrUndefined(this.model.value)||""==this.model.value||this.wrapper.find("span:first").hasClass("e-chk-indeter")||(e.inArray(this.model.value,this.checked())<0&&this.wrapper.find("span:first").hasClass("e-chk-act")?(this.checked().push(this.model.value),this._isChecked=!0,this._hiddenInput.removeAttr("name")):e.inArray(this.model.value,this.checked())>-1&&this.wrapper.find("span:first").hasClass("e-chk-inact")&&(this.checked().splice(e.inArray(this.model.value,this.checked()),1),this._isChecked=!1,this._hiddenInput.attr("name",this.model.name)))},disable:function(){this.wrapper.hasClass("e-disable")||(this.wrapper.addClass("e-disable").attr("aria-disabled",!0),this.element.attr("disabled","disabled"),this._isIE8&&this.span.addClass("e-disable"),this._unWireEvents(),this.model.enabled=!1)},enable:function(){this.wrapper.hasClass("e-disable")&&(this.wrapper.removeClass("e-disable").attr("aria-disabled",!1),this.element.removeAttr("disabled"),this._isIE8&&this.span.removeClass("e-disable"),this._wireEvents(),this.model.enabled=!0)},isChecked:function(){return null!=this._isChecked&&this._isChecked!=i?this._isChecked:void 0}}),t.CheckboxSize={Small:"small",Medium:"medium"},t.CheckState={Check:"check",Uncheck:"uncheck",Indeterminate:"indeterminate"}}(jQuery,Syncfusion);

//ejwaitingpopup
!function(t,e,i){e.widget("ejWaitingPopup","ej.WaitingPopup",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-waitingpopup",defaults:{showOnInit:!1,target:null,showImage:!0,htmlAttributes:{},cssClass:"",text:null,template:null,create:null,destroy:null},dataTypes:{showOnInit:"boolean",showImage:"boolean",cssClass:"string"},show:function(){this._refreshPanel(),this.maindiv.css("display","block"),this.model.showOnInit=!0},hide:function(){this.maindiv.css("display","none"),this.model.showOnInit=!1},refresh:function(){this._refreshPanel()},_setText:function(t){t?this.popupText?this.popupText.html(t):(this._generateTextTag(t),this._setContentPosition()):this.popupText&&(this.popupText.remove(),this.popupText=null)},_showImage:function(t){t?(this.popupImage=e.buildTag("span.e-image"),this.popupText?this.popupImage.insertBefore(this.popupText):this.maindiv.append(this.popupImage)):this.popupImage&&(this.popupImage.remove(),this.popupImage=null)},_setTemplate:function(){var i=this.model.template;"string"==typeof i&&(i=t(i)),"object"==typeof i&&"function"==typeof i.css?this.templateObj=i:this.templateObj=e.buildTag("div","",{"text-align":"center"}).append(i),this.templateObj.css({visibility:"visible",display:"block"}),this.maindiv.append(this.templateObj)},_setTheme:function(t){this.maindiv.removeClass(this.model.cssClass).addClass(t)},_init:function(){this._initialize(),this._render()},_setModel:function(t){var e;for(e in t)switch(e){case"text":this._setText(t[e]);break;case"cssClass ":this._setTheme(t[e]);break;case"htmlAttributes ":this._addAttr(t[e]);break;case"showOnInit":this._setVisibility(t[e]);break;case"showImage":this._showImage(t[e]),this._setContentPosition();break;case"target":this.model.target=t[e],this._setTarget(),this.refresh();break;case"template":this.maindiv.empty(),t[e]?(this.model.template=t[e],this._setTemplate()):(this.model.template=t[e]=null,this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),this._setContentPosition()}},_setTarget:function(){this.targetElement=this.model.target?t(this.model.target):this.element},_destroy:function(){this.maindiv.remove()},_initialize:function(){this.maindiv=null,this.popupText=null,this.popupImage=null,this.templateObj=null,this.targetElement=null},_render:function(){this._setTarget();var i=t("#"+this.element.context.id+"_WaitingPopup").get(0);i&&t(i).remove(),this.maindiv=e.buildTag("div.e-waitpopup-pane e-widget "+this.model.cssClass+"#"+this.element[0].id+"_WaitingPopup"),this.model.template?this._setTemplate():(this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),t("body").append(this.maindiv),this._setVisibility(this.model.showOnInit),this._addAttr(this.model.htmlAttributes)},_refreshPanel:function(){this.maindiv.width(this.targetElement.outerWidth()),this.maindiv.height(this.targetElement.outerHeight()),this._setPanelPosition(),this._setContentPosition()},_addAttr:function(e){var i=this;t.map(e,function(t,e){"class"==e?i.maindiv.addClass(t):i.maindiv.attr(e,t)})},_setPanelPosition:function(){var t=e.util.getOffset(this.targetElement);this.maindiv.css({position:"absolute",left:Math.ceil(t.left)+"px",top:Math.ceil(t.top)+"px","z-index":this._maxZindex()+1})},_setContentPosition:function(){if(null==this.model.template){var t,e=0,i=0,s=null;t=this.targetElement.outerHeight(),this.popupText&&(e=this.popupText.outerHeight()),this.popupImage&&(i=this.popupImage.outerHeight()),this.popupImage&&(s=Math.ceil((t-(i+e))/2),this.popupImage.css("top",s+"px")),this.popupText&&(s||(s=Math.ceil((t-e)/2)),this.popupText.css("top",s+"px"))}else this.templateObj.css({position:"relative",left:Math.ceil((this.targetElement.outerWidth()-this.templateObj.outerWidth())/2),top:Math.ceil((this.targetElement.outerHeight()-this.templateObj.outerHeight())/2)})},_generateTextTag:function(t){this.popupText=e.buildTag("div.e-text",t),this.maindiv.append(this.popupText)},_setVisibility:function(t){t?this.show():this.hide()},_maxZindex:function(){return e.util.getZindexPartial(this.element)}})}(jQuery,Syncfusion);

//ejtreeview
!function(e,t,s){t.widget("ejTreeView","ej.TreeView",{_rootCSS:"e-treeview",element:null,model:null,validTags:["ul","div"],_ignoreOnPersist:["fields","nodeClick","beforeExpand","nodeExpand","beforeCollapse","nodeCollapse","nodeSelect","nodeCheck","nodeUncheck","inlineEditValidation","beforeEdit","keyPress","nodeDragStart","nodeDrag","nodeDragStop","nodeDropped","create","destroy"],_setFirst:!1,defaults:{showCheckbox:!1,enableAnimation:!0,allowDragAndDrop:!1,htmlAttributes:{},allowDropChild:!0,allowDropSibling:!0,allowDragAndDropAcrossControl:!0,allowEditing:!1,allowKeyboardNavigation:!0,items:null,fields:{dataSource:null,query:null,tableName:null,child:null,id:"id",parentId:"parentId",text:"text",spriteCssClass:"spriteCssClass",expanded:"expanded",hasChild:"hasChild",selected:"selected",linkAttribute:"linkAttribute",imageAttribute:"imageAttribute",htmlAttribute:"htmlAttribute",imageUrl:"imageUrl",isChecked:"isChecked"},autoCheckParentNode:!1,loadOnDemand:!1,cssClass:"",template:null,enableRTL:!1,expandOn:"dblclick",enablePersistence:!1,enabled:!0,expandedNodes:[],checkedNodes:[],selectedNode:-1,width:null,height:null,autoCheck:!0,enableMultipleExpand:!0,nodeClick:null,beforeExpand:null,nodeExpand:null,beforeCollapse:null,nodeCollapse:null,beforeSelect:null,nodeSelect:null,nodeCheck:null,nodeUncheck:null,inlineEditValidation:null,beforeEdit:null,nodeEdit:null,keyPress:null,nodeDragStart:null,nodeDrag:null,nodeDragStop:null,nodeDropped:null,beforeAdd:null,nodeAdd:null,beforeDelete:null,nodeDelete:null,beforeCut:null,nodeCut:null,beforePaste:null,nodePaste:null,beforeLoad:null,loadSuccess:null,loadError:null,create:null,destroy:null},dataTypes:{cssClass:"string",showCheckbox:"boolean",enableAnimation:"boolean",allowDragAndDrop:"boolean",allowDropChild:"boolean",allowDragAndDropAcrossControl:"boolean",allowEditing:"boolean",allowKeyboardNavigation:"boolean",autoCheckParentNode:"boolean",loadOnDemand:"boolean",enableRTL:"boolean",expandOn:"string",enablePersistence:"boolean",enableMultipleExpand:"boolean",items:"data",fields:{dataSource:"data",query:"data",child:"data"},expandedNodes:"array",checkedNodes:"array",selectedNode:"number",htmlAttributes:"data"},observables:["fields.dataSource"],dataSource:t.util.valueFunction("fields.dataSource"),_setModel:function(t){for(var i in t)switch(i){case"cssClass":this._changeSkin(t[i]);break;case"fields":this._unWireEvents();var s,n=this.element.hasClass("e-js")?!1:!0,d=n?this.element.children("ul"):this.element;d.empty(),e.extend(this.model.fields,t[i]),this.model.expandedNodes=[],this.model.checkedNodes=[],this.model.selectedNode=-1,this._checkDataBinding(),n&&(s=this.element.children(".e-treeview-ul"),d.append(s.children()),s.remove());break;case"allowDragAndDropAcrossControl":this.model.allowDragAndDropAcrossControl=t[i],this._enableDragDrop();break;case"enabled":this._enabledAction(t[i]);break;case"showCheckbox":t[i]?(this.model.showCheckbox=t[i],this._showCheckBox(),!this.model.enabled&&this.element.find(".nodecheckbox").ejCheckBox("disable")):this.element.find(".e-item > div > .e-chkbox-wrap").remove();break;case"autoCheck":this.model.autoCheck=t[i];break;case"autoCheckParentNode":this.model.autoCheckParentNode=t[i];break;case"expandedNodes":var l=t[i].length,a=JSON.parse(JSON.stringify(this.model.expandedNodes));if(l>0){this._expandNodes(t[i]);for(var o=0,l=a.length;l>o;o++)-1==t[i].indexOf(a[o])&&(this._animating=!1,this._collpaseNode(e(this._liList[a[o]])))}else 0==l&&this._collapseAll();break;case"checkedNodes":if(this.model.showCheckbox){var l=t[i].length,a=JSON.parse(JSON.stringify(this.model.checkedNodes));if(l>0){this._checkedNodes(t[i]);for(var o=0,l=a.length;l>o;o++)-1==t[i].indexOf(a[o])&&this._nodeUncheck(e(this._liList[a[o]]).find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0])}else 0==l&&this._uncheckAll()}break;case"expandOn":this._on(this.element,t[i],this._expandEventHandler);break;case"allowEditing":this._preventEditable(),t[i]&&this._allowEditable();break;case"allowKeyboardNavigation":var r=t[i]?"_on":"_off";this[r](this.element,"keydown",this._KeyPress);break;case"allowDragAndDrop":this.model.allowDragAndDrop=t[i],t[i]?this._addDragableClass():this._preventDraggable();break;case"allowDropChild":this.model.allowDropChild=t[i],t[i]?this._addDragableClass():this._preventDropChild();break;case"allowDropSibling":this.model.allowDropSibling=t[i],t[i]?this._addDragableClass():this._preventDropSibling();break;case"enableRTL":this.model.enableRTL=t[i];var r,h=this.element.is("UL")?this.element.parent(".e-treeview-wrap"):this.element;r=this.model.enableRTL?"addClass":"removeClass",h[r]("e-rtl");break;case"height":this.element.height(t[i]);break;case"width":this.element.width(t[i]);break;case"selectedNode":this.model.selectedNode=t[i],this.model.selectedNode>=0?this._nodeSelectionAction(e(this._liList[this.model.selectedNode])):this.unselectNode(this.element.find(".e-item > div > .e-active").closest(".e-item"));break;case"htmlAttributes":this._addAttr(t[i]);break;case"enableMultipleExpand":!t[i]&&this.collapseAll()}},_destroy:function(){this.element.html(""),this._cloneElement.removeClass("e-treeview e-js e-treeview-wrap");var t=this.element.is("UL")?this.element.parent(".e-treeview-wrap"):this.element;t.replaceWith(this._cloneElement),e("#"+this._id+"_WaitingPopup").remove(),window.localStorage?(window.localStorage.removeItem(this._id+"_childNodes"),window.localStorage.removeItem(this._id+"_persistedValues")):window.cookie&&(document.cookie=this._id+"_childNodes=; expires=Thu, 01 Jan 1970 00:00:00 UTC",document.cookie=this._id+"_persistedValues=; expires=Thu, 01 Jan 1970 00:00:00 UTC")},_init:function(){if(this._cloneElement=this.element.clone(),this._dataSource=[],this._fragment=[],this._templateType="",this._indexID=0,this._animating=!1,this._newDataSource=this.dataSource(),this._id=this.element.prop("id"),this.model.enablePersistence){var e=this._getCookies("_persistedValues");if(!e){var i={selectedNode:"",expandedNodes:[],checkedNodes:[]};this._setCookies("_persistedValues",JSON.stringify(i))}}t.isNullOrUndefined(this.model.fields)||null==this.dataSource()?this._initialize():this._checkDataBinding()},_initialize:function(){this._cutNode=null,this._beforeEditText=null,this._CurrenctSelectedNodes=[],this.element.is("ul")?this._createWrapper():(this.element.addClass("e-treeview-wrap e-widget").attr("tabindex",0).children("ul:first").addClass("e-ul"),null!=this.model.width&&this.element.width(this.model.width),null!=this.model.height&&this.element.height(this.model.height),this.model.enableRTL&&this.element.addClass("e-rtl"),null!=this.model.cssClass&&this.element.addClass(this.model.cssClass),this._addAttr(this.model.htmlAttributes)),this._elementSettings(),this._beforeBaseClass(),null==this.dataSource()&&(this._addBaseClass(),this._controlRender()),this._addDragableClass(),this._finalize(),this._enabledAction(this.model.enabled)},_elementSettings:function(){var e=this.element.is("UL")?this.element.parent(".e-treeview-wrap"):this.element;this.element.is("ul")?e.attr("role","tree"):e.attr("aria-activedescendant",this._id+"_active").children("ul:first").attr("role","tree")},_beforeBaseClass:function(){var t=this.element.is("UL")?this.element.parent(".e-treeview-wrap")[0]:this.element[0];this._ulList=e(t.querySelectorAll("ul")),this._liList=e(t.querySelectorAll("li"))},_createWrapper:function(){var e=t.buildTag("div.e-treeview-wrap e-widget "+this.model.cssClass,"","",{tabindex:0,"aria-activedescendant":this._id+"_active"});null!=this.model.width&&e.width(this.model.width),null!=this.model.height&&e.height(this.model.height),this.model.enableRTL&&e.addClass("e-rtl"),e.insertAfter(this.element),e.append(this.element.addClass("e-ul").attr("tabindex",0)),this._addAttr(this.model.htmlAttributes)},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):"disabled"==t&&"disabled"==e?i._enabledAction(!1):i.element.attr(t,e)})},_changeSkin:function(e){if(this.model.cssClass!=e){var t=this.element.is("UL")?this.element.parent(".e-treeview-wrap"):this.element;t.removeClass(this.model.cssClass).addClass(e),t.find(".e-item > div > .e-chkbox-wrap").removeClass(this.model.cssClass).addClass(e)}},_enabledAction:function(e){this.model.enabled=e,e?(this.element.removeClass("e-disable"),this._wireEvents()):(this.element.addClass("e-disable"),this._unWireEvents())},_checkDataBinding:function(){this.dataSource()instanceof t.DataManager?this._initDataSource():((t.isNullOrUndefined(this.dataSource().length)||""==this.dataSource())&&(this.model.fields.dataSource=[]),this._ensureDataSource(this.dataSource()),this._initialize())},_initDataSource:function(){this.element.ejWaitingPopup();var e,t=(this.element.ejWaitingPopup("instance"),this);this.element.ejWaitingPopup("refresh"),this.element.ejWaitingPopup("show"),e=this._executeDataQuery(this.model.fields),e.done(function(e){t.element.ejWaitingPopup("hide"),t.retriveData=e.xhr&&e.xhr.responseJSON.d?e.xhr.responseJSON.d:e.result?e.result:[],t._ensureDataSource(t.retriveData),t._initialize()})},_columnToSelect:function(e){var i=[],s=t.Query();if(e.query||t.isNullOrUndefined(e.tableName))s=e.query?e.query:s;else{for(var n in e)"tableName"!==n&&"child"!==n&&"dataSource"!==n&&e[n]&&i.push(e[n]);i.length>0&&s.select(i),this.dataSource().dataSource.url.match(e.tableName+"$")||!t.isNullOrUndefined(e.tableName)&&s.from(e.tableName)}return s},_ensureDataSource:function(e){this.currentSelectedData=e,this._renderTemplate(e),this.element.is("ul")?this.element.html(this._fragment.firstChild.children):this.element.html(this._fragment)},_getTemplateType:function(e,t){for(var i=0,s=e.length;s>i;i++){if(e[i].hasOwnProperty(t.parentId)||e[i].hasOwnProperty(t.hasChild))return 1;if(e[i].hasOwnProperty("child"))return 2}return 1},_groupingObjects:function(e,t){for(var i={},s=[],n=0,d=e.length;d>n;n++){var l=JSON.stringify(t(e[n]));i[l]=i[l]||[],i[l].push(e[n])}for(var n in i)s.push(i[n]);return s},_renderTemplate:function(e){this._onlineData=!1,this._loadOnDemandNodes=!1;var i=this;this._templateType=this._getTemplateType(e,this.model.fields),this._dataSource=1==this._templateType?this._groupingObjects(e,function(e){return[!t.isNullOrUndefined(e)&&[e[i.model.fields.parentId]].toString()]}):e,this._templateNodeCreation(e,this.model.fields)},_templateNodeCreation:function(i,s){this._fragment=document.createDocumentFragment();var n,d=document.createElement("ul");if(this._fragment.appendChild(d),n=this._fragment.firstChild,(this._onlineData||this._loadOnDemandNodes)&&(n.className="e-treeview-ul",n.setAttribute("role","group"),e(n).attr("style","display:none")),null!=this.dataSource()){for(var l=0,a=i.length;a>l;l++)i[l]&&i[l][this.model.fields.text]&&(t.isNullOrUndefined(i[l][this.model.fields.parentId])||0==i[l][this.model.fields.parentId]||this._loadOnDemandNodes)&&n.appendChild(this._genTemplate(i[l],s));e(n).find(".e-item:first-child:not(:last-child)").addClass("first"),e(n).find(".e-item:last-child").addClass("last")}},_onlineDataSource:function(e,t,i){this._loadOnDemandNodes=!0,this._templateNodeCreation(e,i);var s=this.element.find(".e-item#"+t);null!=s[0]&&(s.append(this._fragment),s.children().find("> div:first").addClass("e-icon e-plus"),this._finalizeLoadOnDemand(s)),this._onlineData=!1},_genTemplate:function(i,s){var n,d,l,a,o,r=document.createDocumentFragment();if(d=document.createElement("li"),r.appendChild(d),n=r.firstChild,n.id=i[s.id]?i[s.id]:this.model.template||this.model.showCheckbox?"":i[s.text],n.setAttribute("role","treeitem"),i[s.htmlAttribute]&&this._setAttributes(i[s.htmlAttribute],n),n.className+=" e-item",this.model.template||i[s.text]){if(a=document.createElement("a"),i[s.imageUrl]?(l=document.createElement("img"),l.className="e-align",l.src=i[s.imageUrl],i[s.imageAttribute]&&this._setAttributes(i[s.imageAttribute],l)):i[s.spriteCssClass]&&(l=document.createElement("span"),l.className=i[s.spriteCssClass]),this.model.template){if(l&&a.appendChild(l),"function"!=typeof e.fn.render)throw"Error : JsRender dependecy script missing";a.innerHTML+=this._renderEjTemplate(this.model.template,i)}else e(a).text(i[s.text]),l&&a.insertBefore(l,a.lastChild);if(i[s.linkAttribute]&&("object"==typeof i[s.linkAttribute]?this._setAttributes(i[s.linkAttribute],a):a.href=i[s.linkAttribute]),n.appendChild(a),i[s.expanded]&&(n.className+=" expanded"),i[s.selected]&&(n.className+=" selected"),t.isNullOrUndefined(i[s.isChecked])||(n.className+=i[s.isChecked]?" checked":" unchecked"),n.setAttribute("aria-selected",!1),n.setAttribute("aria-expanded",!1),this.dataSource()instanceof t.DataManager)if(this._updateElement(n,!0),this.model.showCheckbox&&this._checkboxOnTemplate(n.children[0]),this.model.loadOnDemand)(i[s.hasChild]||i.hasOwnProperty("child"))&&(n.children[0].firstChild.className="e-icon e-plus");else if(!t.isNullOrUndefined(s.child)&&s.child.dataSource instanceof t.DataManager){var h,c,u,m=this;c=s.child.parentId?s.child.parentId:m.model.fields.parentId,u,u=s.id?s.id:this.model.fields.id,h=this._executeDataQuery(s.child,c,i[u]),h.done(function(e){o=e.xhr&&e.xhr.responseJSON.d?e.xhr.responseJSON.d:e.result?e.result:[],o&&o.length>0&&(m._onlineData=!0,m._checkMapperFields(s.child),m._onlineDataSource(o,o[0][s.child.parentId],s.child))})}else t.isNullOrUndefined(this.model.fields.child)&&this._childNodeCreation(i,n,s);else if(this.model.loadOnDemand){if(this._updateElement(n,!0),(i[s.hasChild]||i.hasOwnProperty("child"))&&(n.children[0].firstChild.className="e-icon e-plus"),this.model.showCheckbox&&this._checkboxOnTemplate(n.children[0]),i[s.expanded]&&this._childNodeCreation(i,n,s),this.model.enablePersistence){var f,p;if(f=this._getCookies("_childNodes")){p=JSON.parse(f);for(var _=0,g=p.length;g>_;_++)if(p[_].toString()==i[s.id].toString()){this._childNodeCreation(i,n,s);break}}}}else this._onlineData||(this._updateElement(n,!0),this.model.showCheckbox&&this._checkboxOnTemplate(n.children[0]),this._childNodeCreation(i,n,s));return n}},_childNodeCreation:function(i,s,n){var d,l,a,o;if(d=2==this._templateType?!t.isNullOrUndefined(i.child)&&i.child.length>0&&i.child:this._getChildNodes(this._dataSource,{id:i[n.id]}),!t.isNullOrUndefined(d)&&d.length>0){l=document.createDocumentFragment(),a=document.createElement("ul"),l.appendChild(a),o=l.firstChild,o.className="e-treeview-ul",o.setAttribute("role","group"),e(o).attr("style","display:none");for(var r=0,h=d.length;h>r;r++)d[r]&&d[r][n.text]&&o.appendChild(this._genTemplate(d[r],n));a.childNodes.length>0&&(s.appendChild(a),s.children[0].firstChild.className="e-icon e-plus")}},_checkboxOnTemplate:function(e){""==e.parentElement.id&&(e.parentElement.id=this._id+"_"+this._indexID,this._indexID++);var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("class","nodecheckbox"),t.setAttribute("name",this._id+"_Checkbox_"+e.parentElement.id),t.setAttribute("value",e.parentElement.id),e.insertBefore(t,e.children[1])},_updateElement:function(t,i){var n,d,l,a,o,r,h,c=t.firstChild;c&&(o=c.nodeName,"SPAN"==o||"IMG"==o?(a=c,l=t.lastChild):l=t.lastChild,l&&(h=null!=l.lastChild?l.lastChild.nodeValue:"",r=l.innerHTML,textElement=e(l).clone()[0],e(l).remove(),textElement.className+=" e-text CanSelect",textElement.innerHTML=r,t.innerHTML="",this._on(e(textElement),"mouseenter",this._mouseEnterEvent)._on(e(textElement),"mouseleave",this._mouseLeaveEvent)),n=document.createElement("div"),n.setAttribute("role","presentation"),i&&(d=document.createElement("div"),d.setAttribute("role","presentation"),n.appendChild(d)),a&&n.appendChild(a),n.appendChild(textElement),e(t).prop("name")==s&&e(t).prop("name",h),t.appendChild(n))},_setAttributes:function(t,i){for(var s in t)e(i).attr(s,t[s])},_addDragableClass:function(){this.model.allowDragAndDrop&&(this._anchors=this._liList.map(function(){return e("a",this)[0]}),this._anchors.addClass("e-draggable e-droppable"),this._enableDragDrop(),this._on(this._anchors,"mouseup touchstart pointerdown MSPointerDown",this._focusElement))},_addBaseClass:function(){this._ulList.addClass("e-treeview-ul").attr("role","group"),this._liList.addClass("e-item").attr("role","treeitem"),this.element.is("ul")||this.element.find("ul:first").removeClass("e-treeview-ul").addClass("e-ul")},_controlRender:function(){var i,n=this.element;if(null!=n){i=n.find(".e-item");for(var d=0;d<i.length;d++){var l,a,o,r,h,c,u,m=e(i[d]);r=m.children("ul")[0],r&&e(m.children("ul")[0]).remove(),h=m.children("a")[0],h?(o=e(h).text(),l=e(h).clone(),e(h).remove(),e(l).addClass("e-text CanSelect"),m.html("")):(o=this._getText(m),a=m.clone(),m.html(""),l=t.buildTag("a.e-text CanSelect","","",{alt:""}),l.append(a.children()),l[0].innerHTML+=o),c=t.buildTag("div","",{},{role:"presentation"}),u=t.buildTag("div","",{},{role:"presentation"}),e(u).append(c).append(l),m.prepend(u),r&&m.append(r),m.prop("name")==s&&m.prop("name",o),m.attr("id")==s&&m.attr("id",o),this.model.showCheckbox&&this._checkboxOnTemplate(i[d].children[0])}this.model.showCheckbox&&n.find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange})}var f,p=n.find(".e-item");p.find(">ul").hide(),f=p.find(".e-text"),f.focus(function(){e(this).blur()}),p.filter(".e-item:last-child").addClass("last"),e(p[0]).addClass("first"),e(p[0]).hasClass("first")&&e(p[0]).hasClass("last")&&e(p[0]).removeClass("first"),e(p.filter(":has(ul)")).each(function(){e(this).attr("aria-expanded",!1).attr("aria-selected",!1);var t=e(this).children("ul:first");e(t).is(":hidden")?e(this).find("> div > div:first").removeClass("e-icon e-minus").addClass("e-icon e-plus"):e(this.childNodes[1]).removeClass("e-icon e-plus").addClass("e-icon e-minus")})},_getText:function(t){return e(t).clone().children().remove().end().text()},_expandNodes:function(i){for(var s=i.length,n=[],d=0;s>d&&(n=e(this.model.enableMultipleExpand?this._liList[i[d]]:this._liList[i[s-1]]),this.isExpanded(n)||(!this.model.loadOnDemand||this.dataSource()instanceof t.DataManager?this._expandNode(n):this._createChildNodesWhenExpand(n),this.model.enableMultipleExpand));d++);},_checkedNodes:function(t){for(var i,s=0,n=t.length;n>s;s++)i=e(this._liList[t[s]]),null!=i[0]&&this._nodeCheck(i.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0])},_finalize:function(){this._isRender=!1;var i,s,n,d=this.element,l=this._getCookies("_persistedValues"),a=[],o=0,r=[];if(!(this.model.expandedNodes instanceof Array&&this.model.expandedNodes.length>0))if(i=d.find("li.expanded"),c=i.length,!this.model.enableMultipleExpand&&c>0)this._expandNode(e(i[c-1]));else for(var h=0;c>h;h++)this._expandNode(e(i[h]));if(l&&(s=JSON.parse(l),a=s.expandedNodes,r=[]),a.length>0&&!t.isNullOrUndefined(this.model.fields)&&null!=this.dataSource())for(var h=0,c=a.length;c>h;h++){if(!this.model.enableMultipleExpand&&c>0){r=this.element.find(".e-item#"+a[c-1]),null!=r[0]&&this._expandNode(r);break}r=this.element.find(".e-item#"+a[h]),null!=r[0]&&(!this.model.loadOnDemand||this.dataSource()instanceof t.DataManager?this._expandNode(r):this._createChildNodesWhenExpand(r))}else n=JSON.parse(JSON.stringify(this.model.expandedNodes)),this._expandNodes(n);if(this.model.showCheckbox)if(d.find(".e-item > div .nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),l&&(s=JSON.parse(l),a=s.checkedNodes,r=[]),a.length>0&&!t.isNullOrUndefined(this.model.fields)&&null!=this.dataSource())for(var h=0,c=a.length;c>h;h++)r=this.element.find(".e-item#"+a[h]),null==r[0]||this.dataSource()instanceof t.DataManager||this._nodeCheck(r.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]);else n=JSON.parse(JSON.stringify(this.model.checkedNodes)),this._checkedNodes(n);this.model.checkedNodes instanceof Array&&this.model.checkedNodes.length>0||this.model.showCheckbox&&this._isCheckedAction(),r=[],l&&(o=s.selectedNode),o&&!t.isNullOrUndefined(this.model.fields)&&null!=this.dataSource()&&(r=this.element.find(".e-item#"+o)),null!=r[0]?this._nodeSelectionAction(r):this.model.selectedNode>=0?this._nodeSelectionAction(e(this._liList[this.model.selectedNode])):null!=this.model.selectedNode&&this._isSelectedAction(),this._isRender=!0,this.model.allowEditing&&this._allowEditable(),d.find(".e-item.checked, .e-item.expanded, .e-item.selected").removeClass("checked expanded selected")},_updateSelectedNode:function(){var t=e(this._liList).find(".e-text.e-active").closest(".e-item"),i=[];this.model.selectedNode=null!=t[0]&&t.length>0?e(this._liList).index(t):null,this.model.selectedNode>=0&&(i=e(this._liList[this.model.selectedNode]),null!=i[0]&&(this._isRender=!1,this.selectNode(i),this._isRender=!0)),this._persistValues([this.model.selectedNode],"selectedNode")},_setCookies:function(e,i){window.localStorage?window.localStorage.setItem(this._id+e,i):document.cookie&&t.cookie.set(this._id+e,i)},_getCookies:function(e){return window.localStorage?window.localStorage.getItem(this._id+e):window.cookie?t.cookie.get(this._id+e):void 0},_updateCheckedNodes:function(){var t,i=[];t=this.element.find(".e-item > div > .e-chkbox-wrap > .nodecheckbox.checked").closest(".e-item");for(var s=0;s<t.length;s++)i.push(e(this._liList).index(t[s]));(i.length>0||0==t.length)&&(this.model.checkedNodes=i),0==t.length&&this.model.checkedNodes.push(-1),this._persistValues(this.model.checkedNodes,"checkedNodes")},_updateExpandedNodes:function(){var t,i=[];t=this.element.find(".e-item > div > .e-minus").closest(".e-item").addClass("e-collapse");for(var s=0,n=t.length;n>s;s++)i.push(e(this._liList).index(t[s]));(i.length>0||0==t.length)&&(this.model.expandedNodes=i),0==t.length&&this.model.expandedNodes.push(-1),this._persistValues(this.model.expandedNodes,"expandedNodes")},_isCheckedAction:function(){for(var t,i=this.element.find(".e-item.checked"),t=0;t<i.length;t++)0!=e(i[t]).children("ul").find(".e-item").length&&0!=e(i[t]).find(".e-item.unchecked").length&&this.model.autoCheck||this._nodeCheck(e(i[t]).find("> div > .e-chkbox-wrap > input.nodecheckbox:first")[0]);this.element.find(".e-item.checked, .e-item.unchecked").removeClass("checked unchecked")},_isSelectedAction:function(){var e=this.element.find(".e-item.selected:last");null!=e[0]&&this._nodeSelectionAction(e),this.element.find(".e-item.selected").removeClass("selected")},_checkedChange:function(t){var i=this.element.closest(".e-treeview.e-js").data("ejTreeView");action=t.isChecked?"_nodeCheck":"_nodeUncheck",i[action](e(this.element)[0],t)},_ClickEventHandler:function(i){var s,n=this,d=e(i.target);if(!this._isclicked&&(s=d.closest(".e-item"),!s.hasClass("e-node-disable"))){if(this._isclicked=!0,this._triggerEvent("nodeClick",{event:i,currentElement:d[0]}),!t.isNullOrUndefined(d)&&d.is("DIV")&&(d.hasClass("e-plus")||d.hasClass("e-minus"))){var l,a,o,r=null;if(d.is("SPAN")&&(d=d.parent("div").find("div:first")),r=s.children("ul:first"),o=this.isChildLoaded(s),!o&&this.model.loadOnDemand){if(d.removeClass("e-plus").addClass("e-load"),this._checkboxChecked=d.parent().find(".nodecheckbox").hasClass("checked"),a=this._getNodeDetails(s),l={currentElement:s,targetElement:d[0],id:a.id,value:a.text,parentId:a.parentId,isChildLoaded:o,hasParent:!0,async:!0},this._triggerEvent("beforeExpand",l))return d.removeClass("e-load").addClass("e-plus"),this._isclicked=!1,!1;this._loadOnDemand(l,d[0])}else d.hasClass("e-plus")?this._expandNode(s):this._collpaseNode(s)}!d.is("A")&&!d.hasClass("input-text")&&(d=d.parent()),!t.isNullOrUndefined(d)&&d.is("A")&&d.hasClass("CanSelect")&&!d.hasClass("e-active")&&this._nodeSelectionAction(d.closest(".e-item"))}setTimeout(function(){n._isclicked=!1},300)},_getChildTables:function(e,i,s){return t.isNullOrUndefined(e.child)?void 0:i==s?e.child:this._getChildTables(e.child,i,s+1)},_checkMapperFields:function(e){for(var t in this.model.fields)e[t]||"dataSource"==t||"child"==t||"tableName"==t||"query"==t||(e[t]=this.model.fields[t])},_loadOnDemand:function(e){var i,s,n,d,l=this;if(this.dataSource()instanceof t.DataManager){if(s=e.currentElement.parents("ul").length,n=this._getChildTables(l.model.fields,s,1),t.isNullOrUndefined(n)&&t.isNullOrUndefined(this.model.fields.child)&&(n=this.model.fields),!n)return;this._checkMapperFields(n),d=this._executeDataQuery(n,n.parentId,e.currentElement[0].id),d.done(function(t){i=t.xhr&&t.xhr.responseJSON.d?t.xhr.responseJSON.d:t.result?t.result:[],i.length>0&&(l._onlineData=!0,l._loadChildNodeWhenOnDemand(i,e,n))})}else i=this._getChildNodes(this._dataSource,e),!t.isNullOrUndefined(i)&&i.length>0&&setTimeout(function(){l._createSubNodesWhenLoadOnDemand(i,e.targetElement,l.model.fields)},400)},_loadChildNodeWhenOnDemand:function(e,i,s){var n=this;!t.isNullOrUndefined(e)&&e.length>0&&setTimeout(function(){n._createSubNodesWhenLoadOnDemand(e,i.targetElement,s)},100)},_createSubNodesWhenLoadOnDemand:function(t,i,s){this._loadOnDemandNodes=!0,this._templateNodeCreation(t,s),e(this._fragment.firstChild).attr("style","display:none"),this._fragment.firstChild.className="e-treeview-ul",this._fragment.firstChild.setAttribute("role","group"),i.parentNode.parentNode.appendChild(this._fragment);var n=e(i).closest(".e-item");n.attr({"aria-expanded":!1,"aria-expanded":!0}),e(i).removeClass("e-load").addClass("e-plus"),this._expandNode(n),this._finalizeLoadOnDemand(n)},_finalizeLoadOnDemand:function(e){if(this._beforeBaseClass(),this._isRender=!1,this.model.showCheckbox&&(e.children("ul").find("li > div > input.nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),0==e.children("ul").find(".e-item.unchecked").length&&this._checkboxChecked?e.children("ul").find(".e-item").addClass("checked"):e.children("ul").find(".e-item.unchecked").length==e.children("ul").find(".e-item").length&&this.isNodeChecked(e)&&this._nodeUncheck(e.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]),this._isCheckedAction(),this._updateCheckedNodes()),this._isRender=!0,this._addDragableClass(),this._preventEditable(),this.model.allowEditing&&this._allowEditable(),this._isSelectedAction(),this._updateSelectedNode(),this._updateExpandedNodes(),this.model.loadOnDemand&&this.model.enablePersistence&&!(this.dataSource()instanceof t.DataManager)){var i,s=this._getCookies("_childNodes");s&&(i=JSON.parse(s)),t.isNullOrUndefined(i)||-1!=i.indexOf(e[0].id)?i=[e[0].id]:i.push(e[0].id),this._setCookies("_childNodes",JSON.stringify(i))}},_getChildNodes:function(e,i){var s=[];if(1!=this._templateType){for(var n=0,d=e.length;d>n;n++){if(e[n][this.model.fields.id]==i.id)return e[n].child;if(e[n].hasOwnProperty("child")&&(s=this._getChildNodes(e[n].child,i),!t.isNullOrUndefined(s)&&s.length>0))break}return s}for(var n=0,d=e.length;d>n;n++)if(!t.isNullOrUndefined(e[n][0])&&!t.isNullOrUndefined(e[n][0][this.model.fields.parentId])&&e[n][0][this.model.fields.parentId]==i.id)return e[n]},_getPath:function(e){for(var t,i=e.prop("name"),t=e.parents(".e-item:first");null!=t[0]&&t[0].parentNode.id!=this._id;)i=t.prop("name")+"/"+i,t=t.parents(".e-item:first");return i=this._id+"/"+i},_nodeSelectionAction:function(e){if(null!=e[0]||0!=e.length){var t,i;this._triggerEvent("beforeSelect",{target:e,nodeDetails:this._getNodeDetails(e)})||(this.element.find("li > div > a").removeClass("e-node-focus e-active").closest("li").find("[aria-selected=true]").attr("aria-selected",!1),e.attr("aria-selected",!0).find("> div > .e-text").addClass("e-active").attr("id",this._id+"_active"),this.model.selectedNode=this._liList.index(e[0]),t=this._getNodeDetails(e),i={currentElement:e,value:t.text,id:t.id,parentId:t.parentId},this.model.enablePersistence&&this._persistValues([this.model.selectedNode],"selectedNode"),this._triggerEvent("nodeSelect",i))}},_nodeUnSelectionAction:function(e){e.attr("aria-selected",!1).find("> div > .e-text").removeClass("e-active").attr("id",""),this.model.selectedNode=null},_nodeEnableAction:function(e){var t=this.getParent(e);null!=t[0]&&t.hasClass("e-node-disable")||(this.model.showCheckbox&&e.find("div > .e-chkbox-wrap > .nodecheckbox").ejCheckBox("enable").prop("disabled",!1),e.find(".e-text").removeClass("e-node-disable").closest(".e-item").removeClass("e-node-disable").prop("disabled",!0))},_nodeDisableAction:function(t){this._animating=!1,this._collpaseNode(t),this.model.showCheckbox&&t.find("div > .e-chkbox-wrap > .nodecheckbox").ejCheckBox("disable").prop("disabled",!0),t.find(".e-text").addClass("e-node-disable").removeClass("e-active").attr("id","").closest(".e-item").addClass("e-node-disable").prop("disabled",!0);var i=this._liList[this.model.selectedNode];(e(this._liList).index(t)==this.model.selectedNode||null!=t.find(i)[0])&&(this.model.selectedNode=null)},_getNodeDetails:function(e){if(null!=e[0]&&e.is("LI")&&e.hasClass("e-item")){var t,i,s,n,d,l,a,o,r;return t=e.attr("id"),i=e.children("div").find(".e-text:first").text(),s=e.closest("ul").closest(".e-item").attr("id"),n=e.parents("ul").length,d=e.find(".e-item").length,l=this.isExpanded(e),a=this.isNodeChecked(e),o=this.isSelected(e),r=this.getNodeIndex(e),{id:t,text:i,parentId:s?s:"",level:n,count:d,expanded:l,checked:a,selected:o,index:r}}return{id:"",text:"",parentId:"",level:"",count:"",expanded:"",checked:"",selected:"",index:""}},_denyMultipleExpand:function(t){var i=this.getExpandedNodes(),s=t.parents(".e-item"),n=i.not(s);n=n.not(t);for(var d=0,l=n.length;l>d;d++)this._animating=!1,this._collpaseNode(e(n[d]))},_expandCollapseAction:function(t){if(t&&!this._animating){var i,s,n,d,l,a=this;if(s=t.closest(".e-item"),t.is("SPAN")&&(t=e(t).parent("div").find("div:first")),i=s.children("ul:first"),i.find("> .e-item").length>0)if(this._animating=this.model.enableAnimation?!0:!1,n=this._getNodeDetails(s),l=this.isChildLoaded(s),d={currentElement:s,value:n.text,isChildLoaded:l,id:n.id,parentId:n.parentId,async:!1},!this._isNodeExpanded(s)&&l){if(this._triggerEvent("beforeExpand",d))return!1;s.attr("aria-expanded",!0),i.animate({height:"toggle"},this.model.enableAnimation?350:0,"linear",function(){a._animating=!1,a._triggerEvent("nodeExpand",d),a._addExpandedNodes(a._liList.index(s))}),e(t).removeClass("e-icon e-plus").addClass("e-icon e-minus"),s.addClass("e-collapse")}else{if(s.attr("aria-expanded",!1),this._triggerEvent("beforeCollapse",d)===!0)return!1;i.animate({height:"toggle"},this.model.enableAnimation?200:0,"linear",function(){a._animating=!1,a._triggerEvent("nodeCollapse",d),a._removeExpandedNodes(a._liList.index(d.currentElement))}),e(t).removeClass("e-icon e-minus").addClass("e-icon e-plus"),s.removeClass("e-collapse")}}},_isChecked:function(e){return"true"===e.find("> div > .e-chkbox-wrap:first").attr("aria-checked")?!0:!1},_doRecursiveCheck:function(t,i){var s,n,d,t,l;if(l=t.children[1],s=l?l.querySelectorAll('.e-chkbox-wrap[aria-checked="true"]').length:0,allChkEle=l?l.querySelectorAll(".e-item > div > .e-chkbox-wrap > .nodecheckbox"):[],n=t.firstChild.querySelector(".nodecheckbox"),n&&"INPUT"==n.nodeName.toUpperCase()){var a=e(n).data("ejCheckBox");s==allChkEle.length||this.model.autoCheckParentNode?(a.setModel({enableTriState:!1,checked:!0}),n.className+=" checked",d=t.firstChild.getElementsByTagName("a")[0].innerHTML,i.push({id:t.id,text:d}),this._addHiddenInputElement(n,d),this._addCheckNodes(this._liList.index(t))):a.setModel({enableTriState:!0,checkState:"indeterminate"}),t=t.parentNode.parentNode,"LI"==t.nodeName.toUpperCase()&&this._doRecursiveCheck(t,i)}},_nodeCheck:function(t,i){if(null!=e(t)[0]){this._CurrenctSelectedNodes=[];var s,n,d,l,a,o=[];if(t.className+=" checked",s=e(t).data("ejCheckBox")){if(s.setModel({enableTriState:!1,checked:!0}),n=t.parentNode.parentNode.parentNode,d=n.firstChild.getElementsByTagName("a")[0].lastChild.nodeValue,o.push({id:n.id,text:d}),this._addHiddenInputElement(t,d),this._addCheckNodes(this._liList.index(n)),this.model.autoCheck){var r,h,c;c=n.children[1],r=c?c.querySelectorAll(".e-item > div > .e-chkbox-wrap > .nodecheckbox"):[];for(var u=0,l=r.length;l>u;u++)e(r[u]).ejCheckBox({checked:!0,enableTriState:!1})[0].className+=" checked",h=r[u].parentNode.parentNode.parentNode,
d=h.firstChild.getElementsByTagName("a")[0].lastChild.nodeValue,o.push({id:h.id,text:d}),this._addHiddenInputElement(r[u],d),this._addCheckNodes(this._liList.index(h));a=n.parentNode.parentNode,"LI"==a.nodeName.toUpperCase()&&this._doRecursiveCheck(a,o)}i&&(i.checknode=o),this._onChecked(e(t),i)}this._persistValues(this.model.checkedNodes,"checkedNodes")}},_addHiddenInputElement:function(e,t){if(null==e.firstChild){var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",this._id+"_Checkbox_"+e.value+".Text"),i.setAttribute("value",t);try{e.appendChild(i)}catch(s){}}},_doRecursiveUncheck:function(t,i){var s,n,d,t,l;if(l=t.children[1],s=l?l.querySelectorAll('.e-chkbox-wrap[aria-checked="true"]').length:0,allChkEle=l?l.querySelectorAll(".e-item > div > .e-chkbox-wrap > .nodecheckbox"):[],n=t.firstChild.querySelector(".nodecheckbox"),n&&"INPUT"==n.nodeName.toUpperCase()){var a=e(n).data("ejCheckBox");0>=s&&(a.setModel({enableTriState:!1,checked:!1}),e(n).removeClass("checked").removeClass("checked").children().remove(),d=t.firstChild.getElementsByTagName("a")[0].innerHTML,this._removeCheckNodes(this._liList.index(t)),i.push({id:t.id,text:d})),s>1&&this.model.autoCheckParentNode?(a.setModel({checked:!0}),n.className+=" checked",d=t.firstChild.getElementsByTagName("a")[0].innerHTML,this._addHiddenInputElement(t,d)):s>0&&!this.model.autoCheckParentNode&&(allChkEle.length>1?a.setModel({enableTriState:!0,checkState:"indeterminate"}):a.setModel({checked:!1}),e(n).removeClass("checked").removeClass("checked").children().remove(),this._removeCheckNodes(this._liList.index(t))),t=t.parentNode.parentNode,"LI"==t.nodeName.toUpperCase()&&this._doRecursiveUncheck(t,i)}},_nodeUncheck:function(t,i){if(null!=e(t)[0]){var s=[];if(currentLi=t.parentNode.parentNode.parentNode,e(currentLi).find("div > .e-chkbox-wrap > .nodecheckbox").removeClass("checked").children().remove(),chkObj=e(t).data("ejCheckBox"),this._removeCheckNodes(this._liList.index(currentLi)),chkObj){if(chkObj.setModel({enableTriState:!1,checked:!1}),textvalue=currentLi.firstChild.getElementsByTagName("a")[0].lastChild.nodeValue,s.push({id:currentLi.id,text:textvalue}),this.model.autoCheck){childUl=currentLi.children[1],allChkEle=childUl?childUl.querySelectorAll(".e-item > div > .e-chkbox-wrap > .nodecheckbox"):[];for(var n=0,d=allChkEle.length;d>n;n++)e(allChkEle[n]).ejCheckBox({enableTriState:!1,checked:!1}),liElement=allChkEle[n].parentNode.parentNode.parentNode,textvalue=liElement.firstChild.getElementsByTagName("a")[0].lastChild.nodeValue,s.push({id:liElement.id,text:textvalue}),this._removeCheckNodes(this._liList.index(liElement));parentLi=currentLi.parentNode.parentNode,"LI"==parentLi.nodeName.toUpperCase()&&this._doRecursiveUncheck(parentLi,s)}i&&(i.unchecknode=s),this._onUnChecked(e(t),i)}this._persistValues(this.model.checkedNodes,"checkedNodes")}},_executeDataQuery:function(i,s,n){var d,l;if(d=t.Query(),d=this._columnToSelect(i),!t.isNullOrUndefined(s)&&""!=s){var a=e.extend(!0,[],d._params);d._params=[],d.addParams(s,n);for(var o=0;o<a.length;o++)a[o].key!=s&&d.addParams(a[o].key,a[o].value);d.where(s,t.FilterOperators.equal,n)}return l=i.dataSource.executeQuery(d)},_createChildNodesWhenExpand:function(e){var i,s,n,d;if(e.length>0&&0==e.find("ul .e-item").length){i=e.attr("id"),s=e.children("div").find(".e-text:first").text(),d=e.children("div").find("div.e-plus:first"),n={currentElement:e,targetElement:d[0],id:i,value:s,isChildLoaded:!1,hasParent:!0,async:!1};var l,a,o,r,h=this;if(this._triggerEvent("beforeExpand",n))return!1;if(this.dataSource()instanceof t.DataManager){if(a=n.currentElement.parents("ul").length,o=this._getChildTables(this.model.fields,a,1),t.isNullOrUndefined(o)&&t.isNullOrUndefined(this.model.fields.child)&&(o=this.model.fields),!o)return;this._checkMapperFields(o),r=this._executeDataQuery(o,o.parentId,n.currentElement[0].id),r.done(function(i){l=i.xhr&&i.xhr.responseJSON.d?i.xhr.responseJSON.d:i.result?i.result:[],!t.isNullOrUndefined(l)&&l.length>0&&(h._checkboxChecked=e.find("> div > .e-chkbox-wrap > .nodecheckbox").hasClass("checked"),h._loadOnDemandNodes=!0,0==e.find("ul .e-item").length&&(h._templateNodeCreation(l,o),e.append(h._fragment)),h._finalizeLoadOnDemand(e),h._expandNode(e))})}else{var l=this._getChildNodes(this._dataSource,{id:e[0].id});!t.isNullOrUndefined(l)&&l.length>0&&(this._checkboxChecked=e.find("> div > .e-chkbox-wrap > .nodecheckbox").hasClass("checked"),this._loadOnDemandNodes=!0,this._templateNodeCreation(l,this.model.fields),e.append(this._fragment),this._finalizeLoadOnDemand(e),this._expandNode(e))}}else this._expandNode(e)},_expandNode:function(e){if(null!=e[0]&&e.length>0){var t=e.find("> div > div:first");if(this.model.loadOnDemand&&!this.model.enablePersistence)e.find("> ul > .e-item").length>0&&t.hasClass("e-plus")?(this.model.enableMultipleExpand||this._denyMultipleExpand(e),this._animating=!1,this._expandCollapseAction(e.find("> div > div.e-plus:first"))):t.hasClass("e-icon")&&!t.hasClass("e-minus")&&this._allowOnDemand&&this._createChildNodesWhenExpand(e);else if(t.hasClass("e-plus")){var i=e.find("> ul > .e-item").length>0?!0:!1;i&&(this.model.enableMultipleExpand||this._denyMultipleExpand(e),this._animating=!1,this._expandCollapseAction(t))}}return!0},_collpaseNode:function(e){if(null!=e[0]&&e.length>0&&e.find("> ul > .e-item").length>0){var t=e.find("> div > div:first");t.hasClass("e-minus")&&this._expandCollapseAction(t)}},_expandAll:function(){var t,i,s=this.element;if(this.model.loadOnDemand)for(i=e(s).find(".e-item"),t=0,len=i.length;t<len;t++)this._createChildNodesWhenExpand(e(i[t]));else if(cnodes=s.find(".e-item > div > .e-plus").closest(".e-item"),s.find("ul:hidden").length==cnodes.length)for(t=0,len=cnodes.length;t<len;t++)this._expandNode(e(cnodes[t]))},_collapseAll:function(){var t,i,s=this.element;if(i=s.find(".e-item > ul:not(:hidden)").closest(".e-item"),enodes=i.find("> div > .e-minus").closest(".e-item"),enodes.length>0)for(t=0,len=enodes.length;t<len;t++)this._animating=!1,this._collpaseNode(e(enodes[t]))},_checkAll:function(){this._CurrenctSelectedNodes=[];var t,s=this.element;for(t=s.find(".e-item > div > .e-chkbox-wrap > .nodecheckbox"),t.addClass("checked"),i=0,len=t.length;i<len;i++)e(t[i]).ejCheckBox("setModel",{checked:!0}),this._addHiddenInputElement(t[i],e(t[i]).parent().siblings(".e-text")[0].lastChild.nodeValue);this.model.checkedNodes=this.getCheckedNodesIndex()},_uncheckAll:function(){var t,s=this.element;for(t=s.find(".e-item > div > .e-chkbox-wrap > .nodecheckbox"),t.removeClass("checked").children().remove(),i=0,len=t.length;i<len;i++)e(t[i]).ejCheckBox("setModel",{checked:!1});this.model.checkedNodes=[],this.model.checkedNodes.push(-1)},_isNodeExpanded:function(e){return null!=e[0]?e.children("ul:first").length>0&&e.find("> div > div.e-minus").length>0:void 0},_showCheckBox:function(){var e,t,i=this.element;e=i.find("li");for(var t=0;t<e.length;t++)this._checkboxOnTemplate(e[t].children[0]);i.find(".e-item > div > .nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),i.find(".e-item.e-node-disable > div > .e-chkbox-wrap > .nodecheckbox").ejCheckBox("disable")},_drag:function(){var i,s,n=!1,d=t.browserInfo(),l=null,a=null,o=null;s="msie"==d.name&&"8.0"==d.version?!0:!1,this.element.is("ul")?(this._treeView=this.element.parent(),this.model.allowDragAndDropAcrossControl||(o=this.element.parent())):(this._treeView=this.element,this.model.allowDragAndDropAcrossControl||(o=this.element)),e(this._treeView).find("ul li div a").not(".e-js").ejDraggable({dragArea:o,clone:!0,dragStart:function(n){if(!i||t.isNullOrUndefined(n.target)||e(n.target).hasClass("e-node-disable")||0!=i.element.find(".e-item > div > .e-text.e-editable").length)return!1;if(e(n.target).is("A")&&!e(n.target).hasClass("e-draggable"))return!1;s&&(document.ondragstart=function(){return!1});var d={target:e(n.target).closest(".e-item"),targetElementData:i._getNodeDetails(e(n.target).closest(".e-item")),dragTarget:n.target,parentElement:e(n.target).closest("ul").closest(".e-item"),parentElementData:i._getNodeDetails(e(n.target).closest("ul").closest(".e-item")),event:n.event};return i._triggerEvent("nodeDragStart",d)?(n.cancel=!0,l&&l.remove(),!1):void 0},drag:function(s){n=!1,e(".e-sibling").remove();var d,a=s.target,o=i._findTarget(e(a));if(e(l).css({"margin-left":"20px","margin-top":s.event.clientY-20<0?"0px":"-20px"}),d={draggedElement:e(s.element).closest(".e-item"),draggedElementData:i._getNodeDetails(e(s.element).closest(".e-item")),dragTarget:a,target:o,targetElementData:i._getNodeDetails(o),event:s.event},(e(a).hasClass("e-droppable")||e(a).parent().hasClass("e-droppable"))&&e(a).hasClass("e-dropchild")&&!e(a).hasClass("e-node-disable")?(document.body.style.cursor="",e(l).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-plus"),e(a).addClass("allowDrop")):e(a).hasClass("e-droppable")&&!e(a).hasClass("e-item")&&!e(a).hasClass("e-text")||e(a).is("UL")&&e(a).hasClass("e-ul")&&0==e(a).find(".e-item").length&&e(a).parent(".e-treeview-wrap").length>0?(document.body.style.cursor="",e(l).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-plus")):(e(a).hasClass("e-sibling")||e(a).find("a").hasClass("e-text"))&&(e(a).hasClass("e-sibling")||e(a).parent().parent().hasClass("e-item")||e(a).parent().hasClass("e-item")||e(a).hasClass("e-item")||e(a).hasClass("e-text"))||(document.body.style.cursor="not-allowed",e(l).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-minus"),e(a).removeClass("showline-hover"),e(a).removeClass("noline-hover")),"A"!=a.nodeName)if("UL"==a.nodeName&&null!=e(a).children()[0]&&(a=e(a).children()[0],n=!0),"LI"!=a.nodeName&&(a=e(a).closest(".e-droppable")[0]||e(a).parent()),"LI"==a.nodeName&&e(a).hasClass("e-droppable")&&e(a).hasClass("e-dropsibling")){var r,h=t.buildTag("div.e-sibling");r=e(a).offset().top+e(a).find("a").height()||-1,n=s.event.pageY>r?!1:!0,n?h.insertBefore(e(a).find("> div > a").parent()):h.insertAfter(e(a).find("> div > a").parent()),e(a).parents().hasClass("e-rtl")?(document.body.style.cursor="",e(l).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-insertInbetween-rtl")):(document.body.style.cursor="",e(l).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-insertInbetween"))}else"A"==a.nodeName&&e(a)&&e(a).hasClass("e-droppable")&&e(a).hasClass("e-dropchild")?(document.body.style.cursor="",e(l).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-plus"),e(a).addClass("allowDrop")):!e(a).hasClass("e-droppable")||e(a).hasClass("e-item")||e(a).hasClass("e-text")||(document.body.style.cursor="",e(l).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-plus"));else e(".e-sibling").remove();return i._triggerEvent("nodeDrag",d)?!1:void 0},dragStop:function(t){s&&(document.ondragstart=function(){return!0}),t.element.dropped||(l&&l.remove(),document.body.style.cursor="");var d,a,o=t.target;return"e-sibling"==o.className&&(o=e(o).closest(".e-item")[0]),e(".e-sibling").remove(),e(o).hasClass("e-node-disable")?!1:(d=n?"Before":"After",trgtEle=i._findTarget(e(o)),d="A"==o.nodeName?"Over":d,a={draggedElementData:i._getNodeDetails(e(t.element).closest(".e-item")),draggedElement:e(t.element).closest(".e-item"),dropTarget:e(o),target:trgtEle,targetElementData:i._getNodeDetails(trgtEle),position:d,event:t.event},i._triggerEvent("nodeDragStop",a)?!1:(i._isRender=!1,"A"==o.nodeName&&e(o).hasClass("e-dropchild")&&e(o).hasClass("e-droppable")||"UL"==o.nodeName&&0==e(o).children().length?(d="Over",e(o).is("UL")&&e(o).hasClass("e-ul")&&0==e(o).find(".e-item").length&&e(o).parent(".e-treeview-wrap").length>0?i._dropAsChildNode(e(o),e(t.element),t.event):0!=e(t.element).parent().parent().has(e(o)).length||0!=e(o).parent().parent().has(e(t.element)).length&&!i._isDescendant(e(o).parents("li:last").find(">ul>li"),e(t.element).parents("li:first")[0])||i._dropAsChildNode(e(o).closest(".e-item"),e(t.element),t.event)):("UL"==o.nodeName&&(o=e(o).children()[0]),"LI"!=o.nodeName&&(o=e(o).closest(".e-droppable")[0]||e(o).parent()),"LI"==o.nodeName&&e(o).hasClass("e-dropsibling")&&e(o).hasClass("e-droppable")?e(t.element).parent().parent().has(e(o)).length<1&&i._dropAsSublingNode(e(o),e(t.element),n,t.event):"A"==o.nodeName&&e(o).hasClass("e-dropchild")&&e(o).hasClass("e-droppable")&&(d="Over",0!=e(t.element).parent().parent().has(e(o)).length||0!=e(o).parent().parent().has(e(t.element)).length&&!i._isDescendant(e(o).parents("li:last").find(">ul>li"),e(t.element).parents("li:first")[0])||i._dropAsChildNode(e(o).closest(".e-item"),e(t.element),t.event))),i._isRender=!0,e(".allowDrop").removeClass("allowDrop"),e(o).hasClass("e-dropchild")||l&&l.remove(),trgtEle=i._findTarget(e(o)),a={droppedElementData:i._getNodeDetails(e(t.element).closest(".e-item")),droppedElement:e(t.element).closest(".e-item"),dropTarget:e(o),target:trgtEle,targetElementData:i._getNodeDetails(trgtEle),position:d,event:t.event},i._triggerEvent("nodeDropped",a)?!1:void(document.body.style.cursor="")))},helper:function(s,n){return!t.isNullOrUndefined(s.element)&&!e(s.element).hasClass("e-node-disable")&&e(s.element).hasClass("e-draggable")&&(i=e(s.element).closest(".e-treeview.e-js").data("ejTreeView"))?(l=t.buildTag("div.e-dragedNode"),l.addClass(i.model.cssClass),a=e(s.element).clone().addClass("dragClone"),this.spanEle=t.buildTag("span.e-icon e-plus e-dropedStatus"),l.append(this.spanEle),l.append(a),l.appendTo(e("body"))):void 0}})},_findTarget:function(e){return e.hasClass("e-text")?e.closest(".e-item"):e.closest("ul").closest(".e-item").length>0?e.closest("ul").closest(".e-item"):this.element.find(e).length>0?e.parents("ul").first():e},_isDescendant:function(t,i){var s=!0;return e(t).each(function(e,t){return t==i?(s=!1,!1):void(s=!0)}),s},_childDrop:function(){e(this._treeView).find("ul .e-item div .e-text").ejDroppable({accept:e(this._treeView).find("ul .e-item div .e-text").addClass("e-dropchild"),drop:function(t,i){e(i.helper).hide()}})},_siblingDrop:function(){e(this._treeView).find("ul .e-item").addClass("e-dropsibling").ejDroppable({drop:function(t,i){e(i.helper).hide()}})},_dropAsSublingNode:function(i,s,n,d){var l,a=s.parent().parent(),a=e(a);l=e(s.parents(".e-item")[1]),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||this._updateDataSource(s.parents(".e-item:first"),e(i),n),n?a.insertBefore(i):a.insertAfter(i),!this.model.template&&this._autoGenerateNodes(s.parents(".e-item:first")),this._modifyCss(l),this._finalizeEditing(a),this._updateCheckState(a),this._updateCheckState(l),a.find("> div > .e-minus").length>0&&!this.model.enableMultipleExpand&&this._denyMultipleExpand(a),this._updateChanges(e(i))},_dropAsChildNode:function(i,s,n){var d,l=s.parent().parent(),l=e(l);d=e(s.parents(".e-item")[1]),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||this._updateDataSource(s.parents(".e-item:first"),e(i),""),e(i).is("UL")?e(i).append(l):this._appendNode(i,l),!this.model.template&&this._autoGenerateNodes(s.parents(".e-item:first")),this._modifyCss(d),this._finalizeEditing(l),this._updateCheckState(l),this._updateCheckState(d),i.find("> div > .e-icon.e-plus:first").length>0&&this._expandNode(i),this._updateChanges(e(i))},_updateChanges:function(t){if(null!=e(t)[0]){var i=this,s=0;do i._updateNodes(),s++,i=t.closest(".e-treeview.e-js").data("ejTreeView");while(i&&this._id!=i._id&&1==s)}},_orderDataSource:function(){this._beforeBaseClass();for(var i=[],s=this._newDataSource,n=0,d=this._liList.length;d>n;n++)for(var l=0,a=s.length;a>l;l++)if(!t.isNullOrUndefined(s[l])&&!t.isNullOrUndefined(s[l][this.model.fields.id])&&s[l][this.model.fields.id].toString()==e(this._liList[n]).attr("id")){0==e(this._liList[n]).find("> ul .e-item").length?delete s[l][this.model.fields.hasChild]:1==this._templateType&&(s[l][this.model.fields.hasChild]=!0),i.push(s[l]);break}return i},_updateDataSource:function(i,s,n){if(null!=e(i)[0]&&null!=e(s)[0]){var d,l,a,o=i.closest(".e-treeview.e-js").data("ejTreeView");if(d=s.closest(".e-treeview.e-js").data("ejTreeView"),o&&d&&!t.isNullOrUndefined(d.model.fields)&&null!=d.dataSource()&&!(d.dataSource()instanceof t.DataManager)){if(s.is("A")){l=s.closest(".e-item").attr("id");var r=s.closest(".e-item").find("> ul > .e-item");a=r.length>0?r.length:s.closest(".e-item").index()}else{l=s.parents(".e-item:first").attr("id");var h=s.next(".e-item"),c=s.prev(".e-item");a=h.length>0?a=c.length>0?h.index()-1:n?s.index():h.index():n?s.index():s.index()+1}d&&o._findAndUpdate(i.attr("id"),l,o._newDataSource,a,d)}}},_removeObject:function(e,i,s){for(var n=0,d=e.length;d>n;n++)if(!t.isNullOrUndefined(e[n])&&!t.isNullOrUndefined(e[n][s])&&e[n][s].toString()==i){e.splice(n,1);break}},_convertDataSourceTypes:function(e,t){for(var i=0;i<e.child.length;i++)e.child[i][this.model.fields.parentId]=e[this.model.fields.id],t.push(e.child[i]),e.child[i].hasOwnProperty("child")&&e.child[i].child.length>0&&this._convertDataSourceTypes(e.child[i],t);return e.child&&(delete e.child,e[this.model.fields.hasChild]=!0),t},_childObjectCollection:function(e,t,i){for(var s=0,n=e.length;n>s;s++){var d=this._getChildNodes(t,{id:e[s][this.model.fields.id]});d&&(i=i.concat(d),i=this._childObjectCollection(d,t,i))}return i},_findAndUpdate:function(e,i,s,n,d){if(1==this._templateType){for(var l=0,a=s.length;a>l;l++)if(!t.isNullOrUndefined(s[l])&&!t.isNullOrUndefined(s[l][this.model.fields.id])&&s[l][this.model.fields.id].toString()==e){if(this._id==d._id)t.isNullOrUndefined(i)?delete s[l][this.model.fields.parentId]:s[l][this.model.fields.parentId]=i;else{var o,r,h,c=this,u=[];if(h=this._groupingObjects(s,function(e){return[!t.isNullOrUndefined(e)&&[e[c.model.fields.parentId]].toString()]}),o=s.splice(l,1),r=this._getChildNodes(h,{id:e}),r&&r.length>0&&(r=this._childObjectCollection(r,h,r)),2==d._templateType){if(r&&r.length>0){for(var m=0,f=r.length;f>m;m++)this._removeObject(s,e,this.model.fields.parentId),delete r[m][d.model.fields.parentId],delete r[m][d.model.fields.hasChild];o[0].hasOwnProperty("child")||(o[0].child=[]),o[0].child=r}delete o[0][d.model.fields.parentId],delete o[0][d.model.fields.hasChild],i?this._changeObjectPos(i,o,d._newDataSource,n):d._newDataSource.splice(n,0,o[0])}else{if(r&&r.length>0)for(var m=0,f=r.length;f>m;m++)this._removeObject(s,e,this.model.fields.parentId);i?o[0][d.model.fields.parentId]=i:delete o[0][d.model.fields.parentId],d._newDataSource.push(o[0]),r&&r.length>0&&(d._newDataSource=d._newDataSource.concat(r))}}break}}else for(var l=0,a=s.length;a>l;l++){if(s[l][this.model.fields.id].toString()==e){var o=s.splice(l,1);if(this._id==d._id)i?this._changeObjectPos(i,o,this._newDataSource,n):this._newDataSource.splice(n,0,o[0]);else if(1==d._templateType){var u=[];o[0].hasOwnProperty("child")?(d._convertDataSourceTypes(o[0],u),o[0]=o.concat(u)):o[0]=o.concat(),i?o[0][0][d.model.fields.parentId]=i:delete o[0][0][d.model.fields.parentId],d._newDataSource=d._newDataSource.concat(o[0])}else i?this._changeObjectPos(i,o,d._newDataSource,n):d._newDataSource.splice(n,0,o[0]);return!0}if(s[l].hasOwnProperty("child")&&this._findAndUpdate(e,i,s[l].child,n,d))break}},_changeObjectPos:function(e,t,i,s){for(var n=0,d=i.length;d>n;n++){if(i[n][this.model.fields.id].toString()==e)return i[n].hasOwnProperty("child")?i[n].child.splice(s,0,t[0]):(i[n].child=[],i[n].child.push(t[0])),!0;if(i[n].hasOwnProperty("child")&&this._changeObjectPos(e,t,i[n].child,s))break}},_finalizeEditing:function(t){if(null!=e(t)[0]){var i=t.closest(".e-treeview.e-js").data("ejTreeView");i&&(i._preventEditable(),i.model.allowEditing&&i._allowEditable())}},_updateCheckState:function(e){if(this._isTreeElement(e)){var t,i=e.closest(".e-treeview.e-js").data("ejTreeView");if(i&&i.model.showCheckbox)if(t=e.children("ul").find(".e-item > div > .e-chkbox-wrap > .checked").closest(".e-item").addClass("checked"),t.length>0)i._isCheckedAction();else{var s=i.isNodeChecked(e)?"_nodeCheck":"_nodeUncheck";i[s](e.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0])}}},_autoGenerateNodes:function(t){if(null!=e(t)[0]){var i=t.closest(".e-treeview.e-js").data("ejTreeView");if(i&&i.model.showCheckbox){if(0==t.find(".e-chkbox-wrap").length){this._checkboxOnTemplate(t[0].children[0]);for(var s=t.find(".e-item"),n=0,d=s.length;d>n;n++)this._checkboxOnTemplate(s[n].children[0]);t.find(".nodecheckbox").ejCheckBox({cssClass:i.model.cssClass,change:i._checkedChange})}}else t.find(".e-chkbox-wrap").remove()}},_appendNode:function(i,s){if(this._isTreeElement(i)){var n,d,l,a,o;null==i.find("ul")[0]?(n=i.closest(".e-treeview.e-js").data("ejTreeView"),n&&(o=this._isNodeExpanded(i),o||!n.model.loadOnDemand||this.dataSource()instanceof t.DataManager||!i.find("> div > div").first().hasClass("e-plus")||n._createChildNodesWhenExpand(i)),d=t.buildTag("ul.e-treeview-ul","",{},{role:"group",style:"display:none"}),e(d).append(e(s)),0==e(i.find("div")[1]).length?(l=document.createElement("div"),l.setAttribute("role","presentation"),l.className="e-icon e-minus",e(i.find("div")).append(e(l))):e(i.find("div")[1]).hasClass("e-minus")||e(i.find("div")[1]).addClass("e-icon e-plus"),n&&n.model.loadOnDemand&&!(this.dataSource()instanceof t.DataManager)&&i.find("ul").length>0?i.children("ul").append(e(s)):i.append(e(d))):e(i.find("ul")[0]).append(s),!this.isDisabled(i)&&this._expandNode(i)}else this.element.is("UL")?this.element.append(s):this.element.children("ul:first").length>0?this.element.children("ul:first").append(s):(d=t.buildTag("ul.e-treeview-ul","",{},{role:"group"}),d.append(s),this.element.append(d));a=this.element.find(".e-item.expanded");for(var r=0;r<a.length;r++)!this.model.loadOnDemand||this.dataSource()instanceof t.DataManager?this._expandNode(e(a[r])):this._createChildNodesWhenExpand(e(a[r]));a.removeClass("expanded"),this.model.showCheckbox&&this._isCheckedAction()},_modifyCss:function(t){t=e(t),null!=t[0]&&0==t.find(".e-item").length&&t.removeClass("e-collapse").attr("aria-expanded",!1).find("> div > .e-icon").removeClass("e-icon e-minus").closest(".e-item").find("ul").remove()},_applyFirstLastChildClass:function(){e(this._liList).removeClass("first last").filter(":first-child:not(:last-child)").addClass("first"),e(this._liList).filter(":last-child").addClass("last")},_expandEventHandler:function(t){var i,s,n=e(t.target);n.hasClass("e-icon")||"dblclick"===t.type&&this.model.allowEditing||(t.preventDefault(),i=e(n.is("A")?n.siblings("div"):n.parent().siblings("div")),s=n.closest(".e-item"),i.hasClass("e-minus")?this._collpaseNode(s):this.model.loadOnDemand&&0==i.find(".e-item").length?(this._isclicked=!1,this._ClickEventHandler({target:i[0]})):this._expandNode(s))},_inlineEdit:function(t){t.preventDefault();var i=e(t.target);return i.hasClass("input-text")||i.hasClass("e-node-disable")||!i.closest(".e-item").hasClass("AllowEdit")||(i.is("A")||(i=i.closest(".e-text")),i.is("A")&&!i.hasClass("e-node-disable")&&i.closest(".e-item").hasClass("AllowEdit")&&(this.unselectNode(i.closest(".e-item")),this._inlineEditAction(i))),!1},_inlineEditAction:function(e){var t=this.element.find(".e-item > div > .e-text > #Edit_Input");null==t[0]&&this._createEditTextBox(e)},_createEditTextBox:function(i){var s={currentElement:i};if(this._triggerEvent("beforeEdit",s))return!1;var n=this.element.find(".e-item > div > .e-text > #Edit_Input");if(null==n[0]){var d,l=t.buildTag("Input.input-text#Edit_Input","","",{type:"text",value:e.trim(i.text()).replace(/\n\s+/g," "),name:"inplace_value"});l.width(i.outerWidth()+5),l.height(i.outerHeight()-2),this._beforeEditText=i.text(),i[0].lastChild.nodeValue="",i.addClass("e-editable").append(l),n=l,d=""==n.val().length?3:i.outerWidth()+20,this._mousePositionAtEnd(n),this._currentEditableNode=i,this._on(n,"keypress",this._editTextBoxKeyPress)._on(n,"keydown",this,this._pressEscKey)._on(n,"mousedown",this,this._preventPropagation)._on(n,"blur",this._focusout)}return n},_preventPropagation:function(e){e.stopImmediatePropagation(),this._off(this._anchors,"mouseup touchstart pointerdown",this._focusElement)},_editTextBoxKeyPress:function(e){e.target.size=e.target.value.length+1},_mousePositionAtEnd:function(e){return e.focus&&e.focus(),e.select&&e.select(),!0},_focusElement:function(t){if(t&&("touchstart"==t.type||"pointerdown"==t.type)){console.log(t.type);var i=e(t.currentTarget);i.hasClass("e-text")&&this.selectNode(i.closest(".e-item"))}this.element.focus()},_focusout:function(t){var i,s,n=e(t.currentTarget);0==this.getSelectedNode().length&&(s=n.closest(".e-item"),this._isRender=!1,this._nodeSelectionAction(s),this._isRender=!0),i={id:n.closest(".e-item").attr("id"),oldText:this._beforeEditText,newText:n.val()},this._triggerEvent("inlineEditValidation",i)?this._cancelAction(n):this._saveAction(n,t)},_pressEscKey:function(i){i.cancelBubble=!0,i.returnValue=!1;var s=e(i.currentTarget);if(null!=s[0]&&(13==i.keyCode&&(i.stopPropagation(),this._focusout(i)),27==i.keyCode&&this._cancelAction(s),13==i.keyCode||27==i.keyCode)){var n,d=t.browserInfo();n="msie"==d.name&&"8.0"==d.version?!0:!1,n&&this.element.focus()}},_onFocusHandler:function(e){e.preventDefault(),this.model.allowKeyboardNavigation&&this._isFocus&&(0==this.getSelectedNode().length&&(this._isRender=!1,this.selectNode(this.element.find(".e-item:first")),this._isRender=!0,this._updateSelectedNode()),this._isFocus=!1)},_onKeyDown:function(e,t){e.find("> div > .e-text:first").removeClass("e-node-focus"),t.find("> div > .e-text:first").addClass("e-node-focus")},_KeyPress:function(t){var i,s,n=this;if(this._isFocus=!0,s=this.element.is("ul")?this.element:this.element.find("> ul"),i=t.keyCode?t.keyCode:t.which?t.which:t.charCode,n.model.allowKeyboardNavigation&&n.element.find("#Edit_Input").length<1){var d,l,a;if(d=s.find(".e-item > div > .e-text.e-active").closest(".e-item"),l=s.find(".e-item:visible:not(.hidden, .e-node-disable)"),n._focusedNode?(a=n._focusedNode,n._focusedNode=null):a=e(l).find(".e-text.e-node-focus").closest(".e-item"),113==i){t.preventDefault(),this._isFocus=!1;var s=a.length>0?a:d;s.length>0&&n.model.allowEditing&&(t.target=s.find("> div > .e-text:first"),n._inlineEdit(t))}if(40!=i||t.ctrlKey||t.altKey||t.shiftKey)if(38!=i||t.ctrlKey||t.altKey||t.shiftKey)if(39==i&&!this.model.enableRTL&&!t.ctrlKey&&!t.altKey&&!t.shiftKey||37==i&&this.model.enableRTL){t.preventDefault();var o,r;if(r=a.length>0?a.find("> div > div").first():d.find("> div > div").first(),o=r.closest(".e-item"),r.hasClass("e-plus"))this.model.loadOnDemand&&0==o.find("> ul .e-item").length?this._ClickEventHandler({target:r[0]}):this._expandNode(e(l[l.index(o)]));else{if(o=e(l[l.index(o)+1]),n._KeyPressEventHandler(o.length>0?o:"",n,i,t))return;(o.length>0&&o[0]==r.closest(".e-item").find("ul > .e-item:first")[0]||o.find("ul > .e-item").first().hasClass("e-node-disable"))&&n._onKeyDown(a,o)}}else if(37==i&&!this.model.enableRTL&&!t.ctrlKey&&!t.altKey&&!t.shiftKey||39==i&&this.model.enableRTL){t.preventDefault();var h,c;if(c=a.length>0?a.find("> div > div").first():d.find("> div > div").first(),h=c.closest(".e-item"),c.hasClass("e-minus"))this._collpaseNode(e(l[l.index(c.closest(".e-item"))]));else{if(h=e(l[l.index(h)]).closest("ul").closest(".e-item"),n._KeyPressEventHandler(h.length>0?h:"",n,i,t))return;h.length>0&&n._onKeyDown(a,h)}}else if(36!=i||t.ctrlKey||t.altKey||t.shiftKey)if(35!=i||t.ctrlKey||t.altKey||t.shiftKey){if(13==i){t.preventDefault();var u=a.length>0?a:d;u.find("> div > .e-text").removeClass("e-node-focus"),this._nodeSelectionAction(u)}else if(32==i){t.preventDefault();var u=a.length>0?a:d;if(u.length>0&&this.model.showCheckbox){var m=u.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0];m.checked?this._nodeUncheck(m):this._nodeCheck(m)}}else if(46==i){t.preventDefault();var u=a.length>0?a:d;u.length>0&&this._removeNode(u,t)}else if(t&&1==t.ctrlKey)if(88==i&&this.model.allowDragAndDrop&&this.model.allowDropChild){t.preventDefault();var u=a.length>0?a:d;if(u.length>0){var f=u.parents(".e-item:first");if(this._cutNode=e(l[l.index(u)]).detach(),null!=e(this._cutNode)[0]){if(this._triggerEvent("beforeCut",{target:u,nodeDetails:this._getNodeDetails(u),keyCode:i,event:t}))return;this._isRender=!1,this.unselectNode(u),0==f.find("> ul > .e-item").length&&(this.collapseNode(f),this._modifyCss(f)),this._isRender=!0,this._triggerEvent("nodeCut",{parentElement:f,parentDetails:this._getNodeDetails(f),keyCode:i,event:t})}}}else if(86==i&&null!=this._cutNode&&this.model.allowDragAndDrop&&this.model.allowDropChild){t.preventDefault();var u=a.length>0?a:d;u=e(l[l.index(u)]),0===u.length&&(u=this.element);var s=this._cutNode.find(" > div > .e-text").first();if(e(l).length>0){if(this._triggerEvent("beforePaste",{target:u,nodeDetails:this._getNodeDetails(u),keyCode:i,event:t}))return;this._isRender=!1,this._dropAsChildNode(u,s,t),this._isRender=!0,this._cutNode=null;var p=s.closest(".e-item");this._triggerEvent("nodePaste",{target:p,nodeDetails:this._getNodeDetails(p),keyCode:i,event:t})}}}else{t.preventDefault();var _,g=a.length>0?a:d;if(_=e(l).last(),d.length>0&&0==a.length&&d[0]!=_[0]||a.length>0&&a[0]!=_[0]){if(n._KeyPressEventHandler(_,n,i,t))return;n._onKeyDown(g,_)}}else{t.preventDefault();var v,g=a.length>0?a:d;if(v=e(l).first(),d.length>0&&0==a.length&&d[0]!=v[0]||a.length>0&&a[0]!=v[0]){if(n._KeyPressEventHandler(v,n,i,t))return;n._onKeyDown(g,v)}}else{t.preventDefault();var h=e(a.length>0?l[l.index(a)-1]:l[l.index(d)-1]);if(n._KeyPressEventHandler(h.length>0?h:null,n,i,t))return;h.length>0&&n._onKeyDown(a,h)}else{t.preventDefault();var o=e(a.length>0?l[l.index(a)+1]:l[l.index(d)+1]);if(n._KeyPressEventHandler(o.length>0?o:null,n,i,t))return;o.length>0&&n._onKeyDown(a,o)}}},_removeChildNodes:function(e,i,s){for(var n,d=0,l=0;l<i.length;l++)if(!t.isNullOrUndefined(i[l][0][this.model.fields.parentId])&&i[l][0][this.model.fields.parentId].toString()==s){d=i[l].length;break}for(var l=0;d>l;l++)for(var a=0;a<e.length;a++)if(!t.isNullOrUndefined(e[a][this.model.fields.parentId])&&e[a][this.model.fields.parentId].toString()==s){t.isNullOrUndefined(e[a])||(n=e[a][this.model.fields.id].toString()),e.splice(a,1),this._removeChildNodes(e,i,n);break}},_removeNode:function(i,s){if(null!=i[0]&&null!=i[0]&&i.length>0){var n,d,l,a,o,r=this;if(n=i.closest("ul").closest(".e-item"),d=i,this._triggerEvent("beforeDelete",{target:d,nodeDetails:this._getNodeDetails(d),parentElement:null!=n[0]?n:null,parentDetails:this._getNodeDetails(n),event:s}))return;if(this._isRender=!1,!t.isNullOrUndefined(this.dataSource())&&this.dataSource().length>0){l=this.dataSource();for(var h=0;h<l.length;h++)if(a=d.attr("id"),l[h][this.model.fields.id].toString()==a){o=this._groupingObjects(l,function(e){return[!t.isNullOrUndefined(e)&&[e[r.model.fields.parentId]].toString()]}),l.splice(h,1),this._removeChildNodes(l,o,a);break}}if(e(this._liList).index(d)==this.model.selectedNode&&(this.model.selectedNode=null),d.remove(),this._modifyCss(n),this._updateNodes(),this._updateCheckState(n),this._isRender=!0,this._triggerEvent("nodeDelete",{parentElement:null!=n[0]?n:null,parentDetails:this._getNodeDetails(n),event:s}))return;var r=this,l=this.dataSource();setTimeout(function(){null==r.dataSource()||r.dataSource()instanceof t.DataManager||(r._dataSource=r._groupingObjects(l,function(e){return[!t.isNullOrUndefined(e)&&[e[r.model.fields.parentId]].toString()]}))},300)}},_updateNodes:function(){this._beforeBaseClass(),this._applyFirstLastChildClass(),this._updateExpandedNodes(),this._updateCheckedNodes(),this._updateSelectedNode()},_updateText:function(e,i,s){if(1==this._templateType){for(var n=0,d=e.length;d>n;n++)if(!t.isNullOrUndefined(e[n])&&!t.isNullOrUndefined(e[n][this.model.fields.id])&&e[n][this.model.fields.id].toString()==i){e[n][this.model.fields.text]=s;var l=e[n];e.splice(n,1,l);
break}}else for(var n=0,d=e.length;d>n;n++){if(e[n][this.model.fields.id].toString()==i){e[n][this.model.fields.text]=s;var l=e[n];e.splice(n,1,l);break}e[n].hasOwnProperty("child")&&this._updateText(e[n].child,i,s)}},_KeyPressEventHandler:function(t,i,s,n){var d,l,a,o;return null!=e(t)[0]?(o=this._isNodeExpanded(t),d=this._getNodeDetails(t),a=i._getPath(t),l={keyCode:s,currentElement:t,value:d.text,isExpanded:o,path:a,event:n,id:d.id,parentId:d.parentId}):l={keyCode:s,currentElement:t,value:"",isExpanded:"",path:"",event:n,id:"",parentId:""},this._triggerEvent("keyPress",l)},_documentClick:function(i){if("Edit_Input"!=i.target.id)var s,n,d=e("#Edit_Input")[0];if(null!=d){var s=e(d).closest(".e-text")[0],n=d.value,l=e(d).closest(".e-item");0==this.getSelectedNode().length&&(this._isRender=!1,this._nodeSelectionAction(l),this._isRender=!0),e(d).remove(),s.lastChild.nodeValue=n,e(s).removeClass("e-editable").removeAttr("style"),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||this._updateText(this._newDataSource,l.attr("id"),n),this._triggerEvent("nodeEdit",{id:l.attr("id"),oldText:this._beforeEditText,newText:n,target:l,nodeDetails:this._getNodeDetails(l),event:i})}if(0==this.element.find(i.target).length){var a=this.element.find(".e-item > div > .e-text.e-node-focus");this._focusedNode=a.closest(".e-item"),a.removeClass("e-node-focus")}},_saveAction:function(i,s){var n=i.val(),d=i.closest(".e-item"),l=i.closest(".e-text")[0];i.remove(),null!=l&&(l.lastChild.nodeValue=n,e(l).removeClass("e-editable"),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||this._updateText(this._newDataSource,d.attr("id"),n),this._triggerEvent("nodeEdit",{id:d.attr("id"),oldText:this._beforeEditText,newText:n,target:d,nodeDetails:this._getNodeDetails(d),event:s}),this.element.focus())},_cancelAction:function(t){var i=t.closest(".e-text")[0];t.remove(),i.lastChild.nodeValue=this._beforeEditText,e(i).removeClass("e-node-hover e-editable"),0==this.getSelectedNode().length&&(this._isRender=!1,this.selectNode(e(i).closest(".e-item")),this._isRender=!0),this.element.focus()},_mouseEnterEvent:function(t){this.element.find(".e-node-hover").removeClass("e-node-hover"),e(t.currentTarget).hasClass("e-text")&&!e(t.currentTarget).hasClass("e-node-disable")&&e(t.currentTarget).addClass("e-node-hover")},_mouseLeaveEvent:function(t){e(t.currentTarget).removeClass("e-node-hover")},_createObjectByText:function(t,i){if("string"==typeof t){var s={};return s[this.model.fields.id]=t,s[this.model.fields.text]=t,null!=e(i)[0]&&(s[this.model.fields.parentId]=i.attr("id")),s}},_addNodesWhenObject:function(i,s){var n,d,l=JSON.stringify(this._dataSource),a=this.dataSource();if(this._dataSource=[],null!=this.dataSource()&&this.dataSource()instanceof t.DataManager&&(a=[]),null!=s[0]&&s.length>0&&(n=s.attr("id")),t.isNullOrUndefined(i.length))this._dataSource.push(i),t.isNullOrUndefined(this.dataSource())||(!t.isNullOrUndefined(n)&&(i[this.model.fields.parentId]=n),a.push(i));else if(this._dataSource=i,!t.isNullOrUndefined(this.dataSource()))for(var o=0;o<i.length;o++)n?i[o][this.model.fields.parentId]=n:delete i[o][this.model.fields.parentId],a.push(i[o]);d=this._templateType,this._templateType=2,this._liList||(this._liList=e("li",this.element));for(var r=document.createDocumentFragment(),h=0,c=this._dataSource.length;c>h;h++)r.appendChild(this._genTemplate(this._dataSource[h],this.model.fields)),this._liList.push(e(r).children()[0]);return this._templateType=d,null==this.dataSource()||this.dataSource()instanceof t.DataManager||(this._dataSource=JSON.parse(l)),r},_addExpandedNodes:function(t){var i=this.model.expandedNodes;this._removeNullInArray(i),-1==e.inArray(t,i)&&this.model.expandedNodes.push(t),this._persistValues(this.model.expandedNodes,"expandedNodes")},_removeExpandedNodes:function(t){var i=this.model.expandedNodes;e.inArray(t,i)>-1&&(this.model.expandedNodes.splice(e.inArray(t,i),1),0==i.length&&i.push(-1)),this._persistValues(this.model.expandedNodes,"expandedNodes")},_persistValues:function(i,s){if(!t.isNullOrUndefined(this.model.fields)&&null!=this.dataSource()){for(var n,d,l=i,a=[],o=0,r=l.length;r>o;o++)!t.isNullOrUndefined(l[o])&&l[o]>=0&&(n=this._liList[l[o]],d=e(n).attr("id"),d&&a.push(d));var h=this._getCookies("_persistedValues");if(h){var c=JSON.parse(h);"selectedNode"==s?c[s]=a[0]?a[0]:"":c[s]=a,this._setCookies("_persistedValues",JSON.stringify(c))}}},_onChecked:function(e,i){var s,n,d,l,a=e.closest(".e-item");nodeDetails=this._getNodeDetails(a),this._CurrenctSelectedNodes.push(nodeDetails.text),s=this._isChecked(a),n=t.isNullOrUndefined(i)?"":t.isNullOrUndefined(i.event)?"":i.event,d=t.isNullOrUndefined(i)?"":t.isNullOrUndefined(i.checknode)?"":i.checknode,l={currentElement:a,id:nodeDetails.id,parentId:nodeDetails.parentId,value:nodeDetails.text,currentNode:this._CurrenctSelectedNodes,currentCheckedNodes:d,isChecked:s,event:n},this._isRender&&this._triggerEvent("nodeCheck",l)},_onUnChecked:function(e,i){var s,n,d,l,a=e.closest(".e-item");nodeDetails=this._getNodeDetails(a),this._CurrenctSelectedNodes.push(nodeDetails.text),s=this._isChecked(a),n=t.isNullOrUndefined(i)?"":t.isNullOrUndefined(i.event)?"":i.event,d=t.isNullOrUndefined(i)?"":t.isNullOrUndefined(i.unchecknode)?"":i.unchecknode,l={currentElement:a,id:nodeDetails.id,parentId:nodeDetails.parentId,value:nodeDetails.text,currentNode:nodeDetails.text,currentUncheckedNodes:d,isChecked:s,event:n},this._triggerEvent("nodeUncheck",l)},_addCheckNodes:function(e){var t=this.model.checkedNodes;this._removeNullInArray(t),!t instanceof Array&&(t=[]),-1==t.indexOf(e)&&t.push(e)},_removeCheckNodes:function(e){var t=this.model.checkedNodes;!t instanceof Array&&(t=[]);var i=t.indexOf(e);-1!=i&&(t.splice(i,1),0==t.length&&t.push(-1))},_removeNullInArray:function(e){var t=e.indexOf(-1);-1!=t&&e.splice(t,1)},_afterInsertingNode:function(e){this._addDragableClass(),this._finalizeEditing(e);var t=e.closest("ul").closest(".e-item");this._modifyCss(t),this._updateCheckState(t),this._isSelectedAction(),t.length>0&&t.hasClass("e-node-disable")&&this._nodeDisableAction(t),this._updateSelectedNode()},_insertBeforeOrAfter:function(i,s,n){if(s=this._getNodeByID(s),null!=s[0]&&s.is("LI")&&s.hasClass("e-item")){if(this._triggerEvent("beforeAdd",{data:i,targetParent:null!=s[0]?s:null,parentDetails:this._getNodeDetails(s)}))return;if(this._isRender=!1,"object"!=typeof i&&(i=this._createObjectByText(i)),"object"!=typeof i)return;i[this.model.parentId]&&delete i[this.model.parentId],outerLi=this._addNodesWhenObject(i,s),temp=document.createElement("ul"),e(temp).append(outerLi),outerLi=e(temp.children),this.model.showCheckbox&&outerLi.children().find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),s.parents(".e-item:first").length>0?s.parents(".e-item:first").append(outerLi):this.element.append(outerLi),this.model.showCheckbox&&this._isCheckedAction(),this._dropAsSublingNode(s,outerLi.find("> div > .e-text"),n,""),this._afterInsertingNode(outerLi),this._isRender=!0,this._triggerEvent("nodeAdd",{data:i,nodes:outerLi,parentElement:null!=s[0]?s:null,parentDetails:this._getNodeDetails(s)});var d=this,l=this.dataSource();setTimeout(function(){null==d.dataSource()||d.dataSource()instanceof t.DataManager||(d._dataSource=d._groupingObjects(l,function(e){return[!t.isNullOrUndefined(e)&&[e[d.model.fields.parentId]].toString()]}))},300)}},_getNodeByID:function(t){return"object"!=typeof t&&""!=t&&(t=this.element.find(".e-item#"+t)),t=e(t),t=e(t[0]),t.is("A")&&t.hasClass("e-text")&&(t=t.closest(".e-item")),t},_isTreeElement:function(t){return null!=e(t)[0]&&t.is("LI")&&t.hasClass("e-item")},_isUrl:function(e){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return t.test(e)},_sendAjaxOptions:function(e,t){var i,s,n=this;i=this._getNodeDetails(t),i.mapper=this.model.fields,i.model=this.model,s={url:e,data:i,type:"POST",async:!0,crossDomain:!0,dataType:"JSON",contentType:"application/json; charset=utf-8",success:function(e){try{n._ajaxSuccessHandler(e,t)}catch(i){}},error:function(e){try{n._ajaxErrorHandler(e)}catch(t){}}},this._sendAjaxRequest(s)},_sendAjaxRequest:function(t){var i=JSON.parse(JSON.stringify(t));delete i.success,delete i.error,this._triggerEvent("beforeLoad",{ajaxOptions:i})||(delete i.success,delete i.error,e.extend(t,i),e.ajax({type:t.type,url:t.url,dataType:t.dataType,data:t.data,async:t.async,contentType:t.contentType,crossDomain:t.crossDomain,success:t.success,error:t.error}))},_ajaxSuccessHandler:function(e,t){this._isRender=!1,"object"==typeof e&&this.addNode(e,t),this._isRender=!0,this._triggerEvent("loadSuccess",{data:e,targetParent:t,parentDetails:this._getNodeDetails(t)})},_ajaxErrorHandler:function(e){this._triggerEvent("loadError",{error:e})},_wireEvents:function(){this._on(this.element,"click",this._ClickEventHandler)._on(this.element.find(".e-text"),"mouseenter",this._mouseEnterEvent)._on(this.element.find(".e-text"),"mouseleave",this._mouseLeaveEvent)._on(this.element,this.model.expandOn,this._expandEventHandler)._on(this.element,"focus",this._onFocusHandler),this.model.allowKeyboardNavigation&&this._on(this.element,"keydown",this._KeyPress)},_unWireEvents:function(){this._off(this.element,"click")._off(this.element.find(".e-text"),"mouseenter")._off(this.element.find(".e-text"),"mouseleave")._off(this.element,this.model.expandOn)._off(this.element,"focus"),this._preventEditable(),this._preventDraggable(),this.model.allowKeyboardNavigation&&this._off(this.element,"keydown"),this.model.showCheckbox&&this.element.find(".nodecheckbox").ejCheckBox("disable")},_enableDragDrop:function(){this.model.allowDragAndDrop&&(this._drag(),this.model.allowDropChild&&this._childDrop(),this.model.allowDropSibling&&this._siblingDrop())},_allowEditable:function(){this.model.template||(this.element.find(".e-item").addClass("AllowEdit"),this._on(e(document),"click",this._documentClick)._on(this.element.find(".e-item > div > .e-text"),"dblclick",this._inlineEdit))},_preventEditable:function(){this.element.find(".e-item").removeClass("AllowEdit"),this._off(e(document),"click")._off(this.element.find(".e-item > div > .e-text"),"dblclick")},_preventDraggable:function(){this.element.find(".e-draggable, .e-droppable").removeClass("e-draggable e-droppable"),this._preventDropSibling(),this._preventDropChild(),this._off(this._anchors,"mouseup touchstart",this._focusElement)},_preventDropSibling:function(){this.element.find(".e-dropsibling").removeClass("e-dropsibling")},_preventDropChild:function(){this.element.find(".e-item > div > .e-dropchild").removeClass("e-dropchild")},refresh:function(){this._unWireEvents(),this.element.html(""),this._init()},expandAll:function(){this.model.enableMultipleExpand&&this._expandAll()},collapseAll:function(){this.model.enableMultipleExpand&&this._collapseAll()},checkAll:function(){this.model.showCheckbox&&this._checkAll()},unCheckAll:function(){this.model.showCheckbox&&this._uncheckAll()},selectNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeSelectionAction(e)},unselectNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeUnSelectionAction(e)},enableNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeEnableAction(e)},disableNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeDisableAction(e)},addNodes:function(e,t){e&&e.length>0&&this.addNode(e,t)},addNode:function(i,s){if(!t.isNullOrUndefined(i)){var n,d,l,a=null,o=this.element;if(l=s?this._getNodeByID(s):this.getSelectedNode(),o.is("UL")||(o=this.element.children("ul:first")),l=this._isTreeElement(l)?l:[],"object"==typeof i&&(t.isNullOrUndefined(i.length)&&!t.isNullOrUndefined(i[this.model.fields.parentId])?d=i[this.model.fields.parentId]:t.isNullOrUndefined(i.length)||1!=i.length||(d=i[0][this.model.fields.parentId]),d&&(l=this._getNodeByID(d))),!(this._triggerEvent("beforeAdd",{data:i,targetParent:null!=l[0]?l:null,parentDetails:this._getNodeDetails(l)})||(this._isRender=!1,0!=l.length&&!this.isDisabled(l)&&this._expandNode(l),"object"!=typeof i&&(i=this._createObjectByText(i,l)),"object"!=typeof i||t.isNullOrUndefined(i.length)&&0==i.length))){a=this._addNodesWhenObject(i,l),n=document.createElement("ul"),e(n).append(a),a=e(n.children),this.model.showCheckbox&&a.children().find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),this._appendNode(l,a),null!=l[0]&&l.find("> div > .e-minus").length>0&&!this.model.enableMultipleExpand&&this._denyMultipleExpand(l),this._updateNodes(),this._afterInsertingNode(a),this._isRender=!0,this._triggerEvent("nodeAdd",{data:i,nodes:a,parentElement:null!=l[0]?l:null,parentDetails:this._getNodeDetails(l)});var r=this,h=this.dataSource();setTimeout(function(){null==r.dataSource()||r.dataSource()instanceof t.DataManager||(r._dataSource=r._groupingObjects(h,function(e){return[!t.isNullOrUndefined(e)&&[e[r.model.fields.parentId]].toString()]}))},300)}}},removeNode:function(e){e=e?this._getNodeByID(e):this.getSelectedNode(),this._isTreeElement(e)&&this._removeNode(e)},removeAll:function(){this._liList.remove(),this._updateNodes()},checkNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeCheck(e.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0])},uncheckNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeUncheck(e.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0])},expandNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&(this._allowOnDemand=!0,this._expandNode(e),this._allowOnDemand=!1)},collapseNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._collpaseNode(e)},showNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&e.css("visibility","").removeClass("hidden")},hideNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&e.css("visibility","hidden").addClass("hidden")},show:function(){this.element.css("visibility","").find(".e-item").removeClass("hidden")},hide:function(){this.element.css("visibility","hidden").find(".e-item").addClass("hidden")},hasChildNode:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?e.find("> ul > .e-item").length>0?!0:!1:void 0},isChildLoaded:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)&&e.find("ul > .e-item").length>0?!0:!1},isNodeChecked:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?this._isChecked(e):void 0},isExpanded:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?this._isNodeExpanded(e):void 0},isVisible:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)&&"hidden"!=e.css("visibility")?!0:!1},isExist:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)&&-1!=this._liList.index(e)?!0:!1},isSelected:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?e.find("> div > .e-text").hasClass("e-active"):void 0},isDisabled:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)&&e.hasClass("e-node-disable")?!0:!1},getTreeData:function(){return t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager?void 0:this._orderDataSource()},getText:function(t){return t=this._getNodeByID(t),this._isTreeElement(t)?e.trim(this.element.find(t).find("> div > .e-text").text()):void 0},getSelectedNode:function(){return this.element.find(".e-item > div > .e-active").closest(".e-item")},getCheckedNodes:function(){return this.model.showCheckbox?this._liList.find('> div > .e-chkbox-wrap[aria-checked="true"]').closest(".e-item"):void 0},getExpandedNodes:function(){return this.element.find(".e-item > div > .e-minus").closest(".e-item")},getExpandedNodesIndex:function(){for(var e=this.getExpandedNodes(),t=[],i=0,s=e.length;s>i;i++)t.push(this._liList.index(e[i]));return t},getCheckedNodesIndex:function(){for(var e=this.getCheckedNodes(),t=[],i=0,s=e.length;s>i;i++)t.push(this._liList.index(e[i]));return t},getSelectedNodeIndex:function(){return this._liList.index(this.getSelectedNode())},getVisibleNodes:function(){return this.element.find(".e-item:visible:not(.hidden, .e-node-disable)")},getNodeCount:function(){return this.element.find(".e-item").length},getNode:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?this._getNodeDetails(e):null},getNodeIndex:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?this._liList.index(e):void 0},getNodeByIndex:function(t){return"number"==typeof t?e(this._liList[t]):void 0},getParent:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?e.parents(".e-item:first"):void 0},updateText:function(i,s){if(i=this._getNodeByID(i),this._isTreeElement(i)&&!t.isNullOrUndefined(s)){var n,d,l=this.element.find(i).children("div").find("> .e-text")[0];if(null!=l){if(d={currentElement:e(l)},this._triggerEvent("beforeEdit",d))return!1;n=l.lastChild.nodeValue}l.lastChild.nodeValue=s,t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||this._updateText(this._newDataSource,i.attr("id"),s),this._triggerEvent("nodeEdit",{id:i.attr("id"),oldText:n,newText:s,target:i,nodeDetails:this._getNodeDetails(i),event:null})}},insertAfter:function(e,t){this._insertBeforeOrAfter(e,t,!1)},insertBefore:function(e,t){this._insertBeforeOrAfter(e,t,!0)},moveNode:function(e,i,s){if(e=this._getNodeByID(e),i=this._getNodeByID(i),this._isTreeElement(e)){if(e.parents(".e-item")[0]==i[0]&&t.isNullOrUndefined(s)||i.find(e).index()==s||null==i[0]&&this._liList.index(e)==s)return;var n=null!=i[0]&&s>=0?i.find("> ul > .e-item").eq(s):this.getNodeByIndex(s);this._isRender=!1,this._isTreeElement(n)?n.parents(".e-item:first")[0]==e.parents(".e-item:first")[0]&&null==n.next(".e-item")[0]?this._dropAsSublingNode(n,e.find(" > div > .e-text"),!1,""):this._dropAsSublingNode(n,e.find(" > div > .e-text"),!0,""):this._dropAsChildNode(i,e.find(" > div > .e-text"),""),i.length>0&&i.hasClass("e-node-disable")&&this._nodeDisableAction(i),this._isRender=!0}},loadData:function(e,t){t=this._getNodeByID(t),this._isUrl(e)&&(null==t[0]||this._isTreeElement(t))&&this._sendAjaxOptions(e,t)},ensureVisible:function(t){if(t=this._getNodeByID(t),this._isTreeElement(t)&&!this.isDisabled(t)&&this.isVisible(t)){for(var i,s=t.parents(".e-item"),n=0,d=s.length;d>n;n++)this._expandNode(e(s[n]));return t.find("> div > .e-text").addClass("e-node-hover"),i=t.offset(),t.animate({scrollTop:i.top},this.model.enableAnimation?350:0,"linear",function(){t[0].scrollIntoView(!1)}),!0}return!1},_triggerEvent:function(e,t){return this._isRender?this._trigger(e,t):void 0}})}(jQuery,Syncfusion);



